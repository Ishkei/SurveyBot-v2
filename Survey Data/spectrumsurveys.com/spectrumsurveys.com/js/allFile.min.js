"use strict";
function _createForOfIteratorHelper(e, n) {
  var t,
    r,
    a,
    i,
    s = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (s)
    return (
      (a = !(r = !0)),
      {
        s: function () {
          s = s.call(e);
        },
        n: function () {
          var e = s.next();
          return (r = e.done), e;
        },
        e: function (e) {
          (a = !0), (t = e);
        },
        f: function () {
          try {
            r || null == s.return || s.return();
          } finally {
            if (a) throw t;
          }
        },
      }
    );
  if (
    Array.isArray(e) ||
    (s = _unsupportedIterableToArray(e)) ||
    (n && e && "number" == typeof e.length)
  )
    return (
      s && (e = s),
      (i = 0),
      {
        s: (n = function () {}),
        n: function () {
          return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
        },
        e: function (e) {
          throw e;
        },
        f: n,
      }
    );
  throw new TypeError(
    "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
var psApp = angular.module("pureSpectrumApp", [
    "ui.router",
    "ngTouch",
    "ngCookies",
    "ngProgressLite",
    "cgNotify",
    "LocalStorageModule",
    "ngAnimate",
    "pascalprecht.translate",
    "isteven-multi-select",
    "checklist-model",
    "ui.bootstrap",
    "ng.deviceDetector",
    "ngDragDrop",
  ]),
  isSameUrlsIgnoringQueryParamsOrder =
    (psApp.config([
      "$stateProvider",
      "$urlRouterProvider",
      "$httpProvider",
      "$translateProvider",
      function (e, n, t, r) {
        var a = sessionStorage.getItem("SS_startUrl");
        isSameUrlsIgnoringQueryParamsOrder(window.location.href, a)
          ? (window.globalStartUrl = a)
          : ((window.globalStartUrl = window.location.href),
            sessionStorage.setItem("SS_startUrl", window.location.href)),
          e
            .state("startsurvey-us", {
              url: "/startsurvey-us?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey.html",
            })
            .state("invalidaccess", {
              url: "/invalidaccess",
              templateUrl: "404.html",
            })
            .state("startsurvey-ca", {
              url: "/startsurvey-ca?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey-ca.html",
            })
            .state("startsurvey-uk", {
              url: "/startsurvey-uk?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey-uk.html",
            })
            .state("startsurvey-au", {
              url: "/startsurvey-au?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey-au.html",
            })
            .state("startsurvey-fr", {
              url: "/startsurvey-fr?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey-fr.html",
            })
            .state("startsurvey-de", {
              url: "/startsurvey-de?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id",
              templateUrl: "startsurvey-de.html",
            })
            .state("survey-screener", {
              url: "/survey-screener?token&surveyNum&tid&bsec&ps_supplier_sid&ps_supplier_respondent_id&ps_redirect_test&ps_simu_forced_loi&ps_simu_forced_status&supplier_id&psid",
              templateUrl: "survey-screener.html",
            })
            .state("/start-survey", {
              url: "/start-survey",
              templateUrl: "screenerV3.html",
            })
            .state("/micro-survey", {
              url: "/micro-survey",
              templateUrl: "micro-survey.html",
            })
            .state("error", { url: "/error", templateUrl: "error.html" })
            .state("segmentation", {
              url: "/segmentation?survey_id&session_id&parentQual&locale&psSource",
              templateUrl: "segmentation/views/segmentation.html",
              params: {
                session_id: { value: "", squash: !0 },
                survey_id: { value: "", squash: !0 },
                parentQual: null,
                locale: "",
                screenerId: "",
                psSource: "",
                redirectUrl: "",
                mpRedirectValidation: null,
                showMultiLangChoices: null,
              },
            }),
          r.translations("en", {
            respTitle: "Before you begin the survey, please answer the",
            survey: "questions below",
            zip: "My postal code is",
            race: "I’m a",
            birth: "I was born",
            afterBirth: "",
            relationship: "I’m",
            haveKids: "and have",
            aMale: "a",
            aFemale: "an",
            andHave: "and have",
            yougestKids: "Tell us about your five youngest kids",
            kid: "kid",
            kids: "kids",
            childAge: "old",
            childAgeMonth: "born in",
            old: "old",
            and: "and",
            iEarn: "I earn approximately",
            familyEarn: "My family earns",
            incomeYear: "per year",
            iam: "I'm",
            employe: "employed",
            education: "My highest level of education is",
            jan: "January",
            feb: "February",
            mar: "March",
            apr: "April",
            may: "May",
            jun: "June",
            jul: "July",
            aug: "August",
            oct: "October",
            sep: "September",
            nov: "November",
            dec: "December",
            month: "Month",
            year: "Year",
            boy: "Boy",
            girl: "Girl",
            employed: "employed",
            multiLangQuestion: "Which languages are you comfortable with?",
          }),
          r.translations("fr", {
            respTitle: "Avant de commencer ",
            survey: "enquête…",
            zip: "Mon code postal est ",
            race: "Je suis",
            birth: "Date de naissance",
            afterBirth: "",
            relationship: "I’m",
            haveKids: "et j’ai un",
            aMale: "Un",
            aFemale: "Une",
            andHave: "et avoir",
            yougestKids: "Parlez-nous de vos cinq enfants les plus jeunes",
            kid: "enfant",
            kids: "enfants",
            childAge: "ans",
            childAgeMonth: "né en",
            old: "vieux",
            and: "et",
            iEarn: "Je gagne environ",
            familyEarn: "Ma famille gagne environ",
            incomeYear: "par an",
            iam: "Je suis",
            employe: "employé",
            education: "Mon plus haut niveau d'éducation est",
            jan: "janvier",
            feb: "février",
            mar: "mars",
            apr: "avril",
            may: "mai",
            jun: "juin",
            jul: "juillet",
            aug: "août",
            sep: "septembre",
            oct: "octobre",
            nov: "novembre",
            dec: "décembre",
            month: "mois",
            year: "ans",
            boy: "Garçon",
            girl: "Fille",
          }),
          r.translations("de", {
            respTitle: "Bevor Sie mit der Umfrage beginnen",
            survey: ", beantworten Sie bitte die folgenden Fragen",
            zip: "Mon code postal est ",
            race: "Je suis",
            birth: "Ich bin im",
            afterBirth: "geboren",
            relationship: "I’m",
            haveKids: "et j’ai un",
            aMale: "Un",
            aFemale: "Une",
            andHave: "et avoir",
            yougestKids: "Parlez-nous de vos cinq enfants les plus jeunes",
            kid: "enfant",
            kids: "enfants",
            childAge: "ans",
            childAgeMonth: "né en",
            old: "vieux",
            and: "et",
            iEarn: "Je gagne environ",
            familyEarn: "Mein Haushaltseinkommen beträgt ungefähr",
            incomeYear: "pro Jahr",
            iam: "Ich bin",
            employe: "employé",
            education: "Mon plus haut niveau d'éducation est",
            jan: "Januar",
            feb: "Februar",
            mar: "März",
            apr: "April",
            may: "Mai",
            jun: "Juni",
            jul: "Juli",
            aug: "August",
            sep: "September",
            oct: "Oktober",
            nov: "November",
            dec: "Dezember",
            month: "Monate",
            year: "Jahre",
            boy: "Garçon",
            girl: "Fille",
          }),
          r.translations("ja", {
            respTitle: "始めに次の質問を回答してくださ",
            survey: "い。",
            boy: "男の子",
            girl: "女の子",
            year: "歳",
            month: "ヶ月",
            jan: "1月",
          }),
          r.translations("pt", {
            respTitle: "Antes de começar a",
            survey: "pesquisa",
            boy: "Garoto",
            girl: "Menina",
            year: "anos",
            month: "meses",
            jan: "Janeiro",
          }),
          r.translations("it", {
            respTitle: "Prima di",
            survey: "iniziare",
            boy: "ragazzo",
            girl: "ragazza",
            year: "anni",
            month: "mesi",
            jan: "Gennaio",
          }),
          r.translations("es", {
            respTitle: "Antes de comenzar la",
            survey: "encuesta",
            boy: "Chico",
            girl: "Niña",
            year: "Año",
            month: "Mes",
            jan: "Enero",
            multiLangQuestion: "¿Con qué idiomas te sientes cómodo?",
          }),
          r.translations("zh", {
            respTitle: "",
            survey: "请回答以下问题",
            boy: "男孩",
            girl: "女孩",
            year: "年",
            month: "个月",
            jan: "一月",
          }),
          r.translations("zh-Hant", {
            respTitle: "",
            survey: "请回答以下问题",
            boy: "我是男孩",
            girl: "女孩",
            year: "年",
            month: "月",
            jan: "一月",
          }),
          r.translations("hi", {
            respTitle: "सबसे पहले, कृपया निम्नलिखित, ",
            survey: "प्रश्नों का उत्तर दें",
            boy: "लड़का",
            girl: "लड़की",
            year: "साल",
            month: "महीना",
            jan: "जनवरी",
            multiLangQuestion: "आप किन भाषाओं में सहज हैं?",
          }),
          r.translations("pl", {
            respTitle: "Przed rozpoczęciem ankiety należy",
            survey: "odpowiedzieć na poniższe pytania",
            boy: "chłopak",
            girl: "dziewczyna",
            year: "Rok",
            month: "Miesiąc",
            jan: "Styczeń",
          }),
          r.translations("ko", {
            respTitle: "설문 조사를 시작하기 전에",
            survey: "아래 질문에 답변하십시오. ",
            boy: "소년",
            girl: "소녀",
            year: "년",
            month: "달",
            jan: "1월",
          }),
          r.translations("id", {
            respTitle: "Sebelum memulai",
            survey: "survei, jawab pertanyaan di bawah ini",
            boy: "laki-laki",
            girl: "perempuan",
            year: "Tahun",
            month: "Bulan",
            jan: "Januari",
          }),
          r.translations("vi", {
            respTitle: "Trước khi bắt đầu",
            survey: "khảo sát, vui lòng trả lời các câu hỏi dưới đây",
            year: "Năm",
            month: "Tháng",
            jan: "January",
          }),
          r.translations("ru", {
            respTitle: "Прежде чем приступить к",
            survey: "опросу, ответьте на приведенные ниже вопросы.",
            year: "Год",
            month: "Месяц",
            jan: "январь",
          }),
          r.translations("th", {
            respTitle: "ก่อนที่คุณจะเริ่มการสำรวจโปรดตอบคำถามด้านล่างนี้",
            survey: " ",
            year: "ปี",
            month: "เดือน",
            jan: "มกราคม",
          }),
          r.translations("uk", {
            respTitle: "Перш ніж почати",
            survey:
              "огляд, будь-ласка, відповідайте на питання, наведені нижче",
            year: "рік",
            month: "місяць",
            boy: "хлопчик",
            girl: "дівчинка",
            jan: "Січень",
          }),
          r.translations("ar", {
            respTitle: "الإجابة على الأسئلة أدناه",
            survey: "قبل البدء في الاستبيان، يرجى",
            year: "عام",
            month: "شهر",
            jan: "كانون الثاني",
            girl: "صبي",
            boy: "فتاة",
          }),
          r.translations("ms", {
            respTitle: "Sebelum anda memulakan",
            survey: "tinjauan, sila jawab soalan di bawah",
            year: "Tahun",
            month: "Bulan",
            boy: "Lelaki",
            girl: "Perempuan",
            jan: "Januari",
          }),
          r.translations("nl", {
            respTitle: "Voordat u aan de enquête ",
            survey: "begint, beantwoordt u de onderstaande vragen",
            year: "jaar",
            month: "maanden",
            boy: "jongen",
            girl: "meisje",
            jan: "Januari",
          }),
          r.translations("nb", {
            respTitle: "Før du begynner",
            survey: "undersøkelsen, vennligst svar på spørsmålene nedenfor",
            year: "år",
            month: "måneder",
            boy: "gutt",
            girl: "jente",
            jan: "Januar",
          }),
          r.translations("da", {
            respTitle: "Før du begynder",
            survey: "undersøgelsen, bedes du besvare spørgsmålene nedenfor",
            year: "år",
            month: "måneder",
            boy: "dreng",
            girl: "pige",
            jan: "Januar",
          }),
          r.translations("sv", {
            respTitle: "Innan du börjar",
            survey: "undersökningen, vänligen svara på frågorna nedan",
            year: "år",
            month: "måneder",
            boy: "pojke",
            girl: "flicka",
            jan: "Januari",
          }),
          r.translations("tr", {
            respTitle: "Ankete başlamadan önce",
            survey: "lütfen aşağıdaki soruları cevaplayın",
            year: "Yaşında",
            month: "Aylık",
            boy: "Erkek",
            girl: "Kız",
            jan: "Ocak",
          }),
          r.translations("hu", {
            respTitle:
              "Felmérés megkezdése előtt kérlek, válaszolni a következő",
            survey: "kérdésekre.",
            year: "év",
            month: "Hónap",
            boy: "Fiú",
            girl: "Lány",
            jan: "ianuarie",
          }),
          r.translations("bg", {
            respTitle: "Преди да започне проучването моля отговорете на",
            survey: "въпросите по-долу",
            year: "година",
            month: "Месец",
            boy: "момче",
            girl: "момиче",
            jan: "януари",
          }),
          r.translations("ro", {
            respTitle:
              "Înainte de a începe sondajul, vă rugăm să răspundeți la",
            survey: "întrebările de mai jos.",
            year: "an",
            month: "Lună",
            boy: "Băiat",
            girl: "Fată",
            jan: "ianuarie",
          }),
          r.translations("cs", {
            respTitle: "Před zahájením průzkumu odpovězte prosím na",
            survey: "níže uvedené otázky.",
            year: "rok",
            month: "Měsíc",
            boy: "Chlapec",
            girl: "Dívka",
            jan: "leden",
          }),
          r.translations("sk", {
            respTitle: "Pred začatím prieskumu odpovedzte na",
            survey: "otázky uvedené nižšie",
            year: "rok",
            month: "Mesiac",
            boy: "chlapec",
            girl: "dievča",
            jan: "január",
          }),
          r.translations("el", {
            respTitle:
              "Πριν ξεκινήσετε την έρευνα, παρακαλώ απαντήστε στις παρακάτω",
            survey: "ερωτήσεις.",
            year: "χρόνος",
            month: "Μήνας",
            boy: "Αγόρι",
            girl: "Κορίτσι",
            jan: "Ιανουάριος",
          }),
          r.translations("he", {
            respTitle: "לפני שתתחיל בסקר, השב לשאלות",
            survey: "להלן.",
            year: "שָׁנָה",
            month: "חוֹדֶשׁ",
            boy: "יֶלֶד",
            girl: "ילדה",
            jan: "יָנוּאָר",
          }),
          r.translations("fi", {
            respTitle: "Ennen kuin aloitat kyselyn, vastaa kysymykseen",
            survey: "alla olevat kysymykset",
            year: "vuosi",
            month: "kuukausi",
            boy: "poika",
            girl: "tyttö",
            jan: "tammi",
          }),
          r.translations("bn", {
            respTitle: "সমীক্ষা শুরু করার আগে, প্রশ্নের উত্তর দিন",
            survey: "নীচে প্রশ্ন",
            year: "বছর",
            month: "মাস",
            boy: "ছেলে",
            girl: "মেয়ে",
            jan: "জান",
            multiLangQuestion: "আপনি কোন ভাষাগুলির সাথে স্বাচ্ছন্দ্য বোধ করেন?",
          }),
          r.translations("ur", {
            respTitle: "سروے شروع کرنے سے پہلے ، براہ کرم اس کا جواب دیں",
            survey: "ذیل میں سوالات",
            year: "سال",
            month: "مہینہ",
            boy: "لڑکا",
            girl: "لڑکی",
            jan: "جنوری",
          }),
          r.translations("pa", {
            respTitle: "ਸਰਵੇਖਣ ਸ਼ੁਰੂ ਕਰਨ ਤੋਂ ਪਹਿਲਾਂ, ਕਿਰਪਾ ਕਰਕੇ ਇਸ ਦਾ ਜਵਾਬ ਦਿਓ",
            survey: "ਹੇਠ ਸਵਾਲ",
            year: "ਸਾਲ",
            month: "ਮਹੀਨਾ",
            boy: "ਮੁੰਡਾ",
            girl: "ਕੁੜੀ",
            jan: "ਜਨਵਰੀ",
          }),
          r.translations("my", {
            respTitle: "စစ်တမ်းကို သင်မစတင်မီ၊ ကျေးဇူးပြု၍ အောက်ပါ",
            survey: "မေးခွန်းများကို ဖြေဆိုပါ။",
            year: "ခုနှစ်",
            month: "လ",
            boy: "ယောက်ျားလေး",
            girl: "ကောင်မလေး",
            jan: "ဇန်နဝါရီ",
          }),
          r.translations("km", {
            respTitle: "មុនពេលអ្នកចាប់ផ្តើមការស្ទង់មតិ សូមឆ្លើយសំណួរ ខាងក្រោម",
            survey: "សំណួរខាងក្រោម",
            year: "ឆ្នាំ",
            month: "ខែ",
            boy: "ក្មេងប្រុស",
            girl: "ក្មេងស្រី",
            jan: "ខែមករា",
          }),
          r.translations("sr", {
            respTitle: "Пре него што започнете анкету, одговорите на то",
            survey: "Питања испод",
            year: "Година",
            month: "Месец дана",
            boy: "Дечак",
            girl: "Девојка",
            jan: "Јануар",
          }),
          r.translations("hr", {
            respTitle: "Prije nego što započnete anketu, odgovorite na",
            survey: "Pitanja u nastavku",
            year: "Godina",
            month: "Mjesec",
            boy: "Dječak",
            girl: "Djevojka",
            jan: "Siječanj",
          }),
          r.translations("sl", {
            respTitle: "Preden začnete anketo, odgovorite na",
            survey: "spodaj vprašanja",
            year: "Leto",
            month: "Mesec",
            boy: "Fant",
            girl: "Deklica",
            jan: "Januar",
          }),
          r.translations("kk", {
            respTitle: "Сауалнаманы бастамас бұрын, жауап беріңізші",
            survey: "Төмендегі сұрақтар",
            year: "Жыл",
            month: "Ай",
            boy: "Ұл",
            girl: "Қыз бала",
            jan: "Қаңтар",
          }),
          r.translations("uz", {
            respTitle: "So'rovni boshlashdan oldin, iltimos javob bering",
            survey: "Quyidagi savollar",
            year: "Yil",
            month: "Oy",
            boy: "Bola",
            girl: "Qiz",
            jan: "Yanvar",
          }),
          r.translations("lt", {
            respTitle: "Prieš pradėdami apklausą, atsakykite į",
            survey: "klausimus žemiau",
            year: "Metai",
            month: "Mėnuo",
            boy: "Berniukas",
            girl: "Mergaitė",
            jan: "Sausis",
          }),
          r.translations("et", {
            respTitle: "Enne uuringu alustamist vastake palun",
            survey: "allpool küsimused",
            year: "Aasta",
            month: "Kuu",
            boy: "Poiss",
            girl: "Tütarlaps",
            jan: "Jaanuar",
          }),
          r.translations("lv", {
            respTitle: "Pirms aptaujas sākšanas, lūdzu, atbildiet uz",
            survey: "jautājumi zemāk",
            year: "Gads",
            month: "Mēnesis",
            boy: "Zēns",
            girl: "Meitene",
            jan: "Janvāris",
          }),
          r.translations("tl", {
            respTitle: "Bago mo simulan ang survey, mangyaring sagutin ang",
            survey: "mga katanungan sa ibaba",
            year: "Taon",
            month: "Buwan",
            boy: "Boy",
            girl: "Babae",
            jan: "Enero",
          }),
          r.translations("sw", {
            respTitle: "Kabla ya kuanza uchunguzi, tafadhali jibu",
            survey: "maswali hapa chini",
            year: "Mwaka",
            month: "Mwezi",
            boy: "Kijana",
            girl: "Msichana",
            jan: "Januari",
          }),
          r.translations("rw", {
            respTitle:
              "Mbere yo gutangira ubushakashatsi, nyamuneka subiza Uwiteka",
            survey: "Ibibazo bikurikira",
            year: "Umwaka",
            month: "Ukwezi",
            boy: "Umuhungu",
            girl: "Umukobwa",
            jan: "Mutarama",
          }),
          r.translations("sq", {
            respTitle: "Para se të filloni sondazhin, ju lutemi përgjigjuni",
            survey: "Pyetjet më poshtë",
            year: "Vit",
            month: "Muaj",
            boy: "Djalë",
            girl: "Vajze",
            jan: "Janar",
          }),
          r.translations("am", {
            respTitle: "የዳሰሳ ጥናቱን ከመጀመርዎ በፊት እባክዎን ይመልሱ",
            survey: "ከዚህ በታች ጥያቄዎች",
            year: "አመት",
            month: "ወር",
            boy: "ወንድ ልጅ",
            girl: "ልጃገረድ",
            jan: "ጥር",
          }),
          r.translations("la", {
            respTitle: "Priusquam incipiens",
            survey: "investigationis",
            year: "Annus",
            month: "Menses",
            boy: "Puer",
            girl: "Puella",
            jan: "Januarius",
          }),
          r.translations("mt", {
            respTitle: "Qabel ma tibda l-istħarriġ, jekk jogħġbok wieġeb",
            survey: "mistoqsijiet hawn taħt",
            year: "Sena",
            month: "Xahar",
            boy: "Tifel",
            girl: "Tifla",
            jan: "Jannar",
          }),
          r.translations("ka", {
            respTitle: "სანამ გამოკითხვას დაიწყებთ, გთხოვთ უპასუხოთ",
            survey: "ქვემოთ მოცემული კითხვები",
            year: "წელი",
            month: "თვე",
            boy: "ბიჭი",
            girl: "ქალიშვილი",
            jan: "იანვარი",
          }),
          r.translations("az", {
            respTitle: "Anketə başlamazdan əvvəl, cavab verin",
            survey: "suallar",
            year: "İl",
            month: "Ay",
            boy: "Oğlan",
            girl: "Qız",
            jan: "yanvar",
          }),
          r.translations("hy", {
            respTitle: "Նախքան հարցումը սկսելը, խնդրում ենք պատասխանել",
            survey: "Հարցեր ստորեւ",
            year: "Տարի",
            month: "Ամիս",
            boy: "Տղա",
            girl: "Աղջիկ",
            jan: "Հունվար",
          }),
          r.translations("ne", {
            respTitle: "तपाईंले सर्वेक्षण सुरू गर्नु अघि, कृपया जवाफ दिनुहोस्",
            survey: "तल प्रश्नहरू",
            year: "वर्ष",
            month: "महीना",
            boy: "केटा",
            girl: "केटी",
            jan: "जनवरी",
          }),
          r.translations("si", {
            respTitle: "ඔබ සමීක්ෂණය ආරම්භ කිරීමට පෙර, කරුණාකර පිළිතුරු දෙන්න",
            survey: "මිනුම්",
            year: "අවුරුදු",
            month: "මස",
            boy: "කොල්ලා",
            girl: "ගැහැණු ළමයා",
            jan: "ජන",
          }),
          r.translations("ky", {
            respTitle: "Сурамжылоону баштаардан мурун суроого жооп бериңиз",
            survey: "Төмөндө суроолор",
            year: "Жыл",
            month: "Ай",
            boy: "Бала",
            girl: "Кыз",
            jan: "Январь",
          }),
          r.translations("tk", {
            respTitle:
              "Anketany başlamazdan ozal jogap bermegiňizi haýyş edýäris",
            survey: "Aşakdaky soraglar",
            year: "Ýyl",
            month: "Aý",
            boy: "Oglan",
            girl: "Gyz",
            jan: "Januaryanwar",
          }),
          r.translations("tg", {
            respTitle: "Пеш аз оғози пурсиш, лутфан ҷавоб диҳед",
            survey: "Саволҳои дар поён",
            year: "Сол",
            month: "Моҳ",
            boy: "Писарбача",
            girl: "Духтар",
            jan: "Январ",
          }),
          r.translations("be", {
            respTitle: "Перш чым пачаць апытанне, калі ласка, адкажыце",
            survey: "Пытанні ніжэй",
            year: "Год",
            month: "Месяц",
            boy: "Хлопец",
            girl: "Дзяўчына",
            jan: "Студзень",
          }),
          r.translations("mr", {
            respTitle: "आपण सर्वेक्षण सुरू करण्यापूर्वी, कृपया उत्तर द्या",
            survey: "खाली प्रश्न",
            year: "वर्ष",
            month: "महिना",
            boy: "मुलगा",
            girl: "मुलगी",
            jan: "जानेवारी",
            multiLangQuestion: "तुम्हाला कोणत्या भाषा आवडतात?",
          }),
          r.translations("te", {
            respTitle: "మీరు సర్వే ప్రారంభించే ముందు, దయచేసి సమాధానం ఇవ్వండి",
            survey: "క్రింద ప్రశ్నలు",
            year: "సంవత్సరం",
            month: "నెల",
            boy: "అబ్బాయి",
            girl: "అమ్మాయి",
            jan: "జనవరి",
            multiLangQuestion: "మీరు ఏ భాష లో కొనసాగించడానికి  ఇష్టపడతారు?",
          }),
          r.translations("kn", {
            respTitle: "ನೀವು ಸಮೀಕ್ಷೆಯನ್ನು ಪ್ರಾರಂಭಿಸುವ ಮೊದಲು, ದಯವಿಟ್ಟು ಉತ್ತರಿಸಿ",
            survey: "ಕೆಳಗಿನ ಪ್ರಶ್ನೆಗಳು",
            year: "ವರ್ಷ",
            month: "ತಿಂಗಳು",
            boy: "ಹುಡುಗ",
            girl: "ಹುಡುಗಿ",
            jan: "ಜನವರಿ",
            multiLangQuestion: "ನಿಮಗೆ ಯಾವ ಭಾಷೆಗಳು ಆರಾಮದಾಯಕವಾಗಿವೆ?",
          }),
          r.translations("ml", {
            respTitle:
              "നിങ്ങൾ സർവേ ആരംഭിക്കുന്നതിന് മുമ്പ്, ദയവായി ഉത്തരം നൽകുക",
            survey: "ചുവടെയുള്ള ചോദ്യങ്ങൾ",
            year: "വര്ഷം",
            month: "മാസം",
            boy: "ആണ്കുട്ടി",
            girl: "പെണ്കുട്ടി",
            jan: "ജാനുവരി",
            multiLangQuestion: "ഏത് ഭാഷകളാണ് നിങ്ങൾക്ക് സൗകര്യപ്രദമായത്?",
          }),
          r.translations("ta", {
            respTitle:
              "நீங்கள் கணக்கெடுப்பைத் தொடங்குவதற்கு முன், தயவுசெய்து பதிலளிக்கவும்",
            survey: "கீழே உள்ள கேள்விகள்",
            year: "ஆண்டு",
            month: "மாதம்",
            boy: "சிறுவன்",
            girl: "பெண்",
            jan: "ஜனவரி",
            multiLangQuestion: "உங்களுக்கு எந்த மொழிகள் வசதியாக இருக்கும்?",
          }),
          r.translations("ht", {
            respTitle: "Anvan ou kòmanse sondaj la, tanpri reponn",
            survey: "kesyon ki anba a",
            year: "Ane",
            month: "Mwa",
            boy: "Ti gason",
            girl: "Ti fi",
            jan: "Janvye",
          }),
          r.preferredLanguage("en");
      },
    ]),
    psApp.run([
      "$rootScope",
      "$location",
      "$state",
      "notify",
      "startSurvey",
      function (n, e, t, r, a) {
        n.globalStartUrl = window.globalStartUrl;
        var i = e.search();
        "spectrumsurveys.com" === e.host() && [4795].includes(i.supplier_id)
          ? t.go("error")
          : "" !== (i = e.url()) &&
            "/" !== i &&
            "/error" !== i &&
            a
              .getBootstrappingData()
              .success(function (e) {
                (n.operatorSettings = e.opertorSettings),
                  (n.defaultIncomeRanges = e.defaultIncomeRanges),
                  (n.ip = e.ip);
              })
              .error(function (e) {
                console.log("err " + JSON.stringify(e)),
                  t.go("error"),
                  r({
                    message: "Error in loading setting",
                    classes: "alert-danger",
                    duration: 2e3,
                  });
              });
      },
    ]),
    function (e, n) {
      if (!e || !n || -1 === e.indexOf("?") || -1 === !n.indexOf("?"))
        return !1;
      function t(e) {
        var n = e.indexOf("?");
        return { base: e.substring(0, n), queryString: e.substring(n + 1) };
      }
      try {
        var r = t(e),
          a = t(n);
        if (r.base !== a.base) return !1;
        var i = new URLSearchParams(r.queryString),
          s = new URLSearchParams(a.queryString),
          o = 0,
          u =
            (i.forEach(function () {
              return o++;
            }),
            0);
        if (
          (s.forEach(function () {
            return u++;
          }),
          o !== u)
        )
          return !1;
        var d,
          l = {},
          c = Array.from(i.keys()).sort(),
          p = _createForOfIteratorHelper(c);
        try {
          for (p.s(); !(d = p.n()).done; ) {
            var f = d.value;
            l[f] = i.getAll(f).sort().join(",");
          }
        } catch (e) {
          p.e(e);
        } finally {
          p.f();
        }
        var m,
          y = {},
          g = Array.from(s.keys()).sort(),
          h = _createForOfIteratorHelper(g);
        try {
          for (h.s(); !(m = h.n()).done; ) {
            var _ = m.value;
            y[_] = s.getAll(_).sort().join(",");
          }
        } catch (e) {
          h.e(e);
        } finally {
          h.f();
        }
        return c.join(",") !== g.join(",")
          ? !1
          : JSON.stringify(l) === JSON.stringify(y);
      } catch (e) {
        return console.error("Error processing URL"), !1;
      }
    }),
  config = config || {},
  countryRegex = {
    US: /^([0-9]{3,5})$/i,
    PR: /^([0-9]{3,5})$/i,
    CA: /^[a-z]\d[a-z]\s?\d[a-z]\d/i,
    UK: /^[0-9A-Z]{2,7}?$/i,
    AU: /^[0-9]{4,4}$/i,
    MX: /^\d{5}$/i,
    BR: /^\d{5}-?\d{3}$/i,
    FR: /^\d{5}$/i,
    IT: /^[0-9]{5,5}$/i,
    ES: /^[0-9]{5,5}$/i,
    DE: /^[0-9]{5,5}$/i,
    NL: /^\d{4} [A-Za-z]{2}$|^\d{4}$/i,
    IN: /^[1-9][0-9]{5}$/i,
    JP: /^\d{3}-?\d{4}$/i,
    SG: /^[0-9]{6}$/i,
    KR: /^[0-9]{5}$/i,
    ID: /^\d{5}$/i,
    PH: /^[0-9]{4}$/i,
    TH: /^[1-9][0-9]{4}$/i,
    VN: /^\d{5}$/i,
    PL: /^[0-9]{2}-[0-9]{3}$/i,
    TR: /^[0-9]{5}$/i,
    CO: /^[0-9]{6}$/i,
    AR: /^(\d{4})$|([A-Z]\d{4}\s?[A-Z]{3})$/i,
    PE: /^[0-9]{5}$/i,
    CL: /^[0-9]{7}$/i,
    SE: /^[0-9]{5}$/i,
  },
  PRIVACY_POLICY_QUAL_ID =
    ((countryRegex.PL = /^\d{2}-?\d{3}$/i),
    (countryRegex.AT = /^[0-9]{4}/i),
    (countryRegex.NZ = /^[0-9]{4}/i),
    (countryRegex.PT = /^\d{4}-?\d{3}$/i),
    (countryRegex.CH = /^[0-9]{4}/i),
    (countryRegex.CN = /^[0-9]{6}$/),
    (countryRegex.AU = /^[0-9]{4}/i),
    (countryRegex.RU = /^[0-9]{6}/i),
    (countryRegex.KR = /^[0-9]{5}/i),
    (countryRegex.CO = /^[0-9]{6}/i),
    (countryRegex.PH = /^[0-9]{4}/i),
    (countryRegex.UA = /^[0-9]{5}$/i),
    (countryRegex.TR = /^[0-9]{5}$/i),
    (countryRegex.EC = /^[0-9]{6}/i),
    (countryRegex.CR = /^\d{5}$/i),
    (countryRegex.BE = /^[0-9]{4}$/i),
    (countryRegex.RO = /^\d{6}$/i),
    (countryRegex.HU = /^[0-9]{4}/i),
    (countryRegex.BG = /^[0-9]{4}$/i),
    (countryRegex.CZ = /^\d{3} ?\d{2}$/i),
    (countryRegex.SK = /^\d{3} ?\d{2}$/i),
    (countryRegex.GR = /^\d{3} ?\d{2}$/i),
    (countryRegex.IL = /^\d{5} ?\d{2}$/i),
    (countryRegex.FI = /^[0-9]{5}$/i),
    (countryRegex.BD = /^[0-9]{4}$/i),
    (countryRegex.PK = /^\d{5}$/i),
    (countryRegex.KW = /^[0-9]{5}$/i),
    (countryRegex.MY = /^[0-9]{5}$/),
    (countryRegex.LB = /^[0-9]{6}$/i),
    (countryRegex.MM = /^\d{7}$/i),
    (countryRegex.KH = /^\d{6}$/i),
    (countryRegex.RS = /^\d{5}$/i),
    (countryRegex.HR = /^\d{5}$/i),
    (countryRegex.SI = /^\d{4}$/i),
    (countryRegex.UZ = /^\d{6}$/i),
    (countryRegex.LT = /^\d{5}$/i),
    (countryRegex.EE = /^\d{5}$/i),
    (countryRegex.LV = /^\d{4}$/i),
    (countryRegex.DZ = /^[0-9]{4,5}/i),
    (countryRegex.KE = /^\d{5}$/i),
    (countryRegex.JO = /^\d{5}$/i),
    (countryRegex.SV = /^\d{4}$/i),
    (countryRegex.GT = /^\d{5}$/i),
    (countryRegex.MZ = /^\d{4}$/i),
    (countryRegex.MA = /^\d{5}$/i),
    (countryRegex.PY = /^\d{4,6}/i),
    (countryRegex.UY = /^\d{5}$/i),
    (countryRegex.HT = /^\d{4}$/i),
    (countryRegex.MD = /^\d{4}$/i),
    (countryRegex.XK = /^\d{5}$/i),
    (countryRegex.GH = /^(?:[A-Z]{2}|[AEG]\d|[A-Z]{3})$/i),
    (countryRegex.MT = /^[A-Z]{3}\d{4}$/i),
    (countryRegex.CY = /^\d{4}$/i),
    (countryRegex.LU = /^\d{4}$/i),
    (countryRegex.GE = /^\d{4}/i),
    (countryRegex.AZ = /^AZ\d{4}$/i),
    (countryRegex.AM = /^\d{4}$/i),
    (countryRegex.NP = /^\d{5}$/i),
    (countryRegex.KG = /^\d{6}$/i),
    (countryRegex.TM = /^\d{6}$/i),
    (countryRegex.BY = /^\d{6}$/i),
    (countryRegex.NO = /^\d{4}$/i),
    (countryRegex.AL = /^\d{4}$/i),
    (countryRegex.VE = /^\d{1,4}$/i),
    (countryRegex.IQ = /^\d{2}$/i),
    (countryRegex.DK = /^\d{4}/i),
    (countryRegex.TW = /^\d{3,6}/i),
    (countryRegex.EG = /^\d{4,5}$|^\d{7}$/i),
    (countryRegex.NG = /^\d{1,6}$/i),
    (countryRegex.SA = /^\d{5}$/i),
    (countryRegex.IE = /^[A-Z]\d[A-Z0-9]$/i),
    (countryRegex.ZA = /^\d{4}$/i),
    (countryRegex.BH = /^\d{3,4}/i),
    (countryRegex.KZ = /^[A-Z]\d[A-Z0-9]$/i),
    99996),
  RECAPTCHA_V3_SITE_KEY = "6LcaISIpAAAAAKGqrLi9p4ozImrcfHyROmnCJpGw",
  QUESTION_CLASS = {
    CORE: 1,
    EXTENDED: 2,
    CUSTOM: 3,
    DEPENDENT: 4,
    DATA_QUALITY: 5,
    SEGMENTATION: 6,
    TRAINING_DATA: 7,
  },
  QUESTION_CATEGORY = {
    CORE: "simple",
    EXTENDED: "advance",
    CUSTOM: "advance",
    DEPENDENT: "dependent",
    DATA_QUALITY: "data_quality",
    SEGMENTATION: "advance",
  },
  childAgeError = {
    en_US: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    es_US: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    en_CA: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    fr_CA: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    en_UK: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    en_AU: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    fr_FR: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    ja_JP: { invalid: "17歳を超えない、子供に有効な年齢を入力してください" },
    en_PH: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    pt_BR: {
      invalid:
        "Por favor, insira uma idade válida para a criança, não superior a 17 anos",
    },
    it_IT: {
      invalid:
        "Inserisci un'età valida per il bambino, non superiore a 17 anni",
    },
    es_MX: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_AR: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_ES: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_CL: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_CO: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    de_DE: {
      invalid:
        "Bitte geben Sie ein gültiges Alter für das Kind ein, von nicht mehr als 17 Jahren",
    },
    en_IN: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    pl_PL: {
      invalid: "Wprowadź ważny wiek dla dziecka, nie przekraczający 17 lat",
    },
    ko_KR: {
      invalid: "17 세를 초과하지 않고 아동의 유효한 연령을 입력하십시오.",
    },
    en_NG: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    id_ID: {
      invalid:
        "Harap masukkan usia yang valid untuk anak, tidak melebihi 17 tahun",
    },
    hi_IN: {
      invalid: "कृपया बच्चे के लिए एक वैध युग दर्ज करें, 17 साल से अधिक नहीं",
    },
    zh_CN: { invalid: "请输入孩子的有效年龄，不超过17岁" },
    uk_UA: {
      invalid:
        "Будь ласка, введіть дійсне вік для дитини, не перевищуючи 17 років",
    },
    en_IE: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    en_HK: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    ms_MY: {
      invalid:
        "Sila masukkan usia yang sah untuk kanak -kanak, tidak melebihi 17 tahun",
    },
    nl_NL: {
      invalid:
        "Voer een geldige leeftijd in voor het kind, niet meer dan 17 jaar",
    },
    nl_BE: {
      invalid:
        "Voer een geldige leeftijd in voor het kind, niet meer dan 17 jaar",
    },
    fr_BE: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    nb_NO: {
      invalid:
        "Vennligst skriv inn en gyldig alder for barnet, ikke over 17 år",
    },
    da_DK: {
      invalid:
        "Indtast venligst en gyldig alder for barnet, der ikke overstiger 17 år",
    },
    en_ZA: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    sv_SE: {
      invalid: "Ange en giltig ålder för barnet, som inte överstiger 17 år",
    },
    tr_TR: {
      invalid: "Lütfen 17 yılı aşmayan çocuk için geçerli bir yaş girin",
    },
    de_AT: {
      invalid:
        "Bitte geben Sie ein gültiges Alter für das Kind ein, von nicht mehr als 17 Jahren",
    },
    de_CH: {
      invalid:
        "Bitte geben Sie ein gültiges Alter für das Kind ein, von nicht mehr als 17 Jahren",
    },
    fr_CH: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    en_SG: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    en_NZ: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    pt_PT: {
      invalid:
        "Por favor, insira uma idade válida para a criança, não superior a 17 anos",
    },
    es_PE: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_EC: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_CR: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    ru_RU: {
      invalid:
        "Пожалуйста, введите действующий возраст для ребенка, не более 17 лет",
    },
    en_RU: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    en_PR: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    es_PR: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    hu_HU: {
      invalid:
        "Kérjük, írjon be érvényes életkorot a gyermek számára, nem haladja meg a 17 évet",
    },
    ro_RO: {
      invalid:
        "Vă rugăm să introduceți o vârstă valabilă pentru copil, care nu depășește 17 ani",
    },
    bg_BG: {
      invalid:
        "Моля, въведете валидна възраст за детето, което не надвишава 17 години",
    },
    cs_CZ: { invalid: "Zadejte platný věk pro dítě, nepřesahující 17 let" },
    sk_SK: { invalid: "Zadejte platný věk pro dítě, nepřesahující 17 let" },
    el_GR: {
      invalid:
        "Εισαγάγετε μια έγκυρη ηλικία για το παιδί, που δεν υπερβαίνει τα 17 χρόνια",
    },
    he_IL: { invalid: "אנא הזן גיל תקף לילד, ולא יעלה על 17 שנים" },
    th_TH: { invalid: "โปรดป้อนอายุที่ถูกต้องสำหรับเด็กไม่เกิน 17 ปี" },
    en_FI: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    fi_FI: { invalid: "Anna lapselle voimassa oleva ikä, enintään 17 vuotta" },
    sv_FI: {
      invalid: "Ange en giltig ålder för barnet, som inte överstiger 17 år",
    },
    "zh-Hant_TW": { invalid: "請輸入孩子的有效年齡，不超過17歲" },
    "zh-Hant_HK": { invalid: "請輸入孩子的有效年齡，不超過17歲" },
    es_SV: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    tl_PH: {
      invalid:
        "Mangyaring magpasok ng isang wastong edad para sa bata, hindi hihigit sa 17 taon",
    },
    ar_DZ: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    ar_MA: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    sw_KE: {
      invalid: "Tafadhali ingiza umri halali kwa mtoto, isiyozidi miaka 17",
    },
    es_GT: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    pt_MZ: {
      invalid:
        "Por favor, insira uma idade válida para a criança, não superior a 17 anos",
    },
    ar_BH: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    ar_JO: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    fr_HT: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    es_PA: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    sq_XK: {
      invalid:
        "Ju lutemi shkruani një moshë të vlefshme për fëmijën, jo më shumë se 17 vjet",
    },
    en_JM: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    fr_CD: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    en_SA: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    es_UY: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_PY: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    la_RS: {
      invalid:
        "Please enter validum aetatis ad puerum, non excedens XVII annorum",
    },
    sr_RS: {
      invalid: "Молимо унесите важеће доба детета, не прелази 17 година",
    },
    en_GH: {
      invalid: "Please enter a valid age for the child, not exceeding 17 years",
    },
    ar_OM: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    rw_RW: {
      invalid: "Nyamuneka andika imyaka yemewe kumwana, utarenze imyaka 17",
    },
    am_ET: { invalid: "እባክዎን ለህፃኑ ዕድሜያቸው ከ 17 ዓመት ያልበለጠ ለህፃኑ ትክክለኛ ዕድሜ ያስገቡ" },
    ro_MD: {
      invalid:
        "Vă rugăm să introduceți o vârstă valabilă pentru copil, care nu depășește 17 ani",
    },
    ar_SD: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    hy_AM: {
      invalid:
        "Խնդրում ենք մուտքագրել վավեր տարիքի երեխայի համար, ոչ թե 17 տարի գերազանցող",
    },
    si_LK: {
      invalid:
        "කරුණාකර අවුරුදු 17 නොඉක්මතය නොඉක්මවන දරුවා සඳහා වලංගු වයසක් ඇතුළත් කරන්න",
    },
    az_AZ: {
      invalid:
        "Xahiş edirəm 17 ildən çox olmayan uşaq üçün etibarlı bir yaş daxil edin",
    },
    ka_GE: {
      invalid:
        "გთხოვთ, შეიტანოთ სწორი ასაკი ბავშვისთვის, არ აღემატება 17 წლის განმავლობაში",
    },
    el_CY: {
      invalid:
        "Εισαγάγετε μια έγκυρη ηλικία για το παιδί, που δεν υπερβαίνει τα 17 έτη",
    },
    mt_MT: {
      invalid:
        "Jekk jogħġbok daħħal età valida għat-tifel, u ma taqbiżx is-17-il sena",
    },
    fr_LU: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    ne_NP: {
      invalid:
        "कृपया बच्चाको लागि वैध उमेर प्रविष्ट गर्नुहोस्, 1 17 बर्ष भन्दा बढी छैन",
    },
    fr_CI: {
      invalid:
        "Veuillez saisir un âge valable pour l'enfant, ne dépassant pas 17 ans",
    },
    ky_KG: {
      invalid:
        "Сураныч, бала үчүн жарактуу куракты киргизиңиз, 17 жаштан ашпаган",
    },
    tg_TJ: {
      invalid:
        "Лутфан синну соли дурусти кӯдакро, ки аз 17-сола зиёд нест, ворид кунед",
    },
    tk_TM: { invalid: "Çaga üçin 17 ýaşdan uly bolmadyk ýaşy giriziň" },
    bn_BD: {
      invalid:
        "অনুগ্রহ করে সন্তানের জন্য একটি বৈধ বয়স লিখুন, 17 বছরের বেশি নয়",
    },
    be_BY: {
      invalid:
        "Калі ласка, увядзіце сапраўдны ўзрост для дзіцяці, не перавышае 17 гадоў",
    },
    ar_SA: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    bn_IN: {
      invalid:
        "অনুগ্রহ করে সন্তানের জন্য একটি বৈধ বয়স লিখুন, 17 বছরের বেশি নয়",
    },
    te_IN: {
      invalid:
        "దయచేసి పిల్లల కోసం చెల్లుబాటు అయ్యే వయస్సును నమోదు చేయండి, 17 సంవత్సరాలు మించకూడదు",
    },
    mr_IN: {
      invalid: "कृपया मुलासाठी वैध वय प्रविष्ट करा, 17 वर्षांपेक्षा जास्त नाही",
    },
    ml_IN: { invalid: "കുട്ടിയുടെ സാധുവായ പ്രായം നൽകുക, 17 വയസ്സിൽ കൂടരുത്" },
    ta_IN: {
      invalid:
        "குழந்தையின் சரியான வயதை உள்ளிடவும், 17 வயதுக்கு மிகாமல் இருக்கவும்",
    },
    kn_IN: {
      invalid:
        "ದಯವಿಟ್ಟು ಮಗುವಿಗೆ ಮಾನ್ಯವಾದ ವಯಸ್ಸನ್ನು ನಮೂದಿಸಿ, 17 ವರ್ಷಗಳನ್ನು ಮೀರಬಾರದು",
    },
    ar_IQ: { invalid: "الرجاء إدخال عمر صالح للطفل ، لا يتجاوز 17 عامًا" },
    pt_AO: {
      invalid:
        "Por favor, insira uma idade válida para a criança, não superior a 17 anos",
    },
    sq_AL: {
      invalid:
        "Ju lutemi shkruani një moshë të vlefshme për fëmijën, jo më shumë se 17 vjet",
    },
    es_BO: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
    es_VE: {
      invalid:
        "Ingrese una edad válida para el niño, no superior a los 17 años",
    },
  };
function _createForOfIteratorHelper(e, n) {
  var t,
    r,
    a,
    i,
    s = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (s)
    return (
      (a = !(r = !0)),
      {
        s: function () {
          s = s.call(e);
        },
        n: function () {
          var e = s.next();
          return (r = e.done), e;
        },
        e: function (e) {
          (a = !0), (t = e);
        },
        f: function () {
          try {
            r || null == s.return || s.return();
          } finally {
            if (a) throw t;
          }
        },
      }
    );
  if (
    Array.isArray(e) ||
    (s = _unsupportedIterableToArray(e)) ||
    (n && e && "number" == typeof e.length)
  )
    return (
      s && (e = s),
      (i = 0),
      {
        s: (n = function () {}),
        n: function () {
          return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
        },
        e: function (e) {
          throw e;
        },
        f: n,
      }
    );
  throw new TypeError(
    "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
function _typeof(e) {
  return (_typeof =
    "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (e) {
          return typeof e;
        }
      : function (e) {
          return e &&
            "function" == typeof Symbol &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        })(e);
}
function _regeneratorRuntime() {
  var a = _regenerator(),
    e = a.m(_regeneratorRuntime),
    n = (Object.getPrototypeOf ? Object.getPrototypeOf(e) : e.__proto__)
      .constructor;
  function i(e) {
    e = "function" == typeof e && e.constructor;
    return (
      !!e && (e === n || "GeneratorFunction" === (e.displayName || e.name))
    );
  }
  var t = { throw: 1, return: 2, break: 3, continue: 3 };
  function s(e) {
    var a, i;
    return function (r) {
      a ||
        ((a = {
          stop: function () {
            return i(r.a, 2);
          },
          catch: function () {
            return r.v;
          },
          abrupt: function (e, n) {
            return i(r.a, t[e], n);
          },
          delegateYield: function (e, n, t) {
            return (a.resultName = n), i(r.d, _regeneratorValues(e), t);
          },
          finish: function (e) {
            return i(r.f, e);
          },
        }),
        (i = function (e, n, t) {
          (r.p = a.prev), (r.n = a.next);
          try {
            return e(n, t);
          } finally {
            a.next = r.n;
          }
        })),
        a.resultName && ((a[a.resultName] = r.v), (a.resultName = void 0)),
        (a.sent = r.v),
        (a.next = r.n);
      try {
        return e.call(this, a);
      } finally {
        (r.p = a.prev), (r.n = a.next);
      }
    };
  }
  return (_regeneratorRuntime = function () {
    return {
      wrap: function (e, n, t, r) {
        return a.w(s(e), n, t, r && r.reverse());
      },
      isGeneratorFunction: i,
      mark: a.m,
      awrap: function (e, n) {
        return new _OverloadYield(e, n);
      },
      AsyncIterator: _regeneratorAsyncIterator,
      async: function (e, n, t, r, a) {
        return (i(n) ? _regeneratorAsyncGen : _regeneratorAsync)(
          s(e),
          n,
          t,
          r,
          a
        );
      },
      keys: _regeneratorKeys,
      values: _regeneratorValues,
    };
  })();
}
function _regeneratorValues(e) {
  if (null != e) {
    var n = e[("function" == typeof Symbol && Symbol.iterator) || "@@iterator"],
      t = 0;
    if (n) return n.call(e);
    if ("function" == typeof e.next) return e;
    if (!isNaN(e.length))
      return {
        next: function () {
          return {
            value: (e = e && t >= e.length ? void 0 : e) && e[t++],
            done: !e,
          };
        },
      };
  }
  throw new TypeError(_typeof(e) + " is not iterable");
}
function _regeneratorKeys(e) {
  var n,
    t = Object(e),
    r = [];
  for (n in t) r.unshift(n);
  return function e() {
    for (; r.length; )
      if ((n = r.pop()) in t) return (e.value = n), (e.done = !1), e;
    return (e.done = !0), e;
  };
}
function _regeneratorAsync(e, n, t, r, a) {
  var i = _regeneratorAsyncGen(e, n, t, r, a);
  return i.next().then(function (e) {
    return e.done ? e.value : i.next();
  });
}
function _regeneratorAsyncGen(e, n, t, r, a) {
  return new _regeneratorAsyncIterator(
    _regenerator().w(e, n, t, r),
    a || Promise
  );
}
function _regeneratorAsyncIterator(o, u) {
  var a;
  this.next ||
    (_regeneratorDefine2(_regeneratorAsyncIterator.prototype),
    _regeneratorDefine2(
      _regeneratorAsyncIterator.prototype,
      ("function" == typeof Symbol && Symbol.asyncIterator) || "@asyncIterator",
      function () {
        return this;
      }
    )),
    _regeneratorDefine2(
      this,
      "_invoke",
      function (t, e, r) {
        function n() {
          return new u(function (e, n) {
            !(function n(e, t, r, a) {
              try {
                var i = o[e](t),
                  s = i.value;
                return s instanceof _OverloadYield
                  ? u.resolve(s.v).then(
                      function (e) {
                        n("next", e, r, a);
                      },
                      function (e) {
                        n("throw", e, r, a);
                      }
                    )
                  : u.resolve(s).then(
                      function (e) {
                        (i.value = e), r(i);
                      },
                      function (e) {
                        return n("throw", e, r, a);
                      }
                    );
              } catch (e) {
                a(e);
              }
            })(t, r, e, n);
          });
        }
        return (a = a ? a.then(n, n) : n());
      },
      !0
    );
}
function _regenerator() {
  var m,
    e = "function" == typeof Symbol ? Symbol : {},
    n = e.iterator || "@@iterator",
    t = e.toStringTag || "@@toStringTag";
  function r(e, n, t, r) {
    var a,
      i,
      s,
      o,
      u,
      d,
      l,
      c,
      p,
      n = n && n.prototype instanceof g ? n : g,
      n = Object.create(n.prototype);
    return (
      _regeneratorDefine2(
        n,
        "_invoke",
        ((a = e),
        (i = t),
        (l = r || []),
        (c = !1),
        (p = {
          p: (d = 0),
          n: 0,
          v: m,
          a: f,
          f: f.bind(m, 4),
          d: function (e, n) {
            return (s = e), (o = 0), (u = m), (p.n = n), y;
          },
        }),
        function (e, n, t) {
          if (1 < d) throw TypeError("Generator is already running");
          for (
            c && 1 === n && f(n, t), o = n, u = t;
            (h = o < 2 ? m : u) || !c;

          ) {
            s ||
              (o
                ? o < 3
                  ? (1 < o && (p.n = -1), f(o, u))
                  : (p.n = u)
                : (p.v = u));
            try {
              if (((d = 2), s)) {
                if ((h = s[(e = o ? e : "next")])) {
                  if (!(h = h.call(s, u)))
                    throw TypeError("iterator result is not an object");
                  if (!h.done) return h;
                  (u = h.value), o < 2 && (o = 0);
                } else
                  1 === o && (h = s.return) && h.call(s),
                    o < 2 &&
                      ((u = TypeError(
                        "The iterator does not provide a '" + e + "' method"
                      )),
                      (o = 1));
                s = m;
              } else if ((h = (c = p.n < 0) ? u : a.call(i, p)) !== y) break;
            } catch (e) {
              (s = m), (o = 1), (u = e);
            } finally {
              d = 1;
            }
          }
          return { value: h, done: c };
        }),
        !0
      ),
      n
    );
    function f(e, n) {
      for (o = e, u = n, h = 0; !c && d && !t && h < l.length; h++) {
        var t,
          r = l[h],
          a = p.p,
          i = r[2];
        3 < e
          ? (t = i === n) &&
            ((o = r[4] || 3),
            (u = r[5] === m ? r[3] : r[5]),
            (r[4] = 3),
            (r[5] = m))
          : r[0] <= a &&
            ((t = e < 2 && a < r[1])
              ? ((o = 0), (p.v = n), (p.n = r[1]))
              : a < i &&
                (t = e < 3 || r[0] > n || i < n) &&
                ((r[4] = e), (r[5] = n), (p.n = i), (o = 0)));
      }
      if (t || 1 < e) return y;
      throw ((c = !0), n);
    }
  }
  var y = {};
  function g() {}
  function a() {}
  function i() {}
  var h = Object.getPrototypeOf,
    e = [][n]
      ? h(h([][n]()))
      : (_regeneratorDefine2((h = {}), n, function () {
          return this;
        }),
        h),
    s = (i.prototype = g.prototype = Object.create(e));
  function o(e) {
    return (
      Object.setPrototypeOf
        ? Object.setPrototypeOf(e, i)
        : ((e.__proto__ = i), _regeneratorDefine2(e, t, "GeneratorFunction")),
      (e.prototype = Object.create(s)),
      e
    );
  }
  return (
    _regeneratorDefine2(s, "constructor", (a.prototype = i)),
    _regeneratorDefine2(i, "constructor", a),
    _regeneratorDefine2(i, t, (a.displayName = "GeneratorFunction")),
    _regeneratorDefine2(s),
    _regeneratorDefine2(s, t, "Generator"),
    _regeneratorDefine2(s, n, function () {
      return this;
    }),
    _regeneratorDefine2(s, "toString", function () {
      return "[object Generator]";
    }),
    (_regenerator = function () {
      return { w: r, m: o };
    })()
  );
}
function _regeneratorDefine2(e, n, t, r) {
  var a = Object.defineProperty;
  try {
    a({}, "", {});
  } catch (e) {
    a = 0;
  }
  (_regeneratorDefine2 = function (e, n, t, r) {
    n
      ? a
        ? a(e, n, { value: t, enumerable: !r, configurable: !r, writable: !r })
        : (e[n] = t)
      : ((r = function (n, t) {
          _regeneratorDefine2(e, n, function (e) {
            return this._invoke(n, t, e);
          });
        })("next", 0),
        r("throw", 1),
        r("return", 2));
  })(e, n, t, r);
}
function _OverloadYield(e, n) {
  (this.v = e), (this.k = n);
}
function asyncGeneratorStep(e, n, t, r, a, i, s) {
  try {
    var o = e[i](s),
      u = o.value;
  } catch (e) {
    return void t(e);
  }
  o.done ? n(u) : Promise.resolve(u).then(r, a);
}
function _asyncToGenerator(o) {
  return function () {
    var e = this,
      s = arguments;
    return new Promise(function (n, t) {
      var r = o.apply(e, s);
      function a(e) {
        asyncGeneratorStep(r, n, t, a, i, "next", e);
      }
      function i(e) {
        asyncGeneratorStep(r, n, t, a, i, "throw", e);
      }
      a(void 0);
    });
  };
}
function ownKeys(n, e) {
  var t,
    r = Object.keys(n);
  return (
    Object.getOwnPropertySymbols &&
      ((t = Object.getOwnPropertySymbols(n)),
      e &&
        (t = t.filter(function (e) {
          return Object.getOwnPropertyDescriptor(n, e).enumerable;
        })),
      r.push.apply(r, t)),
    r
  );
}
function _objectSpread(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = null != arguments[e] ? arguments[e] : {};
    e % 2
      ? ownKeys(Object(t), !0).forEach(function (e) {
          _defineProperty(n, e, t[e]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t))
      : ownKeys(Object(t)).forEach(function (e) {
          Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(t, e));
        });
  }
  return n;
}
function _defineProperty(e, n, t) {
  return (
    (n = _toPropertyKey(n)) in e
      ? Object.defineProperty(e, n, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (e[n] = t),
    e
  );
}
function _toPropertyKey(e) {
  e = _toPrimitive(e, "string");
  return "symbol" == _typeof(e) ? e : e + "";
}
function _toPrimitive(e, n) {
  if ("object" != _typeof(e) || !e) return e;
  var t = e[Symbol.toPrimitive];
  if (void 0 === t) return ("string" === n ? String : Number)(e);
  t = t.call(e, n || "default");
  if ("object" != _typeof(t)) return t;
  throw new TypeError("@@toPrimitive must return a primitive value.");
}
function _typeof(e) {
  return (_typeof =
    "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (e) {
          return typeof e;
        }
      : function (e) {
          return e &&
            "function" == typeof Symbol &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        })(e);
}
function _toConsumableArray(e) {
  return (
    _arrayWithoutHoles(e) ||
    _iterableToArray(e) ||
    _unsupportedIterableToArray(e) ||
    _nonIterableSpread()
  );
}
function _nonIterableSpread() {
  throw new TypeError(
    "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _iterableToArray(e) {
  if (
    ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
    null != e["@@iterator"]
  )
    return Array.from(e);
}
function _arrayWithoutHoles(e) {
  if (Array.isArray(e)) return _arrayLikeToArray(e);
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
function _typeof(e) {
  return (_typeof =
    "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (e) {
          return typeof e;
        }
      : function (e) {
          return e &&
            "function" == typeof Symbol &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        })(e);
}
function _toConsumableArray(e) {
  return (
    _arrayWithoutHoles(e) ||
    _iterableToArray(e) ||
    _unsupportedIterableToArray(e) ||
    _nonIterableSpread()
  );
}
function _nonIterableSpread() {
  throw new TypeError(
    "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _iterableToArray(e) {
  if (
    ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
    null != e["@@iterator"]
  )
    return Array.from(e);
}
function _arrayWithoutHoles(e) {
  if (Array.isArray(e)) return _arrayLikeToArray(e);
}
function _slicedToArray(e, n) {
  return (
    _arrayWithHoles(e) ||
    _iterableToArrayLimit(e, n) ||
    _unsupportedIterableToArray(e, n) ||
    _nonIterableRest()
  );
}
function _nonIterableRest() {
  throw new TypeError(
    "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _iterableToArrayLimit(e, n) {
  var t =
    null == e
      ? null
      : ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (null != t) {
    var r,
      a,
      i,
      s,
      o = [],
      u = !0,
      d = !1;
    try {
      if (((i = (t = t.call(e)).next), 0 === n)) {
        if (Object(t) !== t) return;
        u = !1;
      } else
        for (
          ;
          !(u = (r = i.call(t)).done) && (o.push(r.value), o.length !== n);
          u = !0
        );
    } catch (e) {
      (d = !0), (a = e);
    } finally {
      try {
        if (!u && null != t.return && ((s = t.return()), Object(s) !== s))
          return;
      } finally {
        if (d) throw a;
      }
    }
    return o;
  }
}
function _arrayWithHoles(e) {
  if (Array.isArray(e)) return e;
}
function ownKeys(n, e) {
  var t,
    r = Object.keys(n);
  return (
    Object.getOwnPropertySymbols &&
      ((t = Object.getOwnPropertySymbols(n)),
      e &&
        (t = t.filter(function (e) {
          return Object.getOwnPropertyDescriptor(n, e).enumerable;
        })),
      r.push.apply(r, t)),
    r
  );
}
function _objectSpread(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = null != arguments[e] ? arguments[e] : {};
    e % 2
      ? ownKeys(Object(t), !0).forEach(function (e) {
          _defineProperty(n, e, t[e]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t))
      : ownKeys(Object(t)).forEach(function (e) {
          Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(t, e));
        });
  }
  return n;
}
function _defineProperty(e, n, t) {
  return (
    (n = _toPropertyKey(n)) in e
      ? Object.defineProperty(e, n, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (e[n] = t),
    e
  );
}
function _toPropertyKey(e) {
  e = _toPrimitive(e, "string");
  return "symbol" == _typeof(e) ? e : e + "";
}
function _toPrimitive(e, n) {
  if ("object" != _typeof(e) || !e) return e;
  var t = e[Symbol.toPrimitive];
  if (void 0 === t) return ("string" === n ? String : Number)(e);
  t = t.call(e, n || "default");
  if ("object" != _typeof(t)) return t;
  throw new TypeError("@@toPrimitive must return a primitive value.");
}
function _createForOfIteratorHelper(e, n) {
  var t,
    r,
    a,
    i,
    s = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (s)
    return (
      (a = !(r = !0)),
      {
        s: function () {
          s = s.call(e);
        },
        n: function () {
          var e = s.next();
          return (r = e.done), e;
        },
        e: function (e) {
          (a = !0), (t = e);
        },
        f: function () {
          try {
            r || null == s.return || s.return();
          } finally {
            if (a) throw t;
          }
        },
      }
    );
  if (
    Array.isArray(e) ||
    (s = _unsupportedIterableToArray(e)) ||
    (n && e && "number" == typeof e.length)
  )
    return (
      s && (e = s),
      (i = 0),
      {
        s: (n = function () {}),
        n: function () {
          return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
        },
        e: function (e) {
          throw e;
        },
        f: n,
      }
    );
  throw new TypeError(
    "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
function _createForOfIteratorHelper(e, n) {
  var t,
    r,
    a,
    i,
    s = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (s)
    return (
      (a = !(r = !0)),
      {
        s: function () {
          s = s.call(e);
        },
        n: function () {
          var e = s.next();
          return (r = e.done), e;
        },
        e: function (e) {
          (a = !0), (t = e);
        },
        f: function () {
          try {
            r || null == s.return || s.return();
          } finally {
            if (a) throw t;
          }
        },
      }
    );
  if (
    Array.isArray(e) ||
    (s = _unsupportedIterableToArray(e)) ||
    (n && e && "number" == typeof e.length)
  )
    return (
      s && (e = s),
      (i = 0),
      {
        s: (n = function () {}),
        n: function () {
          return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
        },
        e: function (e) {
          throw e;
        },
        f: n,
      }
    );
  throw new TypeError(
    "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
function _typeof(e) {
  return (_typeof =
    "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (e) {
          return typeof e;
        }
      : function (e) {
          return e &&
            "function" == typeof Symbol &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        })(e);
}
function ownKeys(n, e) {
  var t,
    r = Object.keys(n);
  return (
    Object.getOwnPropertySymbols &&
      ((t = Object.getOwnPropertySymbols(n)),
      e &&
        (t = t.filter(function (e) {
          return Object.getOwnPropertyDescriptor(n, e).enumerable;
        })),
      r.push.apply(r, t)),
    r
  );
}
function _objectSpread(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = null != arguments[e] ? arguments[e] : {};
    e % 2
      ? ownKeys(Object(t), !0).forEach(function (e) {
          _defineProperty(n, e, t[e]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t))
      : ownKeys(Object(t)).forEach(function (e) {
          Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(t, e));
        });
  }
  return n;
}
function _defineProperty(e, n, t) {
  return (
    (n = _toPropertyKey(n)) in e
      ? Object.defineProperty(e, n, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (e[n] = t),
    e
  );
}
function _toPropertyKey(e) {
  e = _toPrimitive(e, "string");
  return "symbol" == _typeof(e) ? e : e + "";
}
function _toPrimitive(e, n) {
  if ("object" != _typeof(e) || !e) return e;
  var t = e[Symbol.toPrimitive];
  if (void 0 === t) return ("string" === n ? String : Number)(e);
  t = t.call(e, n || "default");
  if ("object" != _typeof(t)) return t;
  throw new TypeError("@@toPrimitive must return a primitive value.");
}
function _typeof(e) {
  return (_typeof =
    "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (e) {
          return typeof e;
        }
      : function (e) {
          return e &&
            "function" == typeof Symbol &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        })(e);
}
function ownKeys(n, e) {
  var t,
    r = Object.keys(n);
  return (
    Object.getOwnPropertySymbols &&
      ((t = Object.getOwnPropertySymbols(n)),
      e &&
        (t = t.filter(function (e) {
          return Object.getOwnPropertyDescriptor(n, e).enumerable;
        })),
      r.push.apply(r, t)),
    r
  );
}
function _objectSpread(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = null != arguments[e] ? arguments[e] : {};
    e % 2
      ? ownKeys(Object(t), !0).forEach(function (e) {
          _defineProperty(n, e, t[e]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t))
      : ownKeys(Object(t)).forEach(function (e) {
          Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(t, e));
        });
  }
  return n;
}
function _defineProperty(e, n, t) {
  return (
    (n = _toPropertyKey(n)) in e
      ? Object.defineProperty(e, n, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (e[n] = t),
    e
  );
}
function _toPropertyKey(e) {
  e = _toPrimitive(e, "string");
  return "symbol" == _typeof(e) ? e : e + "";
}
function _toPrimitive(e, n) {
  if ("object" != _typeof(e) || !e) return e;
  var t = e[Symbol.toPrimitive];
  if (void 0 === t) return ("string" === n ? String : Number)(e);
  t = t.call(e, n || "default");
  if ("object" != _typeof(t)) return t;
  throw new TypeError("@@toPrimitive must return a primitive value.");
}
function _slicedToArray(e, n) {
  return (
    _arrayWithHoles(e) ||
    _iterableToArrayLimit(e, n) ||
    _unsupportedIterableToArray(e, n) ||
    _nonIterableRest()
  );
}
function _nonIterableRest() {
  throw new TypeError(
    "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _iterableToArrayLimit(e, n) {
  var t =
    null == e
      ? null
      : ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (null != t) {
    var r,
      a,
      i,
      s,
      o = [],
      u = !0,
      d = !1;
    try {
      if (((i = (t = t.call(e)).next), 0 === n)) {
        if (Object(t) !== t) return;
        u = !1;
      } else
        for (
          ;
          !(u = (r = i.call(t)).done) && (o.push(r.value), o.length !== n);
          u = !0
        );
    } catch (e) {
      (d = !0), (a = e);
    } finally {
      try {
        if (!u && null != t.return && ((s = t.return()), Object(s) !== s))
          return;
      } finally {
        if (d) throw a;
      }
    }
    return o;
  }
}
function _arrayWithHoles(e) {
  if (Array.isArray(e)) return e;
}
function _createForOfIteratorHelper(e, n) {
  var t,
    r,
    a,
    i,
    s = ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
  if (s)
    return (
      (a = !(r = !0)),
      {
        s: function () {
          s = s.call(e);
        },
        n: function () {
          var e = s.next();
          return (r = e.done), e;
        },
        e: function (e) {
          (a = !0), (t = e);
        },
        f: function () {
          try {
            r || null == s.return || s.return();
          } finally {
            if (a) throw t;
          }
        },
      }
    );
  if (
    Array.isArray(e) ||
    (s = _unsupportedIterableToArray(e)) ||
    (n && e && "number" == typeof e.length)
  )
    return (
      s && (e = s),
      (i = 0),
      {
        s: (n = function () {}),
        n: function () {
          return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] };
        },
        e: function (e) {
          throw e;
        },
        f: n,
      }
    );
  throw new TypeError(
    "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _toConsumableArray(e) {
  return (
    _arrayWithoutHoles(e) ||
    _iterableToArray(e) ||
    _unsupportedIterableToArray(e) ||
    _nonIterableSpread()
  );
}
function _nonIterableSpread() {
  throw new TypeError(
    "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
  );
}
function _unsupportedIterableToArray(e, n) {
  var t;
  if (e)
    return "string" == typeof e
      ? _arrayLikeToArray(e, n)
      : "Map" ===
          (t =
            "Object" === (t = {}.toString.call(e).slice(8, -1)) && e.constructor
              ? e.constructor.name
              : t) || "Set" === t
      ? Array.from(e)
      : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
      ? _arrayLikeToArray(e, n)
      : void 0;
}
function _iterableToArray(e) {
  if (
    ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
    null != e["@@iterator"]
  )
    return Array.from(e);
}
function _arrayWithoutHoles(e) {
  if (Array.isArray(e)) return _arrayLikeToArray(e);
}
function _arrayLikeToArray(e, n) {
  (null == n || n > e.length) && (n = e.length);
  for (var t = 0, r = Array(n); t < n; t++) r[t] = e[t];
  return r;
}
(config.development = {
  env: "development",
  app: "pureSpectrumApp-Dev",
  pureSpecturm: { url: "http://localhost:3000" },
  ZAPPI_BASE_URL: "http://localhost:4242",
  ASR_BASE_URL: "http://localhost:4242",
  languageDefault: 1,
  countryDefault: 1,
  BSEC: "a70mx8",
  HONEY_POT_TAG: "HoneyPot",
  countryRegex: countryRegex,
  enableTrueSample: !1,
  PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
  RECAPTCHA_V3_SITE_KEY: "6LfFVy0pAAAAAIkMHeVKpJW1rTxv19So1rMkUPXb",
  MULTI_LANGUAGE_QUAL_CODE: 5463,
  SEL_CLOROX_SEGMENTATION_MP_CODE: 5383,
  PLK_QSR_SEGMENTATION_MP_CODE: 5390,
  JTI_SMOKERS_SEGMENTATION_MP_CODE: 5437,
  sampleChain: {
    url: "https://staging.rtymgt.com/api/v4/respondents",
    publicKey: "4f2cf3f8-057e-4267-a2ae-e0d899568941",
    hours: 24,
  },
  childAgeError: childAgeError,
  DECIPHER_SEG_QUAL_FOR_MAP: [3148, 3973, 4225, 4272, 3178],
  MP_SEG_QUAL_FOR_MAP: [3910, 4209, 4234, 4283, 5390],
}),
  (config.sandbox = {
    env: "sandbox",
    app: "pureSpectrumApp-Sandbox",
    pureSpecturm: { url: "https://api.sandbox.spectrumsurveys.com" },
    ZAPPI_BASE_URL: "https://zappiapistaging.spectrumsurveys.com",
    ASR_BASE_URL: "https://routerapistaging.spectrumsurveys.com",
    languageDefault: 1,
    countryDefault: 1,
    BSEC: "a70mx8",
    HONEY_POT_TAG: "HoneyPot",
    countryRegex: countryRegex,
    enableTrueSample: !1,
    PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
    RECAPTCHA_V3_SITE_KEY: RECAPTCHA_V3_SITE_KEY,
    sampleChain: {
      url: "https://staging.rtymgt.com/api/v4/respondents",
      publicKey: "4f2cf3f8-057e-4267-a2ae-e0d899568941",
      hours: 24,
    },
    childAgeError: childAgeError,
    DECIPHER_SEG_QUAL_FOR_MAP: [3148, 3973, 4225, 4272, 3178],
    MP_SEG_QUAL_FOR_MAP: [3910, 4209, 4234, 4283, 5390],
  }),
  (config.qa = {
    env: "qa",
    app: "pureSpectrumApp-QA",
    pureSpecturm: { url: "https://qa1-api.spectrumsurveys.com" },
    ZAPPI_BASE_URL: "https://zappiapistaging.spectrumsurveys.com",
    ASR_BASE_URL: "https://routerapistaging.spectrumsurveys.com",
    languageDefault: 1,
    countryDefault: 1,
    BSEC: "a70mx8",
    HONEY_POT_TAG: "HoneyPot",
    countryRegex: countryRegex,
    enableTrueSample: !1,
    PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
    RECAPTCHA_V3_SITE_KEY: RECAPTCHA_V3_SITE_KEY,
    MULTI_LANGUAGE_QUAL_CODE: 5463,
    SEL_CLOROX_SEGMENTATION_MP_CODE: 5383,
    PLK_QSR_SEGMENTATION_MP_CODE: 5390,
    JTI_SMOKERS_SEGMENTATION_MP_CODE: 5437,
    sampleChain: {
      url: "https://staging.rtymgt.com/api/v4/respondents",
      publicKey: "4f2cf3f8-057e-4267-a2ae-e0d899568941",
      hours: 24,
    },
    childAgeError: childAgeError,
    DECIPHER_SEG_QUAL_FOR_MAP: [3148, 3973, 4225, 4272, 3178],
    MP_SEG_QUAL_FOR_MAP: [3910, 4209, 4234, 4283, 5390],
  }),
  (config.staging = {
    env: "staging",
    app: "pureSpectrumApp-Staging",
    pureSpecturm: { url: "https://staging.spectrumsurveys.com" },
    ZAPPI_BASE_URL: "https://zappiapistaging.spectrumsurveys.com",
    ASR_BASE_URL: "https://routerapistaging.spectrumsurveys.com",
    languageDefault: 1,
    countryDefault: 1,
    BSEC: "a70mx8",
    HONEY_POT_TAG: "HoneyPot",
    countryRegex: countryRegex,
    enableTrueSample: !1,
    PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
    RECAPTCHA_V3_SITE_KEY: RECAPTCHA_V3_SITE_KEY,
    MULTI_LANGUAGE_QUAL_CODE: 5463,
    SEL_CLOROX_SEGMENTATION_MP_CODE: 5383,
    PLK_QSR_SEGMENTATION_MP_CODE: 5390,
    JTI_SMOKERS_SEGMENTATION_MP_CODE: 5437,
    sampleChain: {
      url: "https://staging.rtymgt.com/api/v4/respondents",
      publicKey: "4f2cf3f8-057e-4267-a2ae-e0d899568941",
      hours: 24,
    },
    childAgeError: childAgeError,
    DECIPHER_SEG_QUAL_FOR_MAP: [3148, 3973, 4225, 4272, 3178],
    MP_SEG_QUAL_FOR_MAP: [3910, 4209, 4234, 4283, 5390],
  }),
  (config.uat = {
    env: "uat",
    app: "pureSpectrumApp-Staging",
    pureSpecturm: { url: "https://uat.spectrumsurveys.com:3000" },
    ZAPPI_BASE_URL: "https://zappiapistaging.spectrumsurveys.com",
    ASR_BASE_URL: "https://routerapistaging.spectrumsurveys.com",
    languageDefault: 1,
    countryDefault: 1,
    BSEC: "a70mx8",
    HONEY_POT_TAG: "HoneyPot",
    countryRegex: countryRegex,
    enableTrueSample: !1,
    PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
    RECAPTCHA_V3_SITE_KEY: RECAPTCHA_V3_SITE_KEY,
    MULTI_LANGUAGE_QUAL_CODE: 5463,
    SEL_CLOROX_SEGMENTATION_MP_CODE: 5383,
    PLK_QSR_SEGMENTATION_MP_CODE: 5390,
    JTI_SMOKERS_SEGMENTATION_MP_CODE: 5437,
    sampleChain: {
      url: "https://staging.rtymgt.com/api/v4/respondents",
      publicKey: "4f2cf3f8-057e-4267-a2ae-e0d899568941",
      hours: 24,
    },
    childAgeError: childAgeError,
    DECIPHER_SEG_QUAL_FOR_MAP: [3148, 3973, 4225, 4272, 3178],
    MP_SEG_QUAL_FOR_MAP: [3910, 4209, 4234, 4283, 5390],
  }),
  (config.production = {
    env: "production",
    app: "pureSpectrumApp-Prod",
    pureSpecturm: { url: "https://spectrumsurveys.com" },
    ZAPPI_BASE_URL: "https://zappiapi.spectrumsurveys.com",
    ASR_BASE_URL: "https://routerapi.spectrumsurveys.com",
    languageDefault: 1,
    countryDefault: 1,
    BSEC: "a70mx8",
    HONEY_POT_TAG: "HoneyPot",
    countryRegex: countryRegex,
    enableTrueSample: !1,
    PRIVACY_POLICY_QUAL_ID: PRIVACY_POLICY_QUAL_ID,
    RECAPTCHA_V3_SITE_KEY: RECAPTCHA_V3_SITE_KEY,
    MULTI_LANGUAGE_QUAL_CODE: 5694,
    SEL_CLOROX_SEGMENTATION_MP_CODE: 5313,
    PLK_QSR_SEGMENTATION_MP_CODE: 5321,
    JTI_SMOKERS_SEGMENTATION_MP_CODE: 5611,
    sampleChain: {
      url: "https://prod.rtymgt.com/api/v4/respondents",
      publicKey: "ad7ee271-f073-4afd-a997-75873c5e886a",
      hours: 24,
    },
    childAgeError: childAgeError,
    DECIPHER_SEG_QUAL_FOR_MAP: [3335, 4334, 4621, 4817, 3396],
    MP_SEG_QUAL_FOR_MAP: [4282, 4656, 4674, 4896, 5321],
  }),
  angular.module("pureSpectrumApp").factory("config", function () {
    var e =
      0 === (e = window.document.URL).indexOf("http://127.0.0.1") ||
      0 === e.indexOf("http://localhost") ||
      0 === e.indexOf("http://dev.spectrumsurveys.com")
        ? "development"
        : 0 === e.indexOf("http://api.sandbox.spectrumsurveys.com") ||
          0 === e.indexOf("https://api.sandbox.spectrumsurveys.com")
        ? "sandbox"
        : 0 === e.indexOf("https://qa")
        ? "qa"
        : 0 === e.indexOf("http://staging.spectrumsurveys.com") ||
          0 === e.indexOf("https://staging.spectrumsurveys.com")
        ? "staging"
        : 0 === e.indexOf("http://uat.spectrumsurveys.com") ||
          0 === e.indexOf("https://uat.spectrumsurveys.com")
        ? "uat"
        : 0 === e.indexOf("https://spectrumsurveys.com") ||
          0 === e.indexOf("http://spectrumsurveys.com")
        ? "production"
        : void 0;
    if (e) return window.config[e];
    throw new Error("failed to detect application env");
  }),
  angular.module("pureSpectrumApp").service("captchaService", [
    "$http",
    "config",
    function (t, e) {
      var r = e.pureSpecturm.url;
      this.getCaptcha = function (e) {
        var n = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
        return t.get(
          ""
            .concat(r, "/transactions/")
            .concat(e, "/ps-captcha?refresh=")
            .concat(n)
        );
      };
    },
  ]),
  angular.module("pureSpectrumApp").factory("createSurvey", [
    "$http",
    "config",
    "$window",
    "localStorageService",
    function (i, e, n, t) {
      var r = t.get("logedInUser"),
        s = e.pureSpecturm.url;
      return {
        getSurveyData: function () {
          return i.get(s + "/survey/" + r.cmp);
        },
        getSurveyById: function (e) {
          var n = e.surveyNum,
            e = this.serialize(e);
          return i.get(s + "/surveyById/" + n + "?q=respondent&" + e);
        },
        answerByUser: function (e) {
          return i.post(s + "/respondentProfile", e);
        },
        getSurveyTid: function (e) {
          var n = e.tid,
            e = this.serialize(e);
          return i.get(s + "/survey/tid/" + n + "?q=respondent&" + e);
        },
        saveTraffic: function (e) {
          return i.post(s + "/survey/traffic", e);
        },
        validateZipcode: function (e, n, t) {
          return i.get(s + "/zipcode/validate/" + e + "/" + n + "?lang=" + t);
        },
        saveRespondantData: function (e) {
          return i.post(s + "/respondentProfile/saveData", e);
        },
        getScreenerByID: function (e, n, t, r, a) {
          return i.get(
            s +
              "/v1/pss_screener/getScreener/" +
              e +
              "/" +
              t +
              "?PSID=" +
              n +
              "&token=" +
              r +
              "&ps_redirect_test=" +
              a
          );
        },
        getAnswerByqualificationId: function (e, n) {
          return i.post(
            s + "/v1/pss_screener/getAnswerByQualification/" + n,
            e
          );
        },
        serialize: function (e) {
          var n,
            t = [];
          for (n in e)
            e.hasOwnProperty(n) &&
              t.push(encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
          return t.join("&");
        },
      };
    },
  ]),
  angular.module("pureSpectrumApp").service("clipboardDetector", [
    "$http",
    "config",
    function (a, i) {
      function r(e, n, t) {
        var e = e.target.closest("type-input-dir"),
          r = i.pureSpecturm.url,
          n = {
            method: n,
            qualId: e ? e.getAttribute("qualificationid") : null,
            data: t,
          };
        a.put("".concat(r, "/transactions/").concat(s, "/data-quality"), {
          clipboardItem: n,
          isClipboardDetected: !0,
        });
      }
      var s = null;
      (this.setTransactionId = function (e) {
        s = e;
      }),
        (this.detect = function () {
          document.addEventListener("paste", function (e) {
            var n = e.clipboardData,
              t = (t = n.getData("text/plain")) || n.getData("text");
            r(e, "paste", t);
          }),
            document.addEventListener("copy", function (e) {
              var n = window.getSelection().toString();
              r(e, "copy", n);
            }),
            document.addEventListener("cut", function (e) {
              var n = window.getSelection().toString();
              r(e, "cut", n);
            });
        });
    },
  ]),
  angular.module("pureSpectrumApp").service("tabActivityDetector", [
    "$http",
    "config",
    function (e, n) {
      var t = null,
        r = 0,
        a = 0,
        i = !1;
      (this.setTransactionId = function (e) {
        (t = e), (r || a) && this.updateTransaction();
      }),
        (this.updateTransaction = function () {
          t &&
            e.put(
              ""
                .concat(n.pureSpecturm.url, "/transactions/")
                .concat(t, "/data-quality"),
              {
                lostFocusCount: r,
                lostVisibilityCount: a,
                isTabActivityDetected: !0,
                isPopupClicked: i,
              }
            );
        }),
        (this.detect = function () {
          var e = this;
          window.addEventListener("visibilitychange", function () {
            "hidden" === document.visibilityState &&
              (a++, e.updateTransaction());
          }),
            window.addEventListener("blur", function () {
              r++, e.updateTransaction();
            });
        }),
        (this.updatePopupActivity = function () {
          (i = !0), this.updateTransaction(i);
        }),
        (this.isPopupClicked = function () {
          return i;
        });
    },
  ]),
  angular.module("pureSpectrumApp").service("translationServiceDetector", [
    "$http",
    "config",
    "$window",
    function (l, c, p) {
      var f = !1,
        m = null;
      (this.setTransactionId = function (e) {
        m = e;
      }),
        (this.detect = function () {
          var e = document.querySelector("html"),
            n = document.getElementsByTagName("title")[0],
            t = new MutationObserver(function (e) {
              e.forEach(function (e) {
                var n, t;
                "attributes" === e.type &&
                  ((n =
                    "class" === e.attributeName &&
                    ("translate" == e.target.className.substring(0, 9) ||
                      e.target.className.includes("translated"))),
                  (t =
                    "_msthash" === e.attributeName ||
                    "_msttexthash" === e.attributeName),
                  (e = "lang" === e.attributeName),
                  (f = f || n || t || e));
              });
            }),
            r = new MutationObserver(function (e) {
              if (f && m) {
                var n,
                  t = [],
                  r = 0,
                  a = _createForOfIteratorHelper(e);
                try {
                  for (a.s(); !(n = a.n()).done; ) {
                    var i = n.value;
                    if ("characterData" !== i.type)
                      console.warn(
                        "mutation type is not characterData",
                        i.type
                      );
                    else {
                      var s = i.oldValue,
                        o = i.target.data,
                        u = -1 < o.indexOf("{{") && -1 < o.indexOf("}}");
                      if (!u && s !== o && (t.push(o), 256 <= (r += o.length)))
                        break;
                    }
                  }
                } catch (e) {
                  a.e(e);
                } finally {
                  a.f();
                }
                var d,
                  e = t.join(" ");
                4 < e.length &&
                  ((f = !1),
                  p.hj && p.hj("event", "fraud-language-translated-session"),
                  (d = c.pureSpecturm.url),
                  l.patch("".concat(d, "/transactions/").concat(m), [
                    {
                      path: "/isTranslationServiceDetected",
                      op: "replace",
                      value: !0,
                      phrase: e,
                    },
                  ]));
              }
            });
          r.observe(e, {
            characterData: !0,
            characterDataOldValue: !0,
            subtree: !0,
          }),
            r.observe(n, {
              characterData: !0,
              characterDataOldValue: !0,
              subtree: !0,
            }),
            t.observe(e, { attributes: !0 }),
            t.observe(n, { attributes: !0 });
        });
    },
  ]),
  angular.module("pureSpectrumApp").factory("microSurveyService", [
    "$http",
    "config",
    function (r, e) {
      var a = e.pureSpecturm.url;
      return {
        getQuestions: function (e) {
          return r.get(a + "/micro-survey/v1/transactions/" + e + "/questions");
        },
        saveAnswers: function (e, n) {
          return r.post(
            a + "/micro-survey/v1/transactions/" + e + "/answers",
            n
          );
        },
        saveConsent: function (e, n, t) {
          return r.post(a + "/micro-survey/v1/transactions/" + e + "/consent", {
            qualificationId: n,
            selectedOptionId: t,
          });
        },
      };
    },
  ]),
  angular.module("pureSpectrumApp").factory("sampleChainService", [
    "$http",
    "config",
    "$window",
    function (d, e, r) {
      function l(e) {
        return (e = "".concat(t, "/getHash").concat(e)), d.get(e, y);
      }
      function c() {
        var e =
            0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "",
          n =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "",
          t =
            2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "";
        return "?sn_ud="
          .concat(e, "&sy_nr=")
          .concat(n, "&coordinates=1&postcode=1")
          .concat(t, "&usage_type=1&csipqs=1");
      }
      function p(e) {
        var n =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
          e = "".concat(t, "/transactions/").concat(e, "/log");
        d.post(e, n);
      }
      var f = e.sampleChain.url,
        t = e.pureSpecturm.url,
        m = e.sampleChain.publicKey,
        n = e.sampleChain.hours,
        y = { withCredentials: !0, timeout: 5e3 };
      return {
        search: function (u, t, n) {
          return new Promise(function (s, o) {
            var e = "";
            n && ((n = "UK" === n ? "GB" : n), (e = "&rt_cy_ce=".concat(n))),
              setTimeout(function () {
                var a;
                try {
                  a = r.researchDefenderParams();
                } catch (e) {
                  newrelic.noticeError(new Error("RD script was not loaded")),
                    (a = "");
                }
                ("undefined" !== a && a && "" !== a.trim()) || (a = "");
                var n = c(u, t, e),
                  i = "".concat(n).concat(a ? "&pass_params=".concat(a) : "");
                l(i)
                  .then(function (e) {
                    var t, r;
                    e && e.data
                      ? ((t = e.data.hash),
                        (r = ""
                          .concat(f, "/search/")
                          .concat(m)
                          .concat(n, "&validation=")
                          .concat(t)
                          .concat(a ? "&".concat(a) : "")),
                        d.get(r, y).then(
                          function (e) {
                            s(e);
                          },
                          function (e) {
                            var n = {
                              transId: u,
                              url: r,
                              dataToHash: i,
                              hash: t,
                              pass_params: a,
                              message: e.data ? e.data.message : e,
                            };
                            p(u, n), o(e);
                          }
                        ))
                      : o();
                  })
                  .catch(function (e) {
                    o(e);
                  });
              }, 100);
          });
        },
        activity: function () {
          var e = "".concat(f, "/activity/").concat(m, "?range=").concat(n);
          return d.get(e, y);
        },
      };
    },
  ]),
  angular.module("pureSpectrumApp").factory("startSurvey", [
    "$http",
    "config",
    function (i, e) {
      var s = e.pureSpecturm.url;
      return {
        security: function (e) {
          return i.post(s + "/transactions/" + e.transId, e);
        },
        createTransaction: function (e) {
          return i.post(s + "/transactions", e);
        },
        saveDeviceToTrackDetails: function (e, n) {
          return i.put(
            "".concat(s, "/transactions/").concat(e, "/track-details"),
            n
          );
        },
        validateZipcode: function (e, n, t) {
          return i.get(s + "/zipcode/validate/" + e + "/" + n + "?lang=" + t);
        },
        saveRespondentData: function (e, n) {
          return i.post(s + "/transactions/" + e + "/saveData", n);
        },
        saveRespondentProfile: function (e, n) {
          return i.post(s + "/transactions/" + e + "/saveProfile", n);
        },
        nextStatus: function (e, n) {
          return i.get(
            s + "/transactions/" + e + "/nextStatus?screener=0&trackId=" + n
          );
        },
        getBootstrappingData: function () {
          return i.get(s + "/v1/pss_screener/bootstrapping_data?from=screener");
        },
        updateLastQuestionDetails: function (e, n, t, r, a) {
          return i.put(s + "/transactions/" + e, {
            qualificationId: n,
            lastQuestionTitle: t,
            lastQuestionDP: r,
            isLastQuestionUpdate: a,
          });
        },
        getPrivacyPolicy: function (e) {
          return i.get(s + "/v1/pss_screener/getPrivacyPolicyText/" + e);
        },
        savePSIDV3PlusResponse: function (e, n) {
          return i.put(
            "".concat(s, "/transactions/").concat(e, "/psidv3plus"),
            n
          );
        },
        researchDefenderHashing: function (e) {
          return i.post(s + "/research-defender-hashing", e);
        },
        recaptchaTokenVerify: function (e, n) {
          return i.post(
            "".concat(s, "/transactions/").concat(e, "/recaptcha-token-verify"),
            n
          );
        },
      };
    },
  ]),
  angular.module("pureSpectrumApp").factory("VerisoulService", [
    "$http",
    "config",
    function (t, e) {
      var r = e.pureSpecturm.url;
      function n() {
        return (n = _asyncToGenerator(
          _regeneratorRuntime().mark(function e() {
            var n;
            return _regeneratorRuntime().wrap(
              function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (window.Verisoul) {
                        e.next = 3;
                        break;
                      }
                      return (
                        console.log(
                          "Verisoul not found. Please make sure you have included the Verisoul script in your index.html file."
                        ),
                        e.abrupt("return")
                      );
                    case 3:
                      return (
                        (e.prev = 3), (e.next = 6), window.Verisoul.session()
                      );
                    case 6:
                      return (
                        (n = e.sent),
                        (n = n.session_id),
                        console.log("Session ID: ", n),
                        e.abrupt("return", n)
                      );
                    case 12:
                      (e.prev = 12),
                        (e.t0 = e.catch(3)),
                        console.log("Error getting session ID: ", e.t0);
                    case 15:
                    case "end":
                      return e.stop();
                  }
              },
              e,
              null,
              [[3, 12]]
            );
          })
        )).apply(this, arguments);
      }
      function a() {
        return (a = _asyncToGenerator(
          _regeneratorRuntime().mark(function e(n, t, r, a) {
            return _regeneratorRuntime().wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    if (t) {
                      e.next = 2;
                      break;
                    }
                    return e.abrupt("return");
                  case 2:
                    s(n, {
                      session_id: t,
                      ps_supplier_respondent_id: r,
                      duration: a,
                    })
                      .success(function (e) {
                        console.log("Authentication successful", e);
                      })
                      .error(function (e) {
                        console.log("Authentication failed", e);
                      });
                  case 3:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function i() {
        return (i = _asyncToGenerator(
          _regeneratorRuntime().mark(function e() {
            return _regeneratorRuntime().wrap(
              function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (window.Verisoul) {
                        e.next = 3;
                        break;
                      }
                      return (
                        console.log(
                          "Verisoul not found. Please make sure you have included the Verisoul script in your index.html file."
                        ),
                        e.abrupt("return")
                      );
                    case 3:
                      return (
                        (e.prev = 3),
                        (e.next = 6),
                        window.Verisoul.reinitialize()
                      );
                    case 6:
                      e.next = 11;
                      break;
                    case 8:
                      (e.prev = 8),
                        (e.t0 = e.catch(3)),
                        console.log("Error logging out: ", e.t0);
                    case 11:
                    case "end":
                      return e.stop();
                  }
              },
              e,
              null,
              [[3, 8]]
            );
          })
        )).apply(this, arguments);
      }
      var s = function (e, n) {
        return t.post(
          ""
            .concat(r, "/transactions/")
            .concat(e, "/authenticate-verisoul-session"),
          n
        );
      };
      return {
        getSessionId: function () {
          return n.apply(this, arguments);
        },
        authenticateSessionId: function (e, n, t, r) {
          return a.apply(this, arguments);
        },
        handleLogout: function () {
          return i.apply(this, arguments);
        },
      };
    },
  ]),
  angular
    .module("pureSpectrumApp")
    .controller("errorCtrl", [
      "$scope",
      "$timeout",
      "notify",
      "$stateParams",
      "$rootScope",
      function (e, n, t, r, a) {},
    ]),
  angular.module("pureSpectrumApp").controller("microSurveyCtrl", [
    "$scope",
    "$timeout",
    "notify",
    "startSurvey",
    "localStorageService",
    "$state",
    "$location",
    "$rootScope",
    "$filter",
    "$window",
    "$translate",
    "config",
    "$uibModal",
    "$sce",
    "deviceDetector",
    "tabActivityDetector",
    "captchaService",
    "ngDragDrop",
    "microSurveyService",
    function (w, y, S, t, n, r, e, i, g, a, L, h, s, o, u, d, l, c, p) {
      function v() {
        -1 ===
          _.findIndex(
            w.questionsToShow,
            w.respondentQuestions[w.isDependent.masterIndex]
          ) &&
          w.questionsToShow.push(
            w.respondentQuestions[w.isDependent.masterIndex]
          );
      }
      function f(e) {
        return e ? e.split("&").sort() : [];
      }
      (w.loader = { show: !0 }),
        (w.container = { show: !1 }),
        (w.queryParams = e.search()),
        (w.queryParams.browser = {
          name: u.browser,
          version: u.browser_version,
        }),
        (w.respondentQuestions = []),
        (w.questionsToShow = []),
        (w.timeName = "SCREENER_RENDER"),
        (w.timeNameLoadScripts = "LOAD_SCRIPTS"),
        (w.timeNamePSIDv3Plus = "LOAD_SCRIPTS_PSIDV3Plus"),
        (w.timeNameCreateTransaction = "CreateTransaction"),
        (w.timeNameGetScreener = "PSID_RESPONSE+GET_QUESTIONS"),
        (w.timeNameRelevantId = "RelevantId_Service"),
        (w.timeNameRelevantIdScript = "RelevantId_Script_Load"),
        (w.timeNameFifityOneDegreesScripts = "DeviceDetection_Script_Load"),
        (w.QuestionTypeOpenEnded = "openended"),
        (w.wordCountMoreThan = 5),
        (w.isWCModalShown = !1),
        (w.allowedLanguage = "en"),
        (w.resetDragDropCounter = 0),
        (w.consentRedirect = !1),
        (w.styles = {
          draggables: {
            onDragging: { border: "1px dashed #666", cursor: "move" },
            onStart: { opacity: 0.5 },
          },
          droppables: {
            onEnter: { background: "#9bddaa" },
            onLeave: { background: "#fefa76" },
          },
        }),
        (w.dragCallback = function (e) {}),
        (w.dropCallback = function (e) {
          var n = c.getCurrentDragElement(),
            e = angular.element(e.target),
            n =
              (n.css({ opacity: 1 }),
              e.append(n),
              e.children()[0].getAttribute("element_id"));
          angular.element("#drop_" + n).click();
        }),
        (w.overCallback = function (e) {});
      var m,
        e = n.get("startUrl"),
        I =
          (e
            ? ((u = e.split("?")[1]),
              (m = a.url.split("?")[1]),
              (u = (function (e, n) {
                if (e.length !== n.length) return !1;
                for (var t = 0; t < e.length; t++) if (e[t] !== n[t]) return !1;
                return !0;
              })(f(u), f(m))),
              (w.queryParams.startSurvey = u ? e : a.url))
            : (w.queryParams.startSurvey = a.url),
          n.set("startUrl", w.queryParams.startSurvey),
          w.queryParams.bgsec &&
            w.queryParams.bgsec !== h.BSEC &&
            delete w.queryParams.bgsec,
          w.queryParams.bsec &&
            w.queryParams.bsec !== h.BSEC &&
            delete w.queryParams.bsec,
          console.time(w.timeName),
          (w.relevantInProgress = 0),
          (w.psidV3PlusProgress = 0),
          (w.securityInProgress = 0),
          (w.respondentProfile = { targetV2: {}, internal: !1 }),
          (w.traffic = { adv: {} }),
          (w.localisation = "en_US"),
          (w.ppLocalization = "eng_US"),
          (w.uploadRespondent = { answers: {} }),
          (w.nextBtn = { show: !1, clicked: !1 }),
          (w.userObj = {}),
          (w.isDependent = {
            quantity: 0,
            masterIndex: 0,
            dependentIndex: 0,
            avail: !1,
            checkForDependent: !0,
            lastDependentAnswered: !1,
            answered: 0,
          }),
          (w.validFields = { zipcode: !0 }),
          (w.emptyF = function () {}),
          (w.firstZipCode = !0),
          (w.apicallRespondent = !1),
          new Date().getFullYear()),
        b =
          ((w.birthYears = Array(I - 1900)
            .fill()
            .map(function (e, n) {
              return I - n;
            })),
          (w.childsNumArr = Array(17)
            .fill()
            .map(function (e, n) {
              return n + 1;
            })),
          {}),
        A = [];
      function P(e) {
        w.nextBtn.show = e;
      }
      console.log("🚀 ~ $scope.queryParams:", w.queryParams),
        p
          .getQuestions(w.queryParams.transaction_id)
          .success(function (e) {
            e.screenerDetails &&
              ((e = e.screenerDetails),
              console.timeEnd(w.timeName),
              e.hasOwnProperty("isNonGDPRPPQuestionImport") &&
                ((w.isNonGDPRPPQuestionImport = e.isNonGDPRPPQuestionImport),
                (w.isPPFooterEnabled = !0),
                t
                  .getPrivacyPolicy(w.ppLocalization)
                  .success(function (e) {
                    e.privacy_policy &&
                      (w.privacyPolicyQuestion = e.privacy_policy);
                  })
                  .error(function (e) {
                    console.log("error while fetching privacy policy", e);
                  })),
              e.hasOwnProperty("isDQEnable") && (w.isDQEnable = e.isDQEnable),
              w.respondentQuestions.length && (w.questionsToShow = []),
              (w.respondentQuestions = e.questions.map(function (e) {
                return (
                  218 === e.qualification_id &&
                    e.dependent.forEach(function (e) {
                      e &&
                        e.dependency &&
                        !e.dependency.condition.includes(116) &&
                        e.dependency.condition.push(116);
                    }),
                  (e.isHidden = !0),
                  (e.isAnswered = !1),
                  (e.answerObj = {
                    question_id: e.data.question_id,
                    qualification_id: e.qualification_id,
                    userAnswer: "",
                  }),
                  e
                );
              })),
              (w.respondentQuestions = g("orderBy")(
                w.respondentQuestions,
                "data.question_order_number",
                !1
              )),
              (w.respondentQuestions[0].isHidden = !1),
              (w.respondentQuestions[0].primaryIndex = 0),
              w.respondentQuestions[0].isShow
                ? (_.contains(
                    w.respondentQuestions[0].question_tags,
                    h.HONEY_POT_TAG
                  )
                    ? ((w.respondentQuestions[0].hpHide = !0),
                      w.questionsToShow.push(w.respondentQuestions[0]),
                      1 < w.respondentQuestions.length &&
                        ((w.isDependent.masterIndex =
                          w.isDependent.masterIndex + 1),
                        (w.respondentQuestions[
                          w.isDependent.masterIndex
                        ].isHidden = !1),
                        (w.respondentQuestions[
                          w.isDependent.masterIndex
                        ].primaryIndex = 1),
                        w.questionsToShow.push(
                          w.respondentQuestions[w.isDependent.masterIndex]
                        )))
                    : w.questionsToShow.push(w.respondentQuestions[0]),
                  (w.isDependent.avail
                    ? (w.queryParams.transaction_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex]
                        .qualification_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex].data
                        .question_title,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex])
                    : (w.queryParams.transaction_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .qualification_id,
                      w.respondentQuestions[w.isDependent.masterIndex].data
                        .question_title,
                      w.respondentQuestions[w.isDependent.masterIndex])
                  ).dp)
                : ((e = ""),
                  "singlepunch" ===
                    w.respondentQuestions[0].data.question_type &&
                    (e = w.respondentQuestions[0].userAnswer.value),
                  w.onChangeInput(
                    e,
                    w.respondentQuestions[0].userAnswer.value,
                    0,
                    w.respondentQuestions[0].qualification_id,
                    "0_" +
                      w.respondentQuestions[0].qualification_id +
                      "_" +
                      w.respondentQuestions[0].data.question_type,
                    0 +
                      w.respondentQuestions[0].primaryIndex +
                      0 +
                      "_" +
                      w.respondentQuestions[0].qualification_id,
                    0,
                    !0
                  )),
              (w.loader = { show: !1 }),
              (w.container = { show: !0 }),
              (w.queryParams.locale = "US"));
          })
          .error(function (e) {
            console.log("error while fetching micro survey questions 1", e),
              (i.errorMessage = e.message || e.msg),
              r.go("error");
          }),
        (w.setQuesWidth = function (r) {
          y(function () {
            var e, n, t;
            (r =
              r ||
              w.questionsToShow[w.questionsToShow.length - 1].qualification_id),
              document.getElementsByClassName("answerid-" + r)[0] &&
                document.getElementsByClassName("selectid-" + r)[0] &&
                ((e = document.getElementsByClassName("answerid-" + r)[0]),
                (n = document.getElementsByClassName("selectid-" + r)[0]),
                e.options && e.options.length
                  ? (t = e.options[e.selectedIndex].text)
                  : e.value && (t = e.value),
                (n.innerHTML = t),
                (e.style.width = parseInt(n.offsetWidth) + 20 + "px"));
          }, 100);
        }),
        (w.resetScreenerIndex = function (e, n, t, r) {
          (t = parseInt(t, 10)),
            ((!r &&
              0 < w.questionsToShow.length &&
              t + 1 != w.questionsToShow.length) ||
              "" === w.questionsToShow[t].userAnswer) &&
              ((w.nextBtn.show = !1),
              (w.editQuestion = !1),
              w.questionsToShow[t].isDependent
                ? (dependentEdited = !0)
                : (w.questionsToShow.splice(t + 1, w.questionsToShow.length),
                  (w.isDependent.quantity = 0),
                  (w.isDependent.masterIndex = n),
                  (w.isDependent.dependentIndex = 0),
                  (w.isDependent.avail = !1),
                  (w.isDependent.checkForDependent = !0),
                  (w.isDependent.lastDependentAnswered = !0),
                  (w.isDependent.answered = 0),
                  (A = [])));
        }),
        (w.formatInput = function (e, n) {
          var t = n.qualification_class,
            r = n.qualification_type,
            a = n.question_type;
          if (
            "range" === n.question_type ||
            ((void 0 === t ? null : t) == QUESTION_CLASS.SEGMENTATION &&
              (void 0 === r ? null : r) == QUESTION_CATEGORY.SEGMENTATION &&
              "input" == (void 0 === a ? null : a))
          )
            return (
              (47 < (n = e.which || e.keyCode) && n < 58) ||
              (95 < n && n < 106) ||
              8 == n ||
              9 == n ||
              (e.preventDefault(), !1)
            );
        }),
        (w.onChangeInput = function (s, o, u, e, n, t, d, l, r, c, a) {
          if (
            c === w.QuestionTypeOpenEnded &&
            w.questionsToShow[d].data.question_type ===
              w.QuestionTypeOpenEnded &&
            r &&
            r.split("_")[0] === w.allowedLanguage &&
            o
              .replace(/[0-9&*{}[\]=\-()\.+,;'/]/g, "")
              .replace(/\s+/g, " ")
              .trim()
              .split(" ").length < w.wordCountMoreThan &&
            !w.isWCModalShown
          )
            return w.wordCountModal(), (w.isWCModalShown = !0);
          w.questionsToShow &&
            w.questionsToShow[d] &&
            w.questionsToShow[d].answerObj &&
            (w.questionsToShow[d].answerObj.userAnswer = o),
            "" === o || null == o
              ? (console.log("button disabled"), P(!1))
              : (w.nextButtonDis = !1),
            235 != e ||
              document.getElementById("answerid-234").getAttribute("itemval") ||
              (document
                .getElementById("answerid-234")
                .setAttribute("itemval", "January"),
              (document.getElementById("answerid-234").innerHTML =
                g("translate")("jan")),
              document.getElementsByClassName("answerid-234")[0] &&
                (document
                  .getElementsByClassName("answerid-234")[0]
                  .setAttribute("itemval", "January"),
                (document.getElementsByClassName("answerid-234")[0].value = 0),
                w.setQuesWidth("234"))),
            document.getElementsByClassName("answerid-" + e)[0] &&
              w.setQuesWidth(e);
          var p,
            n = (function (e, r, a) {
              var n = !0,
                i = {};
              {
                var s;
                -1 !== e.indexOf("-") &&
                  ((e = e.split("-")),
                  (s = !0),
                  e.forEach(function (e) {
                    var e = e.split("_"),
                      n = e[2],
                      t = e[1],
                      e = "ans" + e[0] + r + a + "_" + t,
                      n =
                        "input" === n
                          ? document.getElementById(e).value
                          : document
                              .getElementById(e)
                              .firstChild.getAttribute("itemval");
                    !s || (null != n && "" !== n) || (s = !1),
                      null != n && "" !== n && (i[t] = n);
                  }),
                  (n = s));
              }
              return { isAllAttempted: n, answerObj: i };
            })(n, u, d);
          if (!n.isAllAttempted) return !0;
          var f = !1,
            m = !1;
          w.questionsToShow[d].isDependent ||
          w.isDependent.avail ||
          220 === parseInt(e) ||
          230 === parseInt(e) ||
          221 === parseInt(e)
            ? ((p = b.qualification_id), (f = !0))
            : ((f = !1),
              (p = w.respondentQuestions[parseInt(u)].qualification_id)),
            (w.editQuestion = !1),
            !l &&
              0 < w.questionsToShow.length &&
              d + 1 !== w.questionsToShow.length &&
              ((w.nextBtn.show = !1),
              (w.editQuestion = !1),
              (p = w.questionsToShow[d].qualification_id),
              (f = w.questionsToShow[d].isDependent)
                ? (m = !0)
                : (w.questionsToShow.splice(d + 1, w.questionsToShow.length),
                  (w.isDependent.quantity = 0),
                  (w.isDependent.masterIndex = u),
                  (w.isDependent.dependentIndex = 0),
                  (w.isDependent.avail = !1),
                  (w.isDependent.checkForDependent = !0),
                  (w.isDependent.lastDependentAnswered = !0),
                  (w.isDependent.answered = 0),
                  (A = []))),
            T(s, p, o, n.answerObj, l, r, u, c, a, function (e) {
              if (e) {
                if (w.isDependent.avail && !m)
                  if ((w.isDependent.quantity--, 0 < w.isDependent.quantity))
                    w.isDependent.dependentIndex++;
                  else if (A.length && w.isDependent.answered + 1 < A.length) {
                    for (var n = {}, t = 0; t < A.length - 1; t++) {
                      var r = A[t],
                        a = A[t + 1];
                      n[r.qualification_id] = a.dependentIndex;
                    }
                    n[p]
                      ? (w.isDependent.answered = n[p])
                      : w.isDependent.answered++,
                      w.isDependent.dependentIndex++,
                      (b =
                        w.respondentQuestions[w.isDependent.masterIndex]
                          .dependent[w.isDependent.answered]),
                      (w.isDependent.quantity = b.dependency.repeat);
                  } else
                    (w.isDependent.avail = !1),
                      (w.isDependent.checkForDependent = !0),
                      (w.isDependent.lastDependentAnswered = !0),
                      (w.isDependent.quantity = 0),
                      (w.isDependent.answered = 0),
                      (A = []);
                var i;
                w.isDependent.checkForDependent &&
                !f &&
                w.respondentQuestions[w.isDependent.masterIndex].isShow &&
                w.respondentQuestions[w.isDependent.masterIndex].dependent &&
                0 <
                  w.respondentQuestions[w.isDependent.masterIndex].dependent
                    .length
                  ? ((i = s),
                    _.each(
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent,
                      function (e, n) {
                        var t, r;
                        e.dependency &&
                          e.dependency.hasOwnProperty("matchCriteria") &&
                          ((t = !1),
                          "multipunch" === c && _.isArray(o)
                            ? ((r = _.pluck(o, "id")),
                              "in" == e.dependency.matchCriteria
                                ? _.intersection(
                                    e.dependency.condition.map(Number),
                                    r
                                  ).length && (t = !0)
                                : "nin" == e.dependency.matchCriteria &&
                                  _.difference(
                                    r,
                                    e.dependency.condition.map(Number)
                                  ).length &&
                                  (t = !0))
                            : (("in" == e.dependency.matchCriteria &&
                                -1 !=
                                  e.dependency.condition
                                    .map(Number)
                                    .indexOf(i)) ||
                                ("nin" == e.dependency.matchCriteria &&
                                  -1 ==
                                    e.dependency.condition
                                      .map(Number)
                                      .indexOf(i)) ||
                                ("bt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.min <= parseInt(o) &&
                                  e.dependency.condition.max >= parseInt(o)) ||
                                ("gt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.min < parseInt(o)) ||
                                ("lt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.max > parseInt(o)) ||
                                ("eq" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.min == parseInt(o) &&
                                  e.dependency.condition.max == parseInt(o))) &&
                              (t = !0),
                          t) &&
                          ("input" == e.dependency.repeat
                            ? (((r = angular.copy(e)).dependency.repeat =
                                parseInt(o) || 1),
                              A.push(r))
                            : ((e.dependentIndex = n), A.push(e)));
                      }
                    ),
                    A.length
                      ? (w.nextBtn.show && (w.nextBtn.show = !1),
                        (w.isDependent.avail = !0),
                        (w.isDependent.checkForDependent = !1),
                        (w.isDependent.lastDependentAnswered = !1),
                        (w.isDependent.quantity =
                          parseInt(A[0].dependency.repeat) || 1),
                        (w.isDependent.masterIndex = u),
                        (w.isDependent.dependentIndex = 0),
                        (w.isDependent.answered = 0),
                        (b = A[0]))
                      : console.log("dependent available but quantity is 0"))
                  : console.log(
                      "dependent check skipped or no dependent questions"
                    ),
                  parseInt(w.isDependent.masterIndex) + 1 <
                    w.respondentQuestions.length || w.isDependent.avail
                    ? (w.isDependent.lastDependentAnswered
                        ? (!l &&
                            0 < w.questionsToShow.length &&
                            1 !== w.questionsToShow.length &&
                            (d + 1 !== w.questionsToShow.length ||
                              w.isDependent.masterIndex ===
                                w.questionsToShow.length)) ||
                          w.isDependent.masterIndex++
                        : console.log("don't increase master index"),
                      w.isDependent.avail
                        ? m ||
                          ((b.isHidden = !1),
                          (b.primaryIndex = w.isDependent.dependentIndex),
                          y(function () {
                            w.questionsToShow.push(b);
                          }, 0))
                        : (w.isDependent.lastDependentAnswered
                            ? ((w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].isHidden = !1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].primaryIndex = w.isDependent.masterIndex))
                            : (!l && 0 < w.questionsToShow.length
                                ? 1 === w.questionsToShow.length
                                  ? w.isDependent.masterIndex++
                                  : d + 1 !== w.questionsToShow.length
                                  ? w.questionsToShow[d].qualification_id
                                  : (w.isDependent.masterIndex =
                                      w.isDependent.masterIndex + 1)
                                : (w.isDependent.masterIndex =
                                    w.isDependent.masterIndex + 1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].isHidden = !1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].primaryIndex = parseInt(u) + 1)),
                          w.respondentQuestions[w.isDependent.masterIndex]
                            .isShow &&
                            _.contains(
                              w.respondentQuestions[w.isDependent.masterIndex]
                                .question_tags,
                              h.HONEY_POT_TAG
                            ) &&
                            ((w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].hpHide = !0),
                            v(),
                            (w.isDependent.masterIndex =
                              w.isDependent.masterIndex + 1),
                            (w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].isHidden = !1),
                            (w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].primaryIndex = parseInt(u) + 2)),
                          w.respondentQuestions[w.isDependent.masterIndex]
                            .isShow
                            ? y(function () {
                                v();
                              }, 0)
                            : ((e = ""),
                              "singlepunch" ===
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .data.question_type &&
                                (e =
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].userAnswer.value),
                              w.onChangeInput(
                                e,
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .userAnswer.value,
                                w.isDependent.masterIndex,
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .qualification_id,
                                w.isDependent.masterIndex +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].qualification_id +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].data.question_type,
                                w.isDependent.masterIndex +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].primaryIndex +
                                  w.isDependent.masterIndex +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].qualification_id,
                                w.isDependent.masterIndex,
                                !0
                              ))))
                    : P(!0),
                  (w.isDependent.avail
                    ? (w.queryParams.transaction_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex]
                        .qualification_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex].data
                        .question_title,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent[w.isDependent.dependentIndex])
                    : (w.queryParams.transaction_id,
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .qualification_id,
                      w.respondentQuestions[w.isDependent.masterIndex].data
                        .question_title,
                      w.respondentQuestions[w.isDependent.masterIndex])
                  ).dp;
              } else console.log("error validating qualification " + p);
            });
        }),
        (w.makeMeDisabled = function () {
          (w.nextButtonDis = !0), (w.loader = { show: !0 });
        }),
        (w.privacyModal = function () {
          var e;
          (w.ok = function () {
            e.close(w.result);
          }),
            (w.cancel = function () {
              e.dismiss("cancel");
            }),
            (w.privacyPolicy = o.trustAsHtml(
              w.privacyPolicyQuestion.modal_text
            )),
            (e = s.open({
              templateUrl: "privacypolicymodal.html",
              size: "lg",
              scope: w,
            })).result.then(
              function (e) {
                w.result = e;
              },
              function () {
                console.log("this is the modal dismissed");
              }
            );
        }),
        (w.nextClicked = function () {
          a.hj && a.hj("tagRecording", ["clickedNext"]),
            (w.nextBtn.clicked = !0),
            (w.respondentProfile.exitBefore = !1),
            n.remove("LS_" + w.queryParams.transaction_id),
            j(w.respondentProfile),
            (a.onbeforeunload = w.emptyF);
        }),
        (w.onExit = function () {
          w.questionsToShow[w.questionsToShow.length - 1] &&
            !w.consentRedirect &&
            ((w.respondentProfile.exitBefore = !0),
            j(w.respondentProfile),
            (a.onbeforeunload = w.emptyF));
        }),
        (a.onbeforeunload = w.onExit),
        (a.securityNotStarted = function () {
          0 === w.securityInProgress &&
            (w.queryParams.rvidDeviceId ||
              ((w.queryParams.rvidSource = "timeout"),
              (w.queryParams.rvidDeviceId = new Date().getTime().toString())),
            checkSecurity());
        }),
        (w.wordCountModal = function () {
          var e;
          (w.ok = function () {
            e.close(d.updatePopupActivity());
          }),
            (w.cancel = function () {}),
            (e = s.open({
              templateUrl: "wordcountmodal.html",
              size: "md",
              scope: w,
            }));
        }),
        (w.captchaSvg = function () {
          return l.getCaptcha(
            w.queryParams.transaction_id,
            0 < arguments.length && void 0 !== arguments[0] && arguments[0]
          );
        });
      var T = function (e, n, t, r, a, i, s, o, u, d) {
          console.log("🚀 ~ validateQuestion ~ qualification_id:", n),
            console.log("🚀 ~ validateQuestion ~ data:", t),
            console.log("🚀 ~ validateQuestion ~ selectedId:", e),
            210 === n
              ? q(w.queryParams.transaction_id, n, e, function (e) {
                  return d(e);
                })
              : 229 === n
              ? Q(n, t, null == u ? void 0 : u.isAllowMultiRegex, function (e) {
                  return d(e);
                })
              : 214 === n
              ? E(n, t, e, function (e) {
                  return d(e);
                })
              : 211 === n
              ? C(n, t, e, function (e) {
                  return d(e);
                })
              : 212 === n
              ? a
                ? N(n, t, function (e) {
                    return d(e);
                  })
                : ((w.userObj.bornmonth = r[234]),
                  (w.userObj.bornyear = r[235]),
                  M(n, w.userObj.bornmonth, w.userObj.bornyear, function (e) {
                    return d(e);
                  }))
              : 217 === n
              ? U(n, t, e, function (e) {
                  return d(e);
                })
              : 218 === n
              ? G(n, t, e, function (e) {
                  return d(e);
                })
              : 213 === n
              ? V(n, t, i, function (e) {
                  return d(e);
                })
              : 215 === n
              ? B(n, t, e, function (e) {
                  return d(e);
                })
              : 216 === n
              ? $(n, t, e, function (e) {
                  return d(e);
                })
              : 230 === n || 220 === n || 221 === n
              ? D(r, i, function (e) {
                  return (
                    e && ((w.userObj.kids[s] = r), R(w.userObj.kids)), d(e)
                  );
                })
              : 244 === n
              ? K(n, t, e, function (e) {
                  return d(e);
                })
              : 245 === n
              ? H(n, t, e, function (e) {
                  return d(e);
                })
              : z(n, t, e, o, u, function (e) {
                  return d(e);
                });
        },
        D = function (e, n, t) {
          var r = !0;
          return (
            "Year" === e[221] && 17 < parseInt(e[230]) && (r = !1),
            (r = "Month" === e[221] && 215 < parseInt(e[230]) ? !1 : r) ||
              (S.closeAll(),
              S({ message: x(n), classes: "alert-danger", duration: 15e3 })),
            t(r)
          );
        },
        x = function (e) {
          e = e.replace(/GB/g, "UK");
          return (
            h.childAgeError[e].invalid ||
            "Please enter a valid age for the child, not exceeding 17 years."
          );
        },
        q = function (e, n, t, r) {
          p.saveConsent(e, n, t)
            .success(function (e) {
              if ((S.closeAll(), !e.url)) return r(!0);
              (w.consentRedirect = !0), (a.location.href = e.url);
            })
            .error(function (e, n) {
              return (
                console.log("microSurveyService.saveConsent 🚀 ~ err:", e),
                P(!1),
                S.closeAll(),
                S({
                  message: e.message,
                  classes: "alert-danger",
                  duration: 2e3,
                }),
                r(!1)
              );
            });
        },
        Q = function (r, a) {
          var i,
            e =
              !(2 < arguments.length && void 0 !== arguments[2]) ||
              arguments[2],
            s = 3 < arguments.length ? arguments[3] : void 0,
            n =
              (console.log(
                "🚀 ~ zipcodeValidate ~ qualification_id:",
                r,
                w.queryParams.locale
              ),
              h.countryRegex[w.queryParams.locale]);
          if ((P(!1), !n || (!n.test(a) && !0 === w.firstZipCode)))
            return (
              (w.validFields.zipcode = !1),
              console.log(
                "🚀 ~ zipcodeValidate ~ $scope.validFields.zipcode:",
                w.validFields.zipcode
              ),
              s(!1)
            );
          ((5 <= a.length && "EG" !== w.queryParams.locale) ||
            (-1 !==
              [
                "FR",
                "AT",
                "NZ",
                "CH",
                "AU",
                "PH",
                "AR",
                "BE",
                "BG",
                "HU",
                "BD",
                "NL",
                "SI",
                "LV",
                "KE",
                "SV",
                "MZ",
                "PY",
                "HT",
                "MD",
                "CY",
                "LU",
                "BY",
                "AL",
                "VE",
                "NG",
                "SA",
                "ZA",
                "NO",
                "AM",
                "GE",
                "DK",
              ].indexOf(w.queryParams.locale) &&
              4 <= a.length) ||
            (-1 !== ["UK", "GH", "IQ"].indexOf(w.queryParams.locale) &&
              2 <= a.length) ||
            (-1 !== ["IE", "BH", "KZ"].indexOf(w.queryParams.locale) &&
              3 <= a.length) ||
            ("EG" === w.queryParams.locale && [4, 5, 7].includes(a.length)) ||
            O(w.queryParams.locale, a.length, e)) &&
            ((n = a.replace(/[\W_-]/g, "")),
            (i = n),
            "CA" === w.queryParams.locale && (n = a.substr(0, 3).toUpperCase()),
            ("UK" !== w.queryParams.locale &&
              "GH" !== w.queryParams.locale &&
              "MT" !== w.queryParams.locale &&
              "AZ" !== w.queryParams.locale) ||
              (n = a.toUpperCase()),
            ("AR" !== w.queryParams.locale &&
              "cz" !== w.queryParams.locale &&
              "SK" !== w.queryParams.locale &&
              "GR" !== w.queryParams.locale) ||
              (n = a.toUpperCase().replace(" ", "")),
            "BR" === w.queryParams.locale && (n = a.replace("-", "")),
            ("IL" !== w.queryParams.locale && "AM" !== w.queryParams.locale) ||
              (n = a.replace(" ", "")),
            t
              .validateZipcode(n, w.queryParams.locale, w.queryParams.langCode)
              .success(function (e) {
                var n, t;
                return (
                  (w.firstZipCode = !1),
                  S.closeAll(),
                  "Failure" === e.apiStatus
                    ? (console.log("🚀 ~ data.apiStatus:", e.apiStatus),
                      S({
                        message: e.message,
                        classes: "alert-danger",
                        duration: 1e3,
                      }),
                      (w.validFields.zipcode = !1),
                      P(!1),
                      s(!1))
                    : ((w.validFields.zipcode = !0),
                      (w.traffic.zipcode = i),
                      k(r, i, "value"),
                      (t = a.toString().toUpperCase()),
                      "UK" == w.queryParams.locale &&
                        (n = t.match(
                          /^[a-zA-Z0-9]{2,3}([A-Z0-9](?=\s*[a-zA-Z0-9]{3}|$))?/
                        )) &&
                        (n.shift(), (t = n.join(" "))),
                      (w.uploadRespondent.answers[r] = t.toString()),
                      w.queryParams.ps_redirect_test,
                      "US" === w.queryParams.locale &&
                        (-1 <
                          (n = w.respondentQuestions.findIndex(function (e) {
                            return (
                              e.qualification_id === h.PRIVACY_POLICY_QUAL_ID
                            );
                          })) && !e.ppQuestionShow
                          ? ((w.ppQuestionIndex = n),
                            (w.ppQuestion = w.respondentQuestions.splice(n, 1)),
                            (w.isPPFooterEnabled = !1),
                            --w.maxQuestions)
                          : n < 0 &&
                            w.ppQuestion &&
                            e.ppQuestionShow &&
                            ((t = w.respondentQuestions).splice.apply(
                              t,
                              [w.ppQuestionIndex, 0].concat(
                                _toConsumableArray(w.ppQuestion)
                              )
                            ),
                            (w.isPPFooterEnabled = !0),
                            (w.maxQuestions += 1))),
                      s(!0))
                );
              })
              .error(function (e, n) {
                if ("Failure" === n.apiStatus)
                  return (
                    (w.firstZipCode = !1),
                    (w.validFields.zipcode = !1),
                    P(!1),
                    S.closeAll(),
                    S({
                      message: n.message,
                      classes: "alert-danger",
                      duration: 1e3,
                    }),
                    console.log("🚀 ~  data.message:", n.message),
                    s(!1)
                  );
              }));
        },
        O = function (e, n, t) {
          return "TW" === e && ((!t && 6 === n) || (t && 3 <= n));
        },
        E = function (e, n, t, r) {
          return (
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.race = n),
            (w.traffic.race_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        C = function (e, n, t, r) {
          return (
            (w.userObj.gender = n),
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.gender = n),
            (w.traffic.gender_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        N = function (e, n, t) {
          return (
            k(e, parseInt(n), "value"),
            (w.traffic.age = n),
            w.queryParams.ps_redirect_test,
            t(!0)
          );
        },
        M = function (e, n, t, r) {
          var a = t,
            n = new Date(n + ", 1 2016").getMonth() + 1,
            a = (function (e, n) {
              var e = new Date(e, n - 1),
                n = new Date();
              if (!(n < e))
                return (
                  (n = Math.floor((n - e) / 864e5)),
                  (e = Math.floor(n / 365)),
                  (n = Math.floor((n % 365) / 31)),
                  parseInt((12 * e + n) / 12)
                );
            })(a, n);
          return (
            k(e, parseInt(a), "value"),
            (w.uploadRespondent.answers[e + "_yeardob"] = t.toString()),
            (w.uploadRespondent.answers[e + "_monthdob"] = n.toString()),
            (w.uploadRespondent.answers[e + "_daydob"] = "15"),
            (w.traffic.age = a),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        };
      var U = function (e, n, t, r) {
          return (
            (w.userObj.relationship = n),
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.relationship = n),
            (w.traffic.relationship_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        G = function (e, n, t, r) {
          return (
            (w.traffic.children_code = t = 112 < t ? 112 : t),
            (w.traffic.children = n),
            (w.traffic.children_code = t),
            (w.traffic.kids = w.userObj.kids),
            k(e, parseInt(t), "id"),
            (w.userObj.kids = []),
            R(w.userObj.kids),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        R = function (e) {
          Array.isArray(e) && e.length
            ? ((w.respondentProfile.targetV2[230] = { data: [] }),
              (w.respondentProfile.targetV2[220] = { data: [] }))
            : (delete w.respondentProfile.targetV2[230],
              delete w.respondentProfile.targetV2[220]),
            (w.traffic.kids = e),
            angular.forEach(e, function (e) {
              var n = parseInt(e[230]),
                n =
                  (e[221] == g("translate")("year") &&
                    (n = 12 * parseInt(e[230])),
                  w.respondentProfile.targetV2[230].data.push({
                    value: n.toString(),
                  }),
                  112);
              "Boy" === e[220] && (n = 111),
                w.respondentProfile.targetV2[220].data.push({ id: n });
            }),
            w.queryParams.ps_redirect_test;
        },
        V = function (e, n, t, r) {
          var a = /^([0-9]{1,6})$/i,
            t = t.split("_");
          return (
            i.defaultIncomeRanges[t[1]].max &&
              ((t = i.defaultIncomeRanges[t[1]].max.toString().length),
              (a = new RegExp("^([0-9]{1,".concat(t, "})$"), "i"))),
            k(e, parseInt(n), "value"),
            (w.traffic.income = parseInt(n)),
            a.test(parseInt(n))
              ? (w.queryParams.ps_redirect_test, r(!0))
              : (S({
                  message: "invalid income",
                  classes: "alert-warning",
                  duration: 1e3,
                }),
                r(!1))
          );
        },
        B = function (e, n, t, r) {
          return (
            (w.userObj.employment = n),
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.employment = n),
            (w.traffic.employment_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        $ = function (e, n, t, r) {
          return (
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.userObj.education = n),
            (w.traffic.education = n),
            (w.traffic.education_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        K = function (e, n, t, r) {
          return (
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.raceBera = n),
            (w.traffic.raceBera_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        H = function (e, n, t, r) {
          return (
            k(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.hispanicBera = n),
            (w.traffic.hispanicBera_code = t),
            w.queryParams.ps_redirect_test,
            r(!0)
          );
        },
        z = function (e, n, t, r, a, i) {
          var s = _.findWhere(w.questionsToShow, { qualification_id: e }),
            o = !1,
            u = !1,
            d = !1,
            l = null,
            c = [],
            p =
              (s && s.dp && (o = !0),
              s.isDependent &&
                ((u = !0),
                (l = s.dependency.parentQualId),
                (c = s.dependency.valid_option)),
              s.isSegmentation && ((d = !0), (l = s.segmentation.parentQualId)),
              []);
          if ("multipunch" === r && Array.isArray(n))
            n = n.filter(function (e) {
              return (
                e.id && p.push(e.id),
                delete e.excluding_qualification_optons,
                delete e.ticked,
                e
              );
            });
          else if ("singlepunch" === r && t)
            (n = [{ id: parseInt(t), text: n }]), p.push(parseInt(t));
          else if ("openended" == r) n = [{ value: n }];
          else if ("input" === r) {
            var a = a.data,
              a = void 0 === a ? {} : a,
              f = a.qualification_class,
              f = void 0 === f ? null : f,
              m = a.qualification_type,
              m = void 0 === m ? null : m,
              a = a.format,
              a = void 0 === a ? {} : a,
              y = a.min,
              y = void 0 === y ? 0 : y,
              g = a.max,
              g = void 0 === g ? 99999 : g,
              h = a.minlength,
              h = void 0 === h ? 1 : h,
              v = a.maxlength,
              v = void 0 === v ? 5 : v,
              I = a.regex,
              I = void 0 === I ? null : I;
            if (
              ((n = parseInt(n)),
              501 === s.data.units && (isNaN(n) || n < 1 || 99 < n))
            )
              return P(!1), i(!1);
            if (
              f == QUESTION_CLASS.SEGMENTATION &&
              "object" == _typeof(a) &&
              m == QUESTION_CATEGORY.SEGMENTATION
            ) {
              var b,
                f = n.length < h || n.length > v || n < y || g < n,
                a = !0;
              if ((I && (a = (b = new RegExp(b)).test(n)), f || !a))
                return (
                  S({
                    message: "invalid value",
                    classes: "alert-danger",
                    duration: 1e3,
                  }),
                  P(!1),
                  i(!1)
                );
            }
            n = [{ value: n }];
          } else
            "dragdrop" === r &&
              ((n = [{ value: t, opt: s.data.answers[e].ans_opt }]),
              p.push(parseInt(t)));
          return Object.keys(n).length
            ? ((w.respondentProfile.targetV2[e] = {
                data: n,
                screener: { dp: o, selectedAnswers: p },
                dependent: { isDependent: u, parentQualId: l, valid_option: c },
                segmentation: { isSegmentation: d, parentQualId: l },
              }),
              (w.traffic.adv[e] = n),
              w.queryParams.ps_redirect_test,
              i(!0))
            : i(!1);
        },
        k = function (n, e, t) {
          var r = w.questionsToShow.find(function (e) {
              return e.qualification_id === n;
            }),
            r = !(!r || !r.dp);
          (w.respondentProfile.targetV2[n] = {
            data: [{}],
            screener: { dp: r, selectedAnswers: [e] },
          }),
            (w.respondentProfile.targetV2[n].data[0][t] = [e]);
        };
      function j(e) {
        w.isNonGDPRPPQuestionImport &&
          (e &&
            e.targetV2 &&
            (e.targetV2["".concat(h.PRIVACY_POLICY_QUAL_ID)] = {
              data: [{ id: 111, text: "I agree" }],
            }),
          e) &&
          e.traffic &&
          (e.traffic["".concat(h.PRIVACY_POLICY_QUAL_ID)] = [
            { id: 111, text: "I agree" },
          ]),
          w.apicallRespondent ||
            ((e.traffic = w.traffic),
            (e.country_code = w.queryParams.locale),
            w.queryParams.bsec && (e.bsec = w.queryParams.bsec),
            w.queryParams.bgsec && (e.bgsec = w.queryParams.bgsec),
            w.queryParams.ps_redirect_test &&
              ((e.language_code = w.queryParams.langCode),
              (e.ps_redirect_test = w.queryParams.ps_redirect_test)),
            (w.apicallRespondant = !0),
            (e.uploadRespondent = w.uploadRespondent),
            (e = (function (e) {
              var n = JSON.parse(JSON.stringify(e)),
                t = n.targetV2,
                r =
                  (r = w.questionsToShow.find(function (e) {
                    return 218 === e.qualification_id;
                  })) && r.isChildGenderAge;
              if (!Object.keys(t).includes((218).toString()) || !r) return e;
              if (
                ((r = t[218].data[0].id), (e = t[218]), (t[232] = e), 111 == r)
              )
                var a = [purespectrumLibrary.Child.createNoChildren()];
              else {
                if (!t[220]) return (t[232] = { data: [] }), delete t[218], n;
                var i = t[220].data.map(function (e) {
                    return e.id;
                  }),
                  s = [],
                  o = t[230].data.map(function (e) {
                    (e = e.value), (e = Number(e));
                    return 0 === e
                      ? (s.push(312), 1)
                      : e % 12 == 0
                      ? (s.push(311), e / 12)
                      : e < 48
                      ? (s.push(312), e)
                      : (s.push(311), Math.floor(e / 12));
                  });
                a = Array.from(new Array(o.length)).map(function (e, n) {
                  var t = o[n],
                    r = 312 === s[n],
                    n = 111 == i[n];
                  return (r && 47 < t) || (!r && 17 < t)
                    ? { code: null }
                    : purespectrumLibrary.Child.create(r, n, t);
                });
              }
              return (
                (r = a.map(function (e) {
                  return e.code;
                })),
                (e.screener = _objectSpread(
                  _objectSpread({}, e.screener),
                  {},
                  { selectedAnswers: r }
                )),
                (e.data = r.map(function (e) {
                  return { id: e };
                })),
                delete t[218],
                delete t[220],
                delete t[230],
                n
              );
            })(e)),
            n.set("transId", null),
            p
              .saveAnswers(w.queryParams.transaction_id, e)
              .success(function (e) {
                var n, t;
                e.url &&
                  ((a.location.href = e.url),
                  (n = e.url),
                  ((t = document.createElement("a")).href = n),
                  (n = t.host),
                  (t = window.location.host),
                  (e = -1 !== e.url.indexOf("start-survey")),
                  n === t) &&
                  e &&
                  window.location.reload(!0);
              })
              .error(function (e) {
                console.log(e),
                  S({
                    message: e.message,
                    classes: "alert-danger",
                    duration: 2e3,
                  }),
                  (i.errorMessage = e.message),
                  r.go("error");
              }));
      }
      w.open = function (e) {
        var n,
          t = w.$new();
        (t.ok = function () {
          n.close(t.selected);
        }),
          (t.cancel = function () {
            n.dismiss("cancel");
          }),
          (n = $modal.open({
            template: "<my-modal></my-modal>",
            size: e,
            scope: t,
          })).result.then(
            function (e) {
              w.selected = e;
            },
            function () {
              console.log("modal dismissed");
            }
          );
      };
    },
  ]),
  angular.module("pureSpectrumApp").controller("startSurveyCtrl", [
    "$scope",
    "$timeout",
    "notify",
    "startSurvey",
    "segmentationService",
    "localStorageService",
    "$state",
    "$location",
    "$rootScope",
    "$filter",
    "$window",
    "$translate",
    "config",
    "$uibModal",
    "$sce",
    "deviceDetector",
    "sampleChainService",
    "translationServiceDetector",
    "clipboardDetector",
    "tabActivityDetector",
    "captchaService",
    "ngDragDrop",
    "VerisoulService",
    function (
      w,
      y,
      S,
      u,
      a,
      d,
      o,
      L,
      l,
      i,
      s,
      c,
      g,
      n,
      N,
      e,
      M,
      r,
      p,
      f,
      U,
      G,
      m
    ) {
      (w.loader = { show: !0 }),
        (w.container = { show: !1 }),
        (w.queryParams = L.search()),
        (w.queryParams.browser = {
          name: e.browser,
          version: e.browser_version,
        }),
        (w.timeName = "SCREENER_RENDER"),
        (w.timeNameLoadScripts = "LOAD_SCRIPTS"),
        (w.timeNamePSIDv3Plus = "LOAD_SCRIPTS_PSIDV3Plus"),
        (w.timeNameCreateTransaction = "CreateTransaction"),
        (w.timeNameGetScreener = "PSID_RESPONSE+GET_QUESTIONS"),
        (w.timeNameRelevantId = "RelevantId_Service"),
        (w.timeNameRelevantIdScript = "RelevantId_Script_Load");
      var V = "eng_US";
      function h(e) {
        var n,
          e = 0 < arguments.length && void 0 !== e ? e : null;
        -1 ===
          _.findIndex(
            w.questionsToShow,
            w.respondentQuestions[w.isDependent.masterIndex]
          ) &&
          ((n = w.respondentQuestions[w.isDependent.masterIndex]),
          w.respondentQuestions[w.isDependent.masterIndex].qualification_id ===
            g.MULTI_LANGUAGE_QUAL_CODE &&
            e &&
            (c.use(e),
            (n.data.question_text =
              null == (e = n.data)
                ? void 0
                : e.question_text.replace(
                    /^.*?(?=%%)/,
                    i("translate")("multiLangQuestion")
                  ))),
          w.questionsToShow.push(n));
      }
      e.isDesktop() &&
        (function () {
          var e = window.innerWidth,
            n = window.innerHeight,
            e = e < 600 || e < n,
            n = screen.width < 500 || screen.width < screen.height;
          return e || n;
        })() &&
        s.hj &&
        s.hj("event", "fraud-desktop-session"),
        (w.QuestionTypeOpenEnded = "openended"),
        (w.wordCountMoreThan = 5),
        (w.isWCModalShown = !1),
        (w.allowedLanguage = "en"),
        (w.currentQualification = null),
        (w.resetDragDropCounter = 0),
        (w.styles = {
          draggables: {
            onDragging: { border: "1px dashed #666", cursor: "move" },
            onStart: { opacity: 0.5 },
          },
          droppables: {
            onEnter: { background: "#9bddaa" },
            onLeave: { background: "#fefa76" },
          },
        }),
        (w.dragCallback = function (e) {}),
        (w.dropCallback = function (e) {
          var n = G.getCurrentDragElement(),
            e = angular.element(e.target),
            n =
              (n.css({ opacity: 1 }),
              e.append(n),
              e.children()[0].getAttribute("element_id"));
          angular.element("#drop_" + n).click();
        }),
        (w.overCallback = function (e) {}),
        l.globalStartUrl
          ? (w.queryParams.startSurvey = l.globalStartUrl)
          : (console.error("Error retrieving URL"),
            (w.queryParams.startSurvey = s.url)),
        w.queryParams.bgsec &&
          w.queryParams.bgsec !== g.BSEC &&
          delete w.queryParams.bgsec,
        w.queryParams.bsec &&
          w.queryParams.bsec !== g.BSEC &&
          delete w.queryParams.bsec,
        console.time(w.timeName);
      var v,
        I = !1,
        b = !1;
      l.$watch("operatorSettings", function (e, n) {
        var t;
        l.operatorSettings &&
          (l.ip,
          (I =
            !(
              !l.operatorSettings ||
              !l.operatorSettings.hasOwnProperty("enablePSIDV3Plus")
            ) && l.operatorSettings.enablePSIDV3Plus),
          (b = l.operatorSettings.enableRecaptchaV3),
          (v = l.operatorSettings.enableVerisoul),
          console.time(w.timeNameCreateTransaction),
          (t =
            null ==
            (t = new URLSearchParams(
              null == (t = w.queryParams) ? void 0 : t.startSurvey.split("?")[1]
            ))
              ? void 0
              : t.get("ps_supplier_sid")) &&
            (w.queryParams.ps_supplier_sid = t),
          (t = d.get("transId")) && (w.queryParams.pTransId = t),
          u
            .createTransaction(w.queryParams)
            .success(function (e) {
              if ("success" === e.status) {
                if (
                  ((w.queryParams = e.queryData),
                  d.set("transId", w.queryParams.transId),
                  r.setTransactionId(w.queryParams.transId),
                  p.setTransactionId(w.queryParams.transId),
                  f.setTransactionId(w.queryParams.transId),
                  w.queryParams.bsecSup ||
                    w.queryParams.ps_redirect_test ||
                    (w.queryParams.bsec && w.queryParams.bsec === g.BSEC))
                )
                  return (w.psidV3PlusProgress = 2), O();
                console.timeEnd(w.timeNameCreateTransaction),
                  v &&
                    (function t(r) {
                      var a =
                        1 < arguments.length &&
                        void 0 !== arguments[1] &&
                        arguments[1];
                      var i = Date.now();
                      m.handleLogout();
                      m.getSessionId()
                        .then(function (e) {
                          if (!e && !a)
                            return (
                              console.warn(
                                "Verisoul: Session ID missing, retrying once..."
                              ),
                              t(r, !0)
                            );
                          var n;
                          e
                            ? ((n = Date.now() - i),
                              m.authenticateSessionId(
                                w.queryParams.transId,
                                e,
                                r,
                                n
                              ))
                            : (console.error(
                                "Verisoul: Session ID still missing after retry."
                              ),
                              (e = "MISSING_SESSION_ID"));
                        })
                        .catch(function (e) {
                          var n = Date.now() - i;
                          console.error("Verisoul: Get session ID failed", e),
                            m.authenticateSessionId(
                              w.queryParams.transId,
                              "INVALID_SESSION_ID",
                              r,
                              n
                            );
                        });
                    })(
                      null == (e = e.queryData)
                        ? void 0
                        : e.ps_supplier_respondent_id,
                      !1
                    ),
                  I
                    ? (function (e, n) {
                        var t =
                            2 < arguments.length && void 0 !== arguments[2]
                              ? arguments[2]
                              : "",
                          a = ((w.psidV3PlusProgress = 1), Date.now()),
                          i = {},
                          s = !1;
                        M.search(e, n, t)
                          .then(function (e) {
                            var r;
                            (i = e.data) && i.String && i.Validation
                              ? ((r = i),
                                new Promise(function (n, e) {
                                  !(function (e) {
                                    var n = {},
                                      t = {};
                                    try {
                                      var r = e.String.Respondent.replace(
                                          "{",
                                          ""
                                        ).replace("}", ""),
                                        a = e.String.Surveys.replace("[{", "")
                                          .replace("}]", "")
                                          .replace("},{", "|");
                                      (n = D(r)),
                                        (t = (function (e) {
                                          var e = e.split("|"),
                                            n = [];
                                          return (
                                            e.forEach(function (e) {
                                              e = D(e);
                                              n.push(e);
                                            }),
                                            n
                                          );
                                        })(a));
                                    } catch (e) {
                                      return void console.error(
                                        "unable to parse response string: ",
                                        e
                                      );
                                    }
                                    var i = [
                                        "duplicate_potential",
                                        "failure_reason",
                                      ],
                                      r = !0;
                                    try {
                                      x(e.Respondent, n, [
                                        "respondent_risk",
                                        "threat_potential",
                                        "threat_potential_score",
                                      ]) || (r = !1);
                                    } catch (e) {
                                      return void console.error(
                                        "unable to validate respondent string: ",
                                        e
                                      );
                                    }
                                    var s = !0;
                                    try {
                                      e.Surveys.forEach(function (n) {
                                        var e = t.find(function (e) {
                                          return (
                                            e.survey_number ===
                                            n.survey_number.toString()
                                          );
                                        });
                                        (e && x(n, e, i)) || (s = !1);
                                      }),
                                        e.Surveys.length !== t.length &&
                                          (s = !1);
                                    } catch (e) {
                                      return void console.error(
                                        "unable to validate survey list string: ",
                                        e
                                      );
                                    }
                                    return r && s;
                                  })(r) && n(!1);
                                  var t = {
                                    stringSurveys: r.String.Surveys,
                                    stringRespondent: r.String.Respondent,
                                  };
                                  u.researchDefenderHashing(t)
                                    .success(function (e) {
                                      "success" === e.status &&
                                        (e.hashData.stringRespondentHash ===
                                          r.Validation.Respondent &&
                                          e.hashData.stringSurveysHash ===
                                            r.Validation.Surveys &&
                                          n(!0),
                                        n(!1));
                                    })
                                    .error(function (e) {
                                      S({
                                        message: e.message || e.msg,
                                        classes: "alert-danger",
                                        duration: 2e3,
                                      }),
                                        (l.errorMessage = e.message || e.msg),
                                        o.go("error");
                                    });
                                }).then(function (e) {
                                  (w.queryParams.hashValidationCheck = e),
                                    q(i, a, (s = !0));
                                }))
                              : q(i, a, s);
                          })
                          .catch(function (e) {
                            406 === e.status &&
                              (w.queryParams.hashValidationCheck = !1),
                              q(i, a, s);
                          });
                      })(
                        w.queryParams.transId,
                        w.queryParams.survey_id,
                        w.queryParams.locale
                      )
                    : O(),
                  setTimeout("securityNotStarted()", 16e3);
              }
            })
            .error(function (e) {
              "PS_Supply_Inbound_Hash_Security_FAIL" === e.message &&
                sessionStorage.removeItem("SS_startUrl"),
                "PS_Supplier_Allocation_Throttle_Fail" === e.message &&
                e.redirectUrl
                  ? (s.location.href = e.redirectUrl)
                  : e.redirectUrl
                  ? (S({
                      message: e.message || e.msg,
                      classes: "alert-danger",
                      duration: 7e3,
                    }),
                    (l.errorMessage = e.message || e.msg),
                    setTimeout(function () {
                      s.location.href = e.redirectUrl;
                    }, 7e3))
                  : (S({
                      message: e.message || e.msg,
                      classes: "alert-danger",
                      duration: 2e3,
                    }),
                    (l.errorMessage = e.message || e.msg),
                    o.go("error"));
            }),
          l.operatorSettings.enableTranslationServiceDetection && r.detect(),
          l.operatorSettings.enableClipboardDetection && p.detect(),
          f.detect());
      }),
        (w.psidV3PlusProgress = 0),
        (w.securityInProgress = 0),
        (w.respondentProfile = { targetV2: {}, internal: !1 }),
        (w.traffic = { adv: {} }),
        (w.respondentQuestions = []),
        (w.questionsToShow = []),
        (w.localisation = "en_US"),
        (w.ppLocalization = "eng_US"),
        (w.uploadRespondent = { answers: {} }),
        (w.nextBtn = { show: !1, clicked: !1 }),
        (w.userObj = {}),
        (w.isDependent = {
          quantity: 0,
          masterIndex: 0,
          dependentIndex: 0,
          avail: !1,
          checkForDependent: !0,
          lastDependentAnswered: !1,
          answered: 0,
        }),
        (w.validFields = { zipcode: !0 }),
        (w.emptyF = function () {}),
        (w.firstZipCode = !0),
        (w.apicallRespondent = !1);
      var t = new Date().getFullYear(),
        A =
          ((w.birthYears = Array(t - 1900)
            .fill()
            .map(function (e, n) {
              return t - n;
            })),
          (w.childsNumArr = Array(17)
            .fill()
            .map(function (e, n) {
              return n + 1;
            })),
          {}),
        P = [],
        T = [];
      function D(e) {
        e = e.split(",");
        var n = {};
        return (
          e.forEach(function (e) {
            (e = e.split(":")), (n[e[0]] = e[1]);
          }),
          n
        );
      }
      function x(e, n, t) {
        var r,
          a = !0,
          i = _createForOfIteratorHelper(t);
        try {
          for (i.s(); !(r = i.n()).done; ) {
            var s = r.value;
            if (isNaN(e[s]) || isNaN(n[s])) {
              if (n[s] != e[s].toString()) return (a = !1);
            } else if (Number(n[s]) != Number(e[s])) return (a = !1);
          }
        } catch (e) {
          i.e(e);
        } finally {
          i.f();
        }
        return a;
      }
      function q(e, n, t) {
        w.psidV3PlusProgress = 2;
        n = {
          PSIDV3PlusResponseTime: Q(n, Date.now()),
          PSIDV3PlusResponseSuccess: t,
        };
        (w.queryParams.psidV3PlusDeviceId = t
          ? e.Respondent.respondent_ud
          : new Date().getTime().toString()),
          (w.queryParams.PSIDV3PlusResponse = e),
          (w.queryParams.statistics = n),
          O();
      }
      function Q(e, n) {
        return n - e;
      }
      function O() {
        var e, n, t, r;
        if (I && 2 !== w.psidV3PlusProgress) return !1;
        l.operatorSettings.enablePSIDV3Plus && w.queryParams.psidV3PlusDeviceId
          ? ((w.queryParams.psidV3Plus = 1),
            delete w.queryParams.rvidResponseTime,
            delete w.queryParams.rvidDeviceId,
            delete w.queryParams.rvidResponse,
            delete w.queryParams.rvidSource)
          : delete w.queryParams.psidV3PlusDeviceId,
          a.getStartSurveyUrl() &&
            ((e = (function (e) {
              var n,
                e = e.split("?")[1] || "",
                e = new URLSearchParams(e),
                t = {},
                r = _createForOfIteratorHelper(e.entries());
              try {
                for (r.s(); !(n = r.n()).done; ) {
                  var a = _slicedToArray(n.value, 2),
                    i = a[0],
                    s = a[1];
                  /^\d+$/.test(i) && (t[i] = s);
                }
              } catch (e) {
                r.e(e);
              } finally {
                r.f();
              }
              return t;
            })((r = a.getStartSurveyUrl()))),
            (w.queryParams = _objectSpread(
              _objectSpread({}, w.queryParams),
              e
            )),
            (w.queryParams.startSurveyUrl = r)),
          console.time(w.timeNameGetScreener),
          (w.securityInProgress = 1),
          l.operatorSettings.enablePSDeviceFingerprinting &&
            (console.time("DeviceIdentifierService"),
            (e = new DeviceIdentifier({
              canvas: !0,
              screen_resolution: !0,
              screen_orientation: !0,
            }))
              .getDetails()
              .then(function (e) {
                w.queryParams.deviceData = e;
              }),
            (n = w.queryParams.transId),
            (t = Date.now()),
            (r = g.env),
            e.trackDetails(n, "test", r).then(function (e) {
              w.queryParams.deviceDetails = e;
              (e = Date.now()),
                (e = Q(t, e)),
                (w.queryParams.DIResponseTime = e),
                console.log("DI Service Response Time", e),
                (e = w.queryParams);
              u.saveDeviceToTrackDetails(n, e)
                .success(function (e) {
                  console.log("Device Identification service ", e);
                })
                .error(function (e) {
                  console.log("on error", e);
                });
            })),
          u
            .security(w.queryParams)
            .success(function (e) {
              var n, t, r;
              (w.securityInProgress = 2),
                "success" === e.status && e.decipherRedirectUrl
                  ? (s.location.href = e.decipherRedirectUrl)
                  : ((t =
                      null == e || null == (t = e.advSegQualId)
                        ? void 0
                        : t.filter(function (e) {
                            return !(
                              (e = e) &&
                              !(
                                null == (n = w.queryParams) ||
                                null == (n = n[e]) ||
                                !n.trim()
                              )
                            );
                            var n;
                          })),
                    (n = !!a.getStartSurveyUrl()),
                    (r = null == t ? void 0 : t.join(",")),
                    "success" === e.status &&
                    e.screenerId &&
                    !n &&
                    null != t &&
                    t.length
                      ? ((n = ""
                          .concat(w.queryParams.lang, "_")
                          .concat(w.queryParams.locale)),
                        o.go("segmentation", {
                          survey_id: e.surveyId,
                          parentQual: r,
                          locale: n,
                          psSource: "marketplace",
                          redirectUrl: e.startSurveyURL,
                          screenerId: e.screenerId,
                          mpRedirectValidation: {
                            parentQualId: r,
                            locale: n,
                            surveyId: e.surveyId,
                          },
                          showMultiLangChoices: e.showMultiLangChoices,
                        }))
                      : "success" === e.status && e.screenerDetails
                      ? e.skipPreScreener
                        ? k({ targetV2: {}, skipPreScreener: !0 })
                        : ((w.respondentProfile.token = w.queryParams.transId),
                          (w.traffic.transaction_id = w.queryParams.transId),
                          (w.traffic.supplier_respondent_id =
                            w.queryParams.ps_supplier_respondent_id),
                          (w.traffic.supplier_sid =
                            w.queryParams.ps_supplier_sid),
                          (w.localisation =
                            w.queryParams.lang + "_" + w.queryParams.locale),
                          (t =
                            "UK" === w.queryParams.locale
                              ? "GB"
                              : w.queryParams.locale),
                          (w.uploadRespondent.country = t),
                          (w.uploadRespondent.language = w.queryParams.lang),
                          (w.ppLocalization =
                            w.queryParams.langCode +
                            "_" +
                            w.queryParams.locale),
                          c.use(w.queryParams.lang),
                          w.queryParams.ps_simu_forced_loi &&
                            (w.respondentProfile.ps_simu_forced_loi =
                              w.queryParams.ps_simu_forced_loi),
                          w.queryParams.ps_simu_forced_status &&
                            (w.respondentProfile.ps_simu_forced_status =
                              w.queryParams.ps_simu_forced_status),
                          w.queryParams.supplier_id &&
                            (w.respondentProfile.supplier_id = parseInt(
                              w.queryParams.supplier_id
                            )),
                          w.queryParams.PSID &&
                            ((w.respondentProfile.PSID = w.queryParams.PSID),
                            (w.traffic.PSID = w.queryParams.PSID),
                            (w.uploadRespondent.psid = w.queryParams.PSID)),
                          e.screenerDetails.localization === V &&
                            ((w.maxQuestions = w.minQuestions =
                              e.screenerDetails.questions.reduce(function (
                                e,
                                n
                              ) {
                                return _.contains(
                                  n.question_tags,
                                  g.HONEY_POT_TAG
                                )
                                  ? e
                                  : e + 1;
                              },
                              0)),
                            e.screenerDetails.questions.forEach(function (e) {
                              e.dependent &&
                                ((w.isDependentQuestion = !0),
                                (w.maxQuestions = w.maxQuestions + 1));
                            })),
                          0 === e.screenerDetails.questions.length
                            ? (d.set("transId", null),
                              u
                                .nextStatus(
                                  w.queryParams.transId,
                                  w.queryParams.tId
                                )
                                .success(function (e) {
                                  var n, t;
                                  e.url &&
                                    ((s.location.href = e.url),
                                    (n = oe(e.url)),
                                    (t = window.location.host),
                                    (e = -1 !== e.url.indexOf("start-survey")),
                                    n === t) &&
                                    e &&
                                    s.location.reload(!0);
                                })
                                .error(function (e) {
                                  S({
                                    message: e.message || e.msg,
                                    classes: "alert-danger",
                                    duration: 2e3,
                                  }),
                                    (l.errorMessage = e.message || e.msg),
                                    o.go("error");
                                }))
                            : (console.timeEnd(w.timeNameGetScreener),
                              (r = e.screenerDetails),
                              console.timeEnd(w.timeName),
                              r.hasOwnProperty("isNonGDPRPPQuestionImport") &&
                                ((w.isNonGDPRPPQuestionImport =
                                  r.isNonGDPRPPQuestionImport),
                                (w.isPPFooterEnabled = !0),
                                u
                                  .getPrivacyPolicy(w.ppLocalization)
                                  .success(function (e) {
                                    e.privacy_policy &&
                                      (w.privacyPolicyQuestion =
                                        e.privacy_policy);
                                  })
                                  .error(function (e) {
                                    console.log(
                                      "error while fetching privacy policy",
                                      e
                                    );
                                  })),
                              r.hasOwnProperty("isDQEnable") &&
                                (w.isDQEnable = r.isDQEnable),
                              w.respondentQuestions.length &&
                                (w.questionsToShow = []),
                              (w.respondentQuestions = r.questions.map(
                                function (e) {
                                  return (
                                    218 === e.qualification_id &&
                                      e.dependent.forEach(function (e) {
                                        e &&
                                          e.dependency &&
                                          !e.dependency.condition.includes(
                                            116
                                          ) &&
                                          e.dependency.condition.push(116);
                                      }),
                                    (e.isHidden = !0),
                                    (e.isAnswered = !1),
                                    (e.answerObj = {
                                      question_id: e.data.question_id,
                                      qualification_id: e.qualification_id,
                                      userAnswer: "",
                                    }),
                                    e
                                  );
                                }
                              )),
                              (w.respondentQuestions = i("orderBy")(
                                w.respondentQuestions,
                                "data.question_order_number",
                                !1
                              )),
                              w.respondentQuestions.some(function (e) {
                                return (
                                  e.qualification_id ===
                                  g.MULTI_LANGUAGE_QUAL_CODE
                                );
                              }) &&
                                (w.respondentQuestions =
                                  w.respondentQuestions.sort(function (e, n) {
                                    return _.contains(
                                      e.question_tags,
                                      g.HONEY_POT_TAG
                                    ) ||
                                      _.contains(
                                        n.question_tags,
                                        g.HONEY_POT_TAG
                                      )
                                      ? 0
                                      : e.qualification_id ===
                                          g.MULTI_LANGUAGE_QUAL_CODE &&
                                        1e3 < n.qualification_id
                                      ? -1
                                      : n.qualification_id ===
                                          g.MULTI_LANGUAGE_QUAL_CODE &&
                                        1e3 < e.qualification_id
                                      ? 1
                                      : e.qualification_id - n.qualification_id;
                                  })),
                              (w.respondentQuestions[0].isHidden = !1),
                              (w.respondentQuestions[0].primaryIndex = 0),
                              w.respondentQuestions[0].isShow
                                ? (_.contains(
                                    w.respondentQuestions[0].question_tags,
                                    g.HONEY_POT_TAG
                                  )
                                    ? ((w.respondentQuestions[0].hpHide = !0),
                                      w.questionsToShow.push(
                                        w.respondentQuestions[0]
                                      ),
                                      1 < w.respondentQuestions.length &&
                                        ((w.isDependent.masterIndex =
                                          w.isDependent.masterIndex + 1),
                                        (w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].isHidden = !1),
                                        (w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].primaryIndex = 1),
                                        w.questionsToShow.push(
                                          w.respondentQuestions[
                                            w.isDependent.masterIndex
                                          ]
                                        )))
                                    : w.questionsToShow.push(
                                        w.respondentQuestions[0]
                                      ),
                                  w.isDependent.avail
                                    ? j(
                                        w.queryParams.transId,
                                        w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].dependent[
                                          w.isDependent.dependentIndex
                                        ].qualification_id,
                                        w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].dependent[
                                          w.isDependent.dependentIndex
                                        ].data.question_title,
                                        !!w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].dependent[
                                          w.isDependent.dependentIndex
                                        ].dp
                                      )
                                    : j(
                                        w.queryParams.transId,
                                        w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].qualification_id,
                                        w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].data.question_title,
                                        !!w.respondentQuestions[
                                          w.isDependent.masterIndex
                                        ].dp
                                      ))
                                : ((r = ""),
                                  "singlepunch" ===
                                    w.respondentQuestions[0].data
                                      .question_type &&
                                    (r =
                                      w.respondentQuestions[0].userAnswer
                                        .value),
                                  w.onChangeInput(
                                    r,
                                    w.respondentQuestions[0].userAnswer.value,
                                    0,
                                    w.respondentQuestions[0].qualification_id,
                                    "0_" +
                                      w.respondentQuestions[0]
                                        .qualification_id +
                                      "_" +
                                      w.respondentQuestions[0].data
                                        .question_type,
                                    0 +
                                      w.respondentQuestions[0].primaryIndex +
                                      0 +
                                      "_" +
                                      w.respondentQuestions[0].qualification_id,
                                    0,
                                    !0
                                  )),
                              (w.loader = { show: !1 }),
                              (w.container = { show: !0 }),
                              w.queryParams.ps_redirect_test ||
                                (T = w.respondentQuestions
                                  .filter(function (e) {
                                    return e.isSegmentation;
                                  })
                                  .map(function (e) {
                                    return e.qualification_id;
                                  }))))
                      : (e.url && (s.location.href = e.url),
                        S({
                          message: "Unable to proceed survey.",
                          classes: "alert-danger",
                          duration: 2e3,
                        }),
                        (l.errorMessage = "Unable to proceed survey."),
                        o.go("error")));
            })
            .error(function (e) {
              (w.securityInProgress = 2),
                S({
                  message: e.message || e.msg,
                  classes: "alert-danger",
                  duration: 2e3,
                }),
                (l.errorMessage = e.message || e.msg),
                o.go("error");
            });
      }
      function E(e) {
        w.nextBtn.show = e;
      }
      (w.setQuesWidth = function (r) {
        y(function () {
          var e, n, t;
          (r =
            r ||
            w.questionsToShow[w.questionsToShow.length - 1].qualification_id),
            document.getElementsByClassName("answerid-" + r)[0] &&
              document.getElementsByClassName("selectid-" + r)[0] &&
              ((e = document.getElementsByClassName("answerid-" + r)[0]),
              (n = document.getElementsByClassName("selectid-" + r)[0]),
              e.options && e.options.length
                ? (t = e.options[e.selectedIndex].text)
                : e.value && (t = e.value),
              (n.innerHTML = t),
              (e.style.width = parseInt(n.offsetWidth) + 20 + "px"));
        }, 100);
      }),
        (w.resetScreenerIndex = function (e, n, t, r) {
          (t = parseInt(t, 10)),
            ((!r &&
              0 < w.questionsToShow.length &&
              t + 1 != w.questionsToShow.length) ||
              "" === w.questionsToShow[t].userAnswer) &&
              ((w.nextBtn.show = !1),
              (w.editQuestion = !1),
              w.questionsToShow[t].isDependent
                ? (dependentEdited = !0)
                : (w.questionsToShow.splice(t + 1, w.questionsToShow.length),
                  (w.isDependent.quantity = 0),
                  (w.isDependent.masterIndex = n),
                  (w.isDependent.dependentIndex = 0),
                  (w.isDependent.avail = !1),
                  (w.isDependent.checkForDependent = !0),
                  (w.isDependent.lastDependentAnswered = !0),
                  (w.isDependent.answered = 0),
                  (P = [])));
        }),
        (w.formatInput = function (e, n) {
          var t = n.qualification_class,
            r = n.qualification_type,
            a = n.question_type;
          if (
            "range" === n.question_type ||
            ((void 0 === t ? null : t) == QUESTION_CLASS.SEGMENTATION &&
              (void 0 === r ? null : r) == QUESTION_CATEGORY.SEGMENTATION &&
              "input" == (void 0 === a ? null : a))
          )
            return (
              (47 < (n = e.which || e.keyCode) && n < 58) ||
              (95 < n && n < 106) ||
              8 == n ||
              9 == n ||
              (e.preventDefault(), !1)
            );
        }),
        (w.onChangeInput = function (s, o, u, e, n, t, d, l, r, c, a) {
          if (
            ((w.currentQualification = e),
            c === w.QuestionTypeOpenEnded &&
              w.questionsToShow[d].data.question_type ===
                w.QuestionTypeOpenEnded &&
              r &&
              r.split("_")[0] === w.allowedLanguage) &&
            o
              .replace(/[0-9&*{}[\]=\-()\.+,;'/]/g, "")
              .replace(/\s+/g, " ")
              .trim()
              .split(" ").length < w.wordCountMoreThan &&
            !w.isWCModalShown
          )
            return w.wordCountModal(), (w.isWCModalShown = !0);
          w.questionsToShow &&
            w.questionsToShow[d] &&
            w.questionsToShow[d].answerObj &&
            (w.questionsToShow[d].answerObj.userAnswer = o),
            "" === o || null == o
              ? (console.log("button disabled"), E(!1))
              : (w.nextButtonDis = !1),
            235 != e ||
              document.getElementById("answerid-234").getAttribute("itemval") ||
              (document
                .getElementById("answerid-234")
                .setAttribute("itemval", "January"),
              (document.getElementById("answerid-234").innerHTML =
                i("translate")("jan")),
              document.getElementsByClassName("answerid-234")[0] &&
                (document
                  .getElementsByClassName("answerid-234")[0]
                  .setAttribute("itemval", "January"),
                (document.getElementsByClassName("answerid-234")[0].value = 0),
                w.setQuesWidth("234"))),
            document.getElementsByClassName("answerid-" + e)[0] &&
              w.setQuesWidth(e);
          var p,
            n = (function (e, r, a) {
              var n = !0,
                i = {};
              {
                var s;
                -1 !== e.indexOf("-") &&
                  ((e = e.split("-")),
                  (s = !0),
                  e.forEach(function (e) {
                    var e = e.split("_"),
                      n = e[2],
                      t = e[1],
                      e = "ans" + e[0] + r + a + "_" + t,
                      n =
                        "input" === n
                          ? document.getElementById(e).value
                          : document
                              .getElementById(e)
                              .firstChild.getAttribute("itemval");
                    !s || (null != n && "" !== n) || (s = !1),
                      null != n && "" !== n && (i[t] = n);
                  }),
                  (n = s));
              }
              return { isAllAttempted: n, answerObj: i };
            })(n, u, d);
          if (!n.isAllAttempted) return !0;
          var f = !1,
            m = !1;
          w.questionsToShow[d].isDependent ||
          w.isDependent.avail ||
          220 === parseInt(e) ||
          230 === parseInt(e) ||
          221 === parseInt(e)
            ? ((p = A.qualification_id), (f = !0))
            : ((f = !1),
              (p = w.respondentQuestions[parseInt(u)].qualification_id)),
            (w.editQuestion = !1),
            !l &&
              0 < w.questionsToShow.length &&
              d + 1 !== w.questionsToShow.length &&
              ((w.nextBtn.show = !1),
              (w.editQuestion = !1),
              (p = w.questionsToShow[d].qualification_id),
              (f = w.questionsToShow[d].isDependent)
                ? (m = !0)
                : (w.questionsToShow.splice(d + 1, w.questionsToShow.length),
                  (w.isDependent.quantity = 0),
                  (w.isDependent.masterIndex = u),
                  (w.isDependent.dependentIndex = 0),
                  (w.isDependent.avail = !1),
                  (w.isDependent.checkForDependent = !0),
                  (w.isDependent.lastDependentAnswered = !0),
                  (w.isDependent.answered = 0),
                  (P = []))),
            B(s, p, o, n.answerObj, l, r, u, c, a, function (e) {
              if (e) {
                if (w.isDependent.avail && !m)
                  if ((w.isDependent.quantity--, 0 < w.isDependent.quantity))
                    w.isDependent.dependentIndex++;
                  else if (P.length && w.isDependent.answered + 1 < P.length) {
                    for (var n = {}, t = 0; t < P.length - 1; t++) {
                      var r = P[t],
                        a = P[t + 1];
                      n[r.qualification_id] = a.dependentIndex;
                    }
                    n[p]
                      ? (w.isDependent.answered = n[p])
                      : w.isDependent.answered++,
                      w.isDependent.dependentIndex++,
                      (A =
                        w.respondentQuestions[w.isDependent.masterIndex]
                          .dependent[w.isDependent.answered]),
                      (w.isDependent.quantity = A.dependency.repeat);
                  } else
                    (w.isDependent.avail = !1),
                      (w.isDependent.checkForDependent = !0),
                      (w.isDependent.lastDependentAnswered = !0),
                      (w.isDependent.quantity = 0),
                      (w.isDependent.answered = 0),
                      (P = []);
                var i;
                w.isDependent.checkForDependent &&
                !f &&
                w.respondentQuestions[w.isDependent.masterIndex].isShow &&
                w.respondentQuestions[w.isDependent.masterIndex].dependent &&
                0 <
                  w.respondentQuestions[w.isDependent.masterIndex].dependent
                    .length
                  ? ((i = s),
                    _.each(
                      w.respondentQuestions[w.isDependent.masterIndex]
                        .dependent,
                      function (e, n) {
                        var t, r;
                        e.dependency &&
                          e.dependency.hasOwnProperty("matchCriteria") &&
                          ((t = !1),
                          "multipunch" === c && _.isArray(o)
                            ? ((r = _.pluck(o, "id")),
                              "in" == e.dependency.matchCriteria
                                ? _.intersection(
                                    e.dependency.condition.map(Number),
                                    r
                                  ).length && (t = !0)
                                : "nin" == e.dependency.matchCriteria &&
                                  _.difference(
                                    r,
                                    e.dependency.condition.map(Number)
                                  ).length &&
                                  (t = !0))
                            : (("in" == e.dependency.matchCriteria &&
                                -1 !=
                                  e.dependency.condition
                                    .map(Number)
                                    .indexOf(i)) ||
                                ("nin" == e.dependency.matchCriteria &&
                                  -1 ==
                                    e.dependency.condition
                                      .map(Number)
                                      .indexOf(i)) ||
                                ("bt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.min <= parseInt(o) &&
                                  e.dependency.condition.max >= parseInt(o)) ||
                                ("gt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.min < parseInt(o)) ||
                                ("lt" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.max > parseInt(o)) ||
                                ("eq" == e.dependency.matchCriteria &&
                                  e.dependency.condition.hasOwnProperty(
                                    "min"
                                  ) &&
                                  e.dependency.condition.hasOwnProperty(
                                    "max"
                                  ) &&
                                  e.dependency.condition.min == parseInt(o) &&
                                  e.dependency.condition.max == parseInt(o))) &&
                              (t = !0),
                          t) &&
                          ("input" == e.dependency.repeat
                            ? (((r = angular.copy(e)).dependency.repeat =
                                parseInt(o) || 1),
                              P.push(r))
                            : ((e.dependentIndex = n), P.push(e)));
                      }
                    ),
                    P.length
                      ? (w.nextBtn.show && (w.nextBtn.show = !1),
                        (w.isDependent.avail = !0),
                        (w.isDependent.checkForDependent = !1),
                        (w.isDependent.lastDependentAnswered = !1),
                        (w.isDependent.quantity =
                          parseInt(P[0].dependency.repeat) || 1),
                        (w.isDependent.masterIndex = u),
                        (w.isDependent.dependentIndex = 0),
                        (w.isDependent.answered = 0),
                        (A = P[0]))
                      : console.log("dependent available but quantity is 0"))
                  : console.log(
                      "dependent check skipped or no dependent questions"
                    ),
                  parseInt(w.isDependent.masterIndex) + 1 <
                    w.respondentQuestions.length || w.isDependent.avail
                    ? (w.isDependent.lastDependentAnswered
                        ? (!l &&
                            0 < w.questionsToShow.length &&
                            1 !== w.questionsToShow.length &&
                            (d + 1 !== w.questionsToShow.length ||
                              w.isDependent.masterIndex ===
                                w.questionsToShow.length)) ||
                          w.isDependent.masterIndex++
                        : console.log("don't increase master index"),
                      w.isDependent.avail
                        ? m ||
                          ((A.isHidden = !1),
                          (A.primaryIndex = w.isDependent.dependentIndex),
                          y(function () {
                            w.questionsToShow.push(A);
                          }, 0))
                        : (w.isDependent.lastDependentAnswered
                            ? ((w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].isHidden = !1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].primaryIndex = w.isDependent.masterIndex))
                            : (!l && 0 < w.questionsToShow.length
                                ? 1 === w.questionsToShow.length
                                  ? w.isDependent.masterIndex++
                                  : d + 1 !== w.questionsToShow.length
                                  ? w.questionsToShow[d].qualification_id
                                  : (w.isDependent.masterIndex =
                                      w.isDependent.masterIndex + 1)
                                : (w.isDependent.masterIndex =
                                    w.isDependent.masterIndex + 1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].isHidden = !1),
                              (w.respondentQuestions[
                                w.isDependent.masterIndex
                              ].primaryIndex = parseInt(u) + 1)),
                          w.respondentQuestions[w.isDependent.masterIndex]
                            .isShow &&
                            _.contains(
                              w.respondentQuestions[w.isDependent.masterIndex]
                                .question_tags,
                              g.HONEY_POT_TAG
                            ) &&
                            ((w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].hpHide = !0),
                            h(),
                            (w.isDependent.masterIndex =
                              w.isDependent.masterIndex + 1),
                            (w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].isHidden = !1),
                            (w.respondentQuestions[
                              w.isDependent.masterIndex
                            ].primaryIndex = parseInt(u) + 2)),
                          w.respondentQuestions[w.isDependent.masterIndex]
                            .isShow
                            ? (g.MULTI_LANGUAGE_QUAL_CODE ===
                                parseInt(w.currentQualification) &&
                                null != (e = T) &&
                                e.length) ||
                              y(function () {
                                h(w.queryParams.lang);
                              }, 0)
                            : ((e = ""),
                              "singlepunch" ===
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .data.question_type &&
                                (e =
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].userAnswer.value),
                              w.onChangeInput(
                                e,
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .userAnswer.value,
                                w.isDependent.masterIndex,
                                w.respondentQuestions[w.isDependent.masterIndex]
                                  .qualification_id,
                                w.isDependent.masterIndex +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].qualification_id +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].data.question_type,
                                w.isDependent.masterIndex +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].primaryIndex +
                                  w.isDependent.masterIndex +
                                  "_" +
                                  w.respondentQuestions[
                                    w.isDependent.masterIndex
                                  ].qualification_id,
                                w.isDependent.masterIndex,
                                !0
                              ))))
                    : E(!0),
                  w.isDependent.avail
                    ? j(
                        w.queryParams.transId,
                        w.respondentQuestions[w.isDependent.masterIndex]
                          .dependent[w.isDependent.dependentIndex]
                          .qualification_id,
                        w.respondentQuestions[w.isDependent.masterIndex]
                          .dependent[w.isDependent.dependentIndex].data
                          .question_title,
                        !!w.respondentQuestions[w.isDependent.masterIndex]
                          .dependent[w.isDependent.dependentIndex].dp
                      )
                    : j(
                        w.queryParams.transId,
                        w.respondentQuestions[w.isDependent.masterIndex]
                          .qualification_id,
                        w.respondentQuestions[w.isDependent.masterIndex].data
                          .question_title,
                        !!w.respondentQuestions[w.isDependent.masterIndex].dp
                      );
              } else console.log("error validating qualification " + p);
            });
        }),
        (w.makeMeDisabled = function () {
          (w.nextButtonDis = !0), (w.loader = { show: !0 });
        }),
        (w.privacyModal = function () {
          var e;
          (w.ok = function () {
            e.close(w.result);
          }),
            (w.cancel = function () {
              e.dismiss("cancel");
            }),
            (w.privacyPolicy = N.trustAsHtml(
              w.privacyPolicyQuestion.modal_text
            )),
            (e = n.open({
              templateUrl: "privacypolicymodal.html",
              size: "lg",
              scope: w,
            })).result.then(
              function (e) {
                w.result = e;
              },
              function () {
                console.log("this is the modal dismissed");
              }
            );
        }),
        (w.nextClicked = function () {
          s.hj && s.hj("tagRecording", ["clickedNext"]),
            (w.nextBtn.clicked = !0),
            (w.respondentProfile.exitBefore = !1),
            b &&
              w.isDQEnable &&
              grecaptcha.ready(function () {
                grecaptcha
                  .execute(g.RECAPTCHA_V3_SITE_KEY, { action: "submit" })
                  .then(function (e) {
                    u.recaptchaTokenVerify(w.queryParams.transId, { token: e })
                      .success(function (e) {
                        console.log("Recaptcha verify data...", e);
                      })
                      .error(function (e) {
                        console.error("Recaptcha verify error...", e);
                      });
                  });
              }),
            j(w.queryParams.transId),
            d.remove("LS_" + w.queryParams.transId),
            k(w.respondentProfile),
            m.handleLogout(),
            (s.onbeforeunload = w.emptyF);
        }),
        (w.onExit = function () {
          var e = w.questionsToShow[w.questionsToShow.length - 1];
          e &&
            (213 === (e = e).qualification_id &&
              (w.respondentProfile.traffic.income = e.answerObj.userAnswer),
            229 === e.qualification_id &&
              (w.respondentProfile.traffic.zipcode = e.answerObj.userAnswer),
            (w.respondentProfile.exitBefore = !0),
            k(w.respondentProfile),
            (s.onbeforeunload = w.emptyF));
        }),
        (s.onbeforeunload = w.onExit),
        (s.securityNotStarted = function () {
          0 === w.securityInProgress &&
            (w.queryParams.rvidDeviceId ||
              ((w.queryParams.rvidSource = "timeout"),
              (w.queryParams.rvidDeviceId = new Date().getTime().toString())),
            O());
        }),
        (w.wordCountModal = function () {
          var e;
          (w.ok = function () {
            e.close(f.updatePopupActivity());
          }),
            (w.cancel = function () {}),
            (e = n.open({
              templateUrl: "wordcountmodal.html",
              size: "md",
              scope: w,
            }));
        }),
        (w.captchaSvg = function () {
          return U.getCaptcha(
            w.queryParams.transId,
            0 < arguments.length && void 0 !== arguments[0] && arguments[0]
          );
        });
      var B = function (e, n, t, r, a, i, s, o, u, d) {
          229 === n
            ? H(n, t, null == u ? void 0 : u.isAllowMultiRegex, function (e) {
                return d(e);
              })
            : 214 === n
            ? J(n, t, e, function (e) {
                return d(e);
              })
            : 211 === n
            ? Y(n, t, e, function (e) {
                return d(e);
              })
            : 212 === n
            ? a
              ? F(n, t, function (e) {
                  return d(e);
                })
              : ((w.userObj.bornmonth = r[234]),
                (w.userObj.bornyear = r[235]),
                Z(n, w.userObj.bornmonth, w.userObj.bornyear, function (e) {
                  return d(e);
                }))
            : 217 === n
            ? W(n, t, e, function (e) {
                return d(e);
              })
            : 218 === n
            ? X(n, t, e, function (e) {
                return d(e);
              })
            : 213 === n
            ? ne(n, t, i, function (e) {
                return d(e);
              })
            : 215 === n
            ? te(n, t, e, function (e) {
                return d(e);
              })
            : 216 === n
            ? re(n, t, e, function (e) {
                return d(e);
              })
            : 230 === n || 220 === n || 221 === n
            ? $(r, i, function (e) {
                return e && ((w.userObj.kids[s] = r), ee(w.userObj.kids)), d(e);
              })
            : 244 === n
            ? ae(n, t, e, function (e) {
                return d(e);
              })
            : 245 === n
            ? ie(n, t, e, function (e) {
                return d(e);
              })
            : se(n, t, e, o, u, function (e) {
                return d(e);
              });
        },
        $ = function (e, n, t) {
          var r = !0;
          return (
            "Year" === e[221] && 17 < parseInt(e[230]) && (r = !1),
            (r = "Month" === e[221] && 215 < parseInt(e[230]) ? !1 : r) ||
              (S.closeAll(),
              S({ message: K(n), classes: "alert-danger", duration: 15e3 })),
            t(r)
          );
        },
        K = function (e) {
          e = e.replace(/GB/g, "UK");
          return (
            g.childAgeError[e].invalid ||
            "Please enter a valid age for the child, not exceeding 17 years."
          );
        },
        H = function (r, a) {
          var i,
            e =
              !(2 < arguments.length && void 0 !== arguments[2]) ||
              arguments[2],
            s = 3 < arguments.length ? arguments[3] : void 0,
            n = g.countryRegex[w.queryParams.locale];
          if ((E(!1), !n || (!n.test(a) && !0 === w.firstZipCode)))
            return (w.validFields.zipcode = !1), s(!1);
          ((5 <= a.length && "EG" !== w.queryParams.locale) ||
            (-1 !==
              [
                "FR",
                "AT",
                "NZ",
                "CH",
                "AU",
                "PH",
                "AR",
                "BE",
                "BG",
                "HU",
                "BD",
                "NL",
                "SI",
                "LV",
                "KE",
                "SV",
                "MZ",
                "PY",
                "HT",
                "MD",
                "CY",
                "LU",
                "BY",
                "AL",
                "VE",
                "NG",
                "SA",
                "ZA",
                "NO",
                "AM",
                "GE",
                "DK",
              ].indexOf(w.queryParams.locale) &&
              4 <= a.length) ||
            (-1 !== ["UK", "GH", "IQ"].indexOf(w.queryParams.locale) &&
              2 <= a.length) ||
            (-1 !== ["IE", "BH", "KZ"].indexOf(w.queryParams.locale) &&
              3 <= a.length) ||
            ("EG" === w.queryParams.locale && [4, 5, 7].includes(a.length)) ||
            z(w.queryParams.locale, a.length, e)) &&
            ((n = a.replace(/[\W_-]/g, "")),
            (i = n),
            "CA" === w.queryParams.locale && (n = a.substr(0, 3).toUpperCase()),
            ("UK" !== w.queryParams.locale &&
              "GH" !== w.queryParams.locale &&
              "MT" !== w.queryParams.locale &&
              "AZ" !== w.queryParams.locale) ||
              (n = a.toUpperCase()),
            ("AR" !== w.queryParams.locale &&
              "cz" !== w.queryParams.locale &&
              "SK" !== w.queryParams.locale &&
              "GR" !== w.queryParams.locale) ||
              (n = a.toUpperCase().replace(" ", "")),
            "BR" === w.queryParams.locale && (n = a.replace("-", "")),
            ("IL" !== w.queryParams.locale && "AM" !== w.queryParams.locale) ||
              (n = a.replace(" ", "")),
            u
              .validateZipcode(n, w.queryParams.locale, w.queryParams.langCode)
              .success(function (e) {
                var n, t;
                return (
                  (w.firstZipCode = !1),
                  S.closeAll(),
                  "Failure" === e.apiStatus
                    ? (S({
                        message: e.message,
                        classes: "alert-danger",
                        duration: 1e3,
                      }),
                      (w.validFields.zipcode = !1),
                      E(!1),
                      s(!1))
                    : ((w.validFields.zipcode = !0),
                      (w.traffic.zipcode = i),
                      C(r, i, "value"),
                      (t = a.toString().toUpperCase()),
                      "UK" == w.queryParams.locale &&
                        (n = t.match(
                          /^[a-zA-Z0-9]{2,3}([A-Z0-9](?=\s*[a-zA-Z0-9]{3}|$))?/
                        )) &&
                        (n.shift(), (t = n.join(" "))),
                      (w.uploadRespondent.answers[r] = t.toString()),
                      w.queryParams.ps_redirect_test || R(),
                      "US" === w.queryParams.locale &&
                        (-1 <
                          (n = w.respondentQuestions.findIndex(function (e) {
                            return (
                              e.qualification_id === g.PRIVACY_POLICY_QUAL_ID
                            );
                          })) && !e.ppQuestionShow
                          ? ((w.ppQuestionIndex = n),
                            (w.ppQuestion = w.respondentQuestions.splice(n, 1)),
                            (w.isPPFooterEnabled = !1),
                            --w.maxQuestions)
                          : n < 0 &&
                            w.ppQuestion &&
                            e.ppQuestionShow &&
                            ((t = w.respondentQuestions).splice.apply(
                              t,
                              [w.ppQuestionIndex, 0].concat(
                                _toConsumableArray(w.ppQuestion)
                              )
                            ),
                            (w.isPPFooterEnabled = !0),
                            (w.maxQuestions += 1))),
                      s(!0))
                );
              })
              .error(function (e, n) {
                if ("Failure" === n.apiStatus)
                  return (
                    (w.firstZipCode = !1),
                    (w.validFields.zipcode = !1),
                    E(!1),
                    S.closeAll(),
                    S({
                      message: n.message,
                      classes: "alert-danger",
                      duration: 1e3,
                    }),
                    s(!1)
                  );
              }));
        },
        z = function (e, n, t) {
          return "TW" === e && ((!t && 6 === n) || (t && 3 <= n));
        },
        J = function (e, n, t, r) {
          return (
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.race = n),
            (w.traffic.race_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        Y = function (e, n, t, r) {
          return (
            (w.userObj.gender = n),
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.gender = n),
            (w.traffic.gender_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        F = function (e, n, t) {
          return (
            C(e, parseInt(n), "value"),
            (w.traffic.age = n),
            w.queryParams.ps_redirect_test || R(),
            t(!0)
          );
        },
        Z = function (e, n, t, r) {
          var a = t,
            n = new Date(n + ", 1 2016").getMonth() + 1,
            a = (function (e, n) {
              var e = new Date(e, n - 1),
                n = new Date();
              if (!(n < e))
                return (
                  (n = Math.floor((n - e) / 864e5)),
                  (e = Math.floor(n / 365)),
                  (n = Math.floor((n % 365) / 31)),
                  parseInt((12 * e + n) / 12)
                );
            })(a, n);
          return (
            C(e, parseInt(a), "value"),
            (w.uploadRespondent.answers[e + "_yeardob"] = t.toString()),
            (w.uploadRespondent.answers[e + "_monthdob"] = n.toString()),
            (w.uploadRespondent.answers[e + "_daydob"] = "15"),
            (w.traffic.age = a),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        };
      var W = function (e, n, t, r) {
          return (
            (w.userObj.relationship = n),
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.relationship = n),
            (w.traffic.relationship_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        X = function (e, n, t, r) {
          return (
            (w.traffic.children_code = t = 112 < t ? 112 : t),
            (w.traffic.children = n),
            (w.traffic.children_code = t),
            (w.traffic.kids = w.userObj.kids),
            C(e, parseInt(t), "id"),
            (w.userObj.kids = []),
            ee(w.userObj.kids),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        ee = function (e) {
          Array.isArray(e) && e.length
            ? ((w.respondentProfile.targetV2[230] = { data: [] }),
              (w.respondentProfile.targetV2[220] = { data: [] }))
            : (delete w.respondentProfile.targetV2[230],
              delete w.respondentProfile.targetV2[220]),
            (w.traffic.kids = e),
            angular.forEach(e, function (e) {
              var n = parseInt(e[230]),
                n =
                  (e[221] == i("translate")("year") &&
                    (n = 12 * parseInt(e[230])),
                  w.respondentProfile.targetV2[230].data.push({
                    value: n.toString(),
                  }),
                  112);
              "Boy" === e[220] && (n = 111),
                w.respondentProfile.targetV2[220].data.push({ id: n });
            }),
            w.queryParams.ps_redirect_test || R();
        },
        ne = function (e, n, t, r) {
          var a = /^([0-9]{1,6})$/i,
            t = t.split("_");
          return (
            l.defaultIncomeRanges[t[1]].max &&
              ((t = l.defaultIncomeRanges[t[1]].max.toString().length),
              (a = new RegExp("^([0-9]{1,".concat(t, "})$"), "i"))),
            C(e, parseInt(n), "value"),
            (w.traffic.income = parseInt(n)),
            a.test(parseInt(n))
              ? (w.queryParams.ps_redirect_test || R(), r(!0))
              : (S({
                  message: "invalid income",
                  classes: "alert-warning",
                  duration: 1e3,
                }),
                r(!1))
          );
        },
        te = function (e, n, t, r) {
          return (
            (w.userObj.employment = n),
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.employment = n),
            (w.traffic.employment_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        re = function (e, n, t, r) {
          return (
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.userObj.education = n),
            (w.traffic.education = n),
            (w.traffic.education_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        ae = function (e, n, t, r) {
          return (
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.raceBera = n),
            (w.traffic.raceBera_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        ie = function (e, n, t, r) {
          return (
            C(e, parseInt(t), "id"),
            (w.uploadRespondent.answers[e] = t.toString()),
            (w.traffic.hispanicBera = n),
            (w.traffic.hispanicBera_code = t),
            w.queryParams.ps_redirect_test || R(),
            r(!0)
          );
        },
        se = function (e, n, t, r, a, i) {
          var s = _.findWhere(w.questionsToShow, { qualification_id: e }),
            o = !1,
            u = !1,
            d = !1,
            l = null,
            c = [],
            p =
              (s && s.dp && (o = !0),
              s.isDependent &&
                ((u = !0),
                (l = s.dependency.parentQualId),
                (c = s.dependency.valid_option)),
              s.isSegmentation && ((d = !0), (l = s.segmentation.parentQualId)),
              []);
          if ("multipunch" === r && Array.isArray(n))
            n = n.filter(function (e) {
              return (
                e.id && p.push(e.id),
                delete e.excluding_qualification_optons,
                delete e.ticked,
                e
              );
            });
          else if ("singlepunch" === r && t)
            (n = [{ id: parseInt(t), text: n }]), p.push(parseInt(t));
          else if ("openended" == r) n = [{ value: n }];
          else if ("input" === r) {
            var a = a.data,
              a = void 0 === a ? {} : a,
              f = a.qualification_class,
              f = void 0 === f ? null : f,
              m = a.qualification_type,
              m = void 0 === m ? null : m,
              a = a.format,
              a = void 0 === a ? {} : a,
              y = a.min,
              y = void 0 === y ? 0 : y,
              g = a.max,
              g = void 0 === g ? 99999 : g,
              h = a.minlength,
              h = void 0 === h ? 1 : h,
              v = a.maxlength,
              v = void 0 === v ? 5 : v,
              I = a.regex,
              I = void 0 === I ? null : I;
            if (
              ((n = parseInt(n)),
              501 === s.data.units && (isNaN(n) || n < 1 || 99 < n))
            )
              return E(!1), i(!1);
            if (
              f == QUESTION_CLASS.SEGMENTATION &&
              "object" == _typeof(a) &&
              m == QUESTION_CATEGORY.SEGMENTATION
            ) {
              var b,
                f = n.length < h || n.length > v || n < y || g < n,
                a = !0;
              if ((I && (a = (b = new RegExp(b)).test(n)), f || !a))
                return (
                  S({
                    message: "invalid value",
                    classes: "alert-danger",
                    duration: 1e3,
                  }),
                  E(!1),
                  i(!1)
                );
            }
            n = [{ value: n }];
          } else
            "dragdrop" === r &&
              ((n = [{ value: t, opt: s.data.answers[e].ans_opt }]),
              p.push(parseInt(t)));
          return Object.keys(n).length
            ? ((w.respondentProfile.targetV2[e] = {
                data: n,
                screener: { dp: o, selectedAnswers: p },
                dependent: { isDependent: u, parentQualId: l, valid_option: c },
                segmentation: { isSegmentation: d, parentQualId: l },
              }),
              (w.traffic.adv[e] = n),
              w.queryParams.ps_redirect_test || R(),
              i(!0))
            : i(!1);
        },
        C = function (n, e, t) {
          var r = w.questionsToShow.find(function (e) {
              return e.qualification_id === n;
            }),
            r = !(!r || !r.dp);
          (w.respondentProfile.targetV2[n] = {
            data: [{}],
            screener: { dp: r, selectedAnswers: [e] },
          }),
            (w.respondentProfile.targetV2[n].data[0][t] = [e]);
        };
      function R() {
        var e, n;
        w.nextBtn.clicked ||
          (((n = w.respondentProfile).traffic = w.traffic),
          (n.country_code = w.queryParams.locale),
          (n.language_code = w.queryParams.langCode),
          w.queryParams.bsec && (n.bsec = w.queryParams.bsec),
          w.queryParams.bgsec && (n.bgsec = w.queryParams.bgsec),
          w.queryParams.ps_redirect_test &&
            (n.ps_redirect_test = w.queryParams.ps_redirect_test),
          null != (e = T) &&
            e.length &&
            ((n.currentQualification = w.currentQualification),
            (n.qualificationsToTranslate = T)),
          u.saveRespondentData(w.queryParams.transId, n).success(function (e) {
            var r;
            null != e &&
              e.translatedData &&
              ((e = e.translatedData),
              (r = Object.fromEntries(
                e.map(function (e) {
                  return [parseInt(e.qualification_id, 10), e];
                })
              )),
              (w.respondentQuestions = w.respondentQuestions.map(function (e) {
                var n,
                  t = r[parseInt(e.qualification_id, 10)];
                return t
                  ? _objectSpread(
                      _objectSpread({}, e),
                      {},
                      {
                        data: _objectSpread(
                          _objectSpread({}, e.data),
                          {},
                          {
                            question_text: t.question_text,
                            answers:
                              null != (n = e.data) &&
                              null != (n = n.answers) &&
                              n[e.qualification_id]
                                ? _objectSpread(
                                    _objectSpread({}, e.data.answers),
                                    {},
                                    _defineProperty(
                                      {},
                                      e.qualification_id,
                                      _objectSpread(
                                        _objectSpread(
                                          {},
                                          e.data.answers[e.qualification_id]
                                        ),
                                        {},
                                        {
                                          answers: e.data.answers[
                                            e.qualification_id
                                          ].answers.map(function (n) {
                                            var e = t.answers.find(function (
                                              e
                                            ) {
                                              return e.id === n.id;
                                            });
                                            return e
                                              ? _objectSpread(
                                                  _objectSpread({}, n),
                                                  {},
                                                  { translatedText: e.text }
                                                )
                                              : n;
                                          }),
                                        }
                                      )
                                    )
                                  )
                                : e.data.answers,
                          }
                        ),
                      }
                    )
                  : e;
              })),
              h());
          }));
      }
      function k(e) {
        w.isNonGDPRPPQuestionImport &&
          (e &&
            e.targetV2 &&
            (e.targetV2["".concat(g.PRIVACY_POLICY_QUAL_ID)] = {
              data: [{ id: 111, text: "I agree" }],
            }),
          e) &&
          e.traffic &&
          (e.traffic["".concat(g.PRIVACY_POLICY_QUAL_ID)] = [
            { id: 111, text: "I agree" },
          ]),
          w.apicallRespondent ||
            ((e.traffic = w.traffic),
            (e.country_code = w.queryParams.locale),
            w.queryParams.bsec && (e.bsec = w.queryParams.bsec),
            w.queryParams.bgsec && (e.bgsec = w.queryParams.bgsec),
            w.queryParams.ps_redirect_test &&
              ((e.language_code = w.queryParams.langCode),
              (e.ps_redirect_test = w.queryParams.ps_redirect_test)),
            (w.apicallRespondant = !0),
            (e.uploadRespondent = w.uploadRespondent),
            (e = (function (e) {
              var n = JSON.parse(JSON.stringify(e)),
                t = n.targetV2,
                r =
                  (r = w.questionsToShow.find(function (e) {
                    return 218 === e.qualification_id;
                  })) && r.isChildGenderAge;
              if (!Object.keys(t).includes((218).toString()) || !r) return e;
              if (
                ((r = t[218].data[0].id), (e = t[218]), (t[232] = e), 111 == r)
              )
                var a = [purespectrumLibrary.Child.createNoChildren()];
              else {
                if (!t[220]) return (t[232] = { data: [] }), delete t[218], n;
                var i = t[220].data.map(function (e) {
                    return e.id;
                  }),
                  s = [],
                  o = t[230].data.map(function (e) {
                    (e = e.value), (e = Number(e));
                    return 0 === e
                      ? (s.push(312), 1)
                      : e % 12 == 0
                      ? (s.push(311), e / 12)
                      : e < 48
                      ? (s.push(312), e)
                      : (s.push(311), Math.floor(e / 12));
                  });
                a = Array.from(new Array(o.length)).map(function (e, n) {
                  var t = o[n],
                    r = 312 === s[n],
                    n = 111 == i[n];
                  return (r && 47 < t) || (!r && 17 < t)
                    ? { code: null }
                    : purespectrumLibrary.Child.create(r, n, t);
                });
              }
              return (
                (r = a.map(function (e) {
                  return e.code;
                })),
                (e.screener = _objectSpread(
                  _objectSpread({}, e.screener),
                  {},
                  { selectedAnswers: r }
                )),
                (e.data = r.map(function (e) {
                  return { id: e };
                })),
                delete t[218],
                delete t[220],
                delete t[230],
                n
              );
            })(e)),
            d.set("transId", null),
            w.queryParams.screenerId &&
              (e.screenerId = w.queryParams.screenerId),
            u
              .saveRespondentProfile(w.queryParams.transId, e)
              .success(function (e) {
                var n, t;
                e.url &&
                  ((s.location.href = e.url),
                  (n = oe(e.url)),
                  (t = window.location.host),
                  (e = -1 !== e.url.indexOf("start-survey")),
                  n === t) &&
                  e &&
                  window.location.reload(!0);
              })
              .error(function (e) {
                console.log(e),
                  S({ message: e.msg, classes: "alert-danger", duration: 2e3 }),
                  (l.errorMessage = e.msg),
                  o.go("error");
              }));
      }
      function oe(e) {
        var n = document.createElement("a");
        return (n.href = e), n.host;
      }
      function j(e, n, t, r) {
        var a = [],
          i = !0,
          s = "LS_" + w.queryParams.transId,
          o = d.get(s);
        o
          ? (o = JSON.parse(o)).indexOf(n) < 0
            ? (a = o).push(n)
            : (i = !1)
          : a.push(n),
          i && d.set(s, JSON.stringify(a)),
          u.updateLastQuestionDetails(e, n, t, r, i).success(function (e) {});
      }
      w.open = function (e) {
        var n,
          t = w.$new();
        (t.ok = function () {
          n.close(t.selected);
        }),
          (t.cancel = function () {
            n.dismiss("cancel");
          }),
          (n = $modal.open({
            template: "<my-modal></my-modal>",
            size: e,
            scope: t,
          })).result.then(
            function (e) {
              w.selected = e;
            },
            function () {
              console.log("modal dismissed");
            }
          );
      };
    },
  ]),
  angular.module("pureSpectrumApp").controller("surveyScreenerCtrl", [
    "$scope",
    "$timeout",
    "notify",
    "ngProgressLite",
    "$stateParams",
    "createSurvey",
    "localStorageService",
    "$cookies",
    "$state",
    "$window",
    "$location",
    "$filter",
    "$translate",
    "config",
    function (y, g, i, e, d, s, n, t, r, a, o, h, u, l) {
      (y.loader = { show: !0 }),
        (y.emptyF = function () {}),
        d.ps_redirect_test
          ? f()
          : d.token || d.tid || d.surveyNum
          ? s.getSurveyTid(d).success(function (e) {
              !0 === e.value ? r.go("invalidaccess") : f();
            })
          : r.go("invalidaccess"),
        d.token && a.FS && a.FS.setUserVars({ displayName: "" + d.token }),
        (y.surveyTarget = {
          country_code: "",
          lang_code: "",
          translate_lang: "",
        }),
        (y.children = {}),
        (y.respondentProfile = {
          target: {
            zip: [],
            race: [],
            age: [],
            gender: [],
            employments: [],
            educations: [],
            relationships: [],
            children: [],
            houseHoldIncome: [],
            adv: {},
          },
          targetv2: {},
          dynamic_profile: {},
          internal: !1,
        }),
        (y.traffic = {
          transaction_id: d.token,
          supplier_respondent_id: d.ps_supplier_respondent_id,
          supplier_sid: d.ps_supplier_sid,
          child1_age: "",
          child1_gender: "",
          child2_age: "",
          child2_gender: "",
          child3_age: "",
          child3_gender: "",
          child4_age: "",
          child4_gender: "",
          child5_age: "",
          child5_gender: "",
          childrens: [],
          PSID: "",
          survey_id: "",
          adv: {},
        }),
        (y.kidShowNumber = 0);
      new Date();
      (y.st = 0),
        n.set("startSurveyToken", d.token),
        n.set("startSurveySurveyId", d.surveyNum),
        (y.PSID = d.psid),
        y.PSID && ((y.psidValue = y.PSID), (y.respondentProfile.PSID = y.PSID)),
        d.ps_simu_forced_loi &&
          (y.respondentProfile.ps_simu_forced_loi = d.ps_simu_forced_loi),
        d.ps_simu_forced_status &&
          (y.respondentProfile.ps_simu_forced_status = d.ps_simu_forced_status),
        d.supplier_id &&
          (y.respondentProfile.supplier_id = parseInt(d.supplier_id)),
        (y.traffic.PSID = y.PSID),
        (y.userObj = {
          zipcode: "",
          race: "",
          gender: "",
          bornmonth: "",
          bornyear: "",
          relationship: "",
          employment: "",
          education: "",
          covered: "",
          meage: "",
          spouseage: "",
          kids: [],
          kidsAges: [],
          age: "",
          income: "",
          kidsAgeYear: [],
          kidsAgeGender: [],
        }),
        (y.ageCalci = {}),
        (y.birthYears = []);
      for (var c = new Date().getFullYear(); 1900 <= c; c--)
        y.birthYears.push(c);
      y.childsNumArr = [];
      for (c = 1; c <= 17; c++) y.childsNumArr.push(c);
      (y.validFields = { zipcode: !0, meage: !0, spouseage: !0, kidsage: [] }),
        (y.showtext = { chld: !0 }),
        (y.shownext = {
          genderInfo: !1,
          raceInfo: !1,
          monthInfo: !1,
          yearInfo: !1,
          age: !1,
          myIncome: !1,
          fmIncome: !1,
          income: !1,
          rlnShip: !1,
          child: !1,
          edu: !1,
          emp: !1,
          single: !0,
          vowel: !1,
          ageKids: !1,
        }),
        (y.ageYear = !0),
        (y.ageGender = !0),
        (y.showkidsage = !0),
        (y.showIncome = !1),
        (y.makeDisabled = {
          zip: !1,
          race: !1,
          gender: !0,
          month: !1,
          ageYear: !0,
          relation: !1,
          child: !1,
          childAge: !1,
          childYear: !1,
          childMonth: !1,
          income: !1,
          emp: !1,
        }),
        (y.dispTexts = {
          coveredText: "",
          kidsText: h("translate")("kids"),
          stAge: h("translate")("aMale"),
          kidsvowel: [],
          empText: h("translate")("employe"),
        }),
        (y.monthYrDefault =
          h("translate")("month") + "/" + h("translate")("year")),
        (y.boyGirlDefault =
          h("translate")("boy") + "/" + h("translate")("girl")),
        (y.firstZipCode = !0);
      function v(e) {
        Array.isArray(e) && e.length
          ? ((y.respondentProfile.targetv2[230] = []),
            (y.respondentProfile.targetv2[220] = []))
          : (delete y.respondentProfile.targetv2[230],
            delete y.respondentProfile.targetv2[220]),
          angular.forEach(e, function (e) {
            var n = parseInt(e[230]);
            e[221] == h("translate")("year") && (n = 12 * parseInt(e[230])),
              y.respondentProfile.targetv2[230].push({ value: n.toString() }),
              (n = "Boy" == e[220] ? 111 : 112),
              y.respondentProfile.targetv2[220].push({ id: n });
          });
      }
      (y.respondentProfile.token = d.token),
        (y.apicallRespondant = !1),
        (y.userAnswerObj = { qualifications: [] }),
        (y.isDependent = {
          quantity: 0,
          masterIndex: 0,
          dependentIndex: 0,
          avail: !1,
          checkforDependent: !0,
          lastDependentAnswered: !1,
        }),
        (y.nextBtn = { show: !1, clicked: !1 });
      y.resetScreenerIndex = function (e, n, t, r) {
        !r &&
          0 < y.questionsToShow.length &&
          t + 1 != y.questionsToShow.length &&
          ((y.nextBtn.show = !1),
          console.log("resetScreenerIndex editing question"),
          (y.editQuestion = !1),
          (currentQuestionQualification =
            y.questionsToShow[t].qualification_id),
          220 != parseInt(e)) &&
          230 != parseInt(e) &&
          221 != parseInt(e) &&
          (console.log(" child here ", t),
          y.questionsToShow.splice(t + 1, y.questionsToShow.length),
          (y.isDependent.quantity = 0),
          (y.isDependent.masterIndex = n),
          (y.isDependent.dependentIndex = 0),
          (y.isDependent.avail = !1),
          (y.isDependent.checkforDependent = !0),
          (y.isDependent.lastDependentAnswered = !1));
      };
      var I = {};
      (y.isDependent.avail = !1),
        (y.onChangeInput = function (e, n, t, r, a, i, s, o, u, d) {
          "" == n || null == n
            ? (console.log("button disabled"), (y.nextButtonDis = !0))
            : (console.log("button not disabled"), (y.nextButtonDis = !1)),
            235 != r ||
              document.getElementById("answerid-234").getAttribute("itemval") ||
              (document
                .getElementById("answerid-234")
                .setAttribute("itemval", "January"),
              (document.getElementById("answerid-234").innerHTML =
                h("translate")("jan")));
          var l,
            a = (function (e, r, a) {
              var n = !0,
                i = {};
              {
                var s;
                -1 !== e.indexOf("-") &&
                  ((e = e.split("-")),
                  (s = !0),
                  e.forEach(function (e) {
                    var e = e.split("_"),
                      n = e[2],
                      t = e[1],
                      e = "ans" + e[0] + r + a + "_" + t,
                      n =
                        "input" == n
                          ? document.getElementById(e).value
                          : document
                              .getElementById(e)
                              .firstChild.getAttribute("itemval");
                    !s || (null != n && "" != n) || (s = !1),
                      null != n && "" !== n && (i[t] = n);
                  }),
                  (n = s));
              }
              return { isAllAttempted: n, answerObj: i };
            })(a, t, s);
          if (!a.isAllAttempted) return !0;
          (l = (
            y.isDependent.avail ||
            220 == parseInt(r) ||
            230 == parseInt(r) ||
            221 == parseInt(r)
              ? I
              : y.respondantQuestions[parseInt(t)]
          ).qualification_id),
            (y.editQuestion = !1),
            !o &&
              0 < y.questionsToShow.length &&
              s + 1 != y.questionsToShow.length &&
              ((y.nextBtn.show = !1),
              console.log("editing question"),
              (y.editQuestion = !1),
              (l = y.questionsToShow[s].qualification_id),
              220 != parseInt(r)) &&
              230 != parseInt(r) &&
              221 != parseInt(r) &&
              (console.log(" child here ", s),
              y.questionsToShow.splice(s + 1, y.questionsToShow.length),
              (y.isDependent.quantity = 0),
              (y.isDependent.masterIndex = t),
              (y.isDependent.dependentIndex = 0),
              (y.isDependent.avail = !1),
              (y.isDependent.checkforDependent = !0),
              (y.isDependent.lastDependentAnswered = !1));
          var r = e,
            e = l,
            c = n,
            a = a.answerObj,
            p = o,
            f = t,
            m = function (e) {
              e
                ? (y.isDependent.avail &&
                    (y.isDependent.quantity--,
                    0 < y.isDependent.quantity
                      ? y.isDependent.dependentIndex++
                      : ((y.isDependent.avail = !1),
                        (y.isDependent.checkforDependent = !0),
                        (y.isDependent.lastDependentAnswered = !0),
                        console.log("last dependent answered"))),
                  y.isDependent.checkforDependent &&
                  y.respondantQuestions[y.isDependent.masterIndex].isShow &&
                  y.respondantQuestions[y.isDependent.masterIndex].dependent &&
                  0 <
                    y.respondantQuestions[y.isDependent.masterIndex].dependent
                      .length
                    ? 0 < n && n < 5
                      ? ((y.isDependent.avail = !0),
                        (y.isDependent.checkforDependent = !1),
                        (y.isDependent.quantity = n),
                        (y.isDependent.masterIndex = t),
                        (y.isDependent.dependentIndex = 0),
                        (I =
                          y.respondantQuestions[y.isDependent.masterIndex]
                            .dependent[0]))
                      : console.log("dependent available but quantity is 0")
                    : console.log(
                        "dependent check skipped or no dependent questions"
                      ),
                  parseInt(y.isDependent.masterIndex) + 1 <
                    y.respondantQuestions.length || y.isDependent.avail
                    ? (y.isDependent.lastDependentAnswered
                        ? (!o &&
                            0 < y.questionsToShow.length &&
                            1 != y.questionsToShow.length &&
                            s + 1 != y.questionsToShow.length) ||
                          y.isDependent.masterIndex++
                        : console.log("dont increase master index"),
                      y.isDependent.avail
                        ? ((I.isHidden = !1),
                          (I.primaryIndex = y.isDependent.dependentIndex),
                          g(function () {
                            y.questionsToShow.push(I);
                          }, 0))
                        : (y.isDependent.lastDependentAnswered
                            ? ((y.respondantQuestions[
                                y.isDependent.masterIndex
                              ].isHidden = !1),
                              (y.respondantQuestions[
                                y.isDependent.masterIndex
                              ].primaryIndex = y.isDependent.masterIndex))
                            : (!o && 0 < y.questionsToShow.length
                                ? 1 == y.questionsToShow.length
                                  ? y.isDependent.masterIndex++
                                  : s + 1 != y.questionsToShow.length
                                  ? y.questionsToShow[s].qualification_id
                                  : (y.isDependent.masterIndex =
                                      y.isDependent.masterIndex + 1)
                                : (y.isDependent.masterIndex =
                                    y.isDependent.masterIndex + 1),
                              (y.respondantQuestions[
                                y.isDependent.masterIndex
                              ].isHidden = !1),
                              (y.respondantQuestions[
                                y.isDependent.masterIndex
                              ].primaryIndex = parseInt(t) + 1)),
                          0 ==
                            _.where(
                              y.questionsToShow,
                              y.respondantQuestions[y.isDependent.masterIndex]
                            ).length &&
                            (y.respondantQuestions[y.isDependent.masterIndex]
                              .isShow
                              ? g(function () {
                                  y.questionsToShow.push(
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ]
                                  );
                                }, 0)
                              : ((e = ""),
                                "singlepunch" ==
                                  y.respondantQuestions[
                                    y.isDependent.masterIndex
                                  ].data.question_type &&
                                  (e =
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ].userAnswer.value),
                                y.onChangeInput(
                                  e,
                                  y.respondantQuestions[
                                    y.isDependent.masterIndex
                                  ].userAnswer.value,
                                  y.isDependent.masterIndex,
                                  y.respondantQuestions[
                                    y.isDependent.masterIndex
                                  ].qualification_id,
                                  y.isDependent.masterIndex +
                                    "_" +
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ].qualification_id +
                                    "_" +
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ].data.question_type,
                                  y.isDependent.masterIndex +
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ].primaryIndex +
                                    y.isDependent.masterIndex +
                                    "_" +
                                    y.respondantQuestions[
                                      y.isDependent.masterIndex
                                    ].qualification_id,
                                  y.isDependent.masterIndex,
                                  !0
                                )))))
                    : (console.log("finished"), (y.nextBtn.show = !0)))
                : console.log("error validating qualification " + l);
            };
          if (229 == e)
            S(e, c, function (e) {
              return m(e);
            });
          else if (214 == e)
            A(e, c, r, function (e) {
              return m(e);
            });
          else if (211 == e)
            x(e, c, r, function (e) {
              return m(e);
            });
          else if (212 == e)
            p
              ? Q(e, c, function (e) {
                  return m(e);
                })
              : ((y.userObj.bornmonth = a[234]),
                (y.userObj.bornyear = a[235]),
                q(e, y.userObj.bornmonth, y.userObj.bornyear, function (e) {
                  return m(e);
                }));
          else if (217 == e)
            O(e, c, r, function (e) {
              return m(e);
            });
          else if (218 == e)
            E(e, c, r, function (e) {
              return m(e);
            });
          else if (213 == e)
            C(e, c, u, function (e) {
              return m(e);
            });
          else if (215 == e)
            R(e, c, r, function (e) {
              return m(e);
            });
          else if (216 == e)
            k(e, c, r, function (e) {
              return m(e);
            });
          else {
            if (230 == e)
              return void ((y.userObj.kids[f] = a), v(y.userObj.kids), m(!0));
            244 == e
              ? P(e, c, r, function (e) {
                  return m(e);
                })
              : 245 == e
              ? T(e, c, r, function (e) {
                  return m(e);
                })
              : D(e, c, r, d, function (e) {
                  return m(e);
                });
          }
        }),
        (y.nextClicked = function () {
          (y.nextBtn.clicked = !0),
            (y.respondentProfile.exitBefore = !1),
            m(y.respondentProfile),
            (a.onbeforeunload = y.emptyF);
        }),
        (y.respondantQuestions = []),
        (y.questionsToShow = []),
        (y.localisation = "en_US"),
        (y.modelArray = []);
      var p = function (e, n, t) {
        s.getScreenerByID(e, n, t, d.token, d.ps_redirect_test)
          .success(function (e) {
            if (
              ((y.loader = { show: !1 }),
              e &&
                e.screener &&
                e.screener[0].questions &&
                0 < e.screener[0].questions.length)
            ) {
              for (var n in e.screener[0].questions) {
                (e.screener[0].questions[n].isHidden = !0),
                  (e.screener[0].questions[n].isAnswered = !1);
                var t = {
                  question_id: e.screener[0].questions[n].data.question_id,
                  qualification_id: e.screener[0].questions[n].qualification_id,
                  userAnswer: "",
                };
                e.screener[0].questions[n].answerObj = t;
              }
              var r;
              (y.respondantQuestions = e.screener[0].questions),
                (y.respondantQuestions = h("orderBy")(
                  y.respondantQuestions,
                  "data.question_order_number",
                  !1
                )),
                (y.respondantQuestions[0].isHidden = !1),
                (y.respondantQuestions[0].primaryIndex = 0),
                y.respondantQuestions[0].isShow
                  ? y.questionsToShow.push(y.respondantQuestions[0])
                  : ((r = ""),
                    "singlepunch" ==
                      y.respondantQuestions[0].data.question_type &&
                      (r = y.respondantQuestions[0].userAnswer.value),
                    y.onChangeInput(
                      r,
                      y.respondantQuestions[0].userAnswer.value,
                      0,
                      y.respondantQuestions[0].qualification_id,
                      "0_" +
                        y.respondantQuestions[0].qualification_id +
                        "_" +
                        y.respondantQuestions[0].data.question_type,
                      0 +
                        y.respondantQuestions[0].primaryIndex +
                        0 +
                        "_" +
                        y.respondantQuestions[0].qualification_id,
                      0,
                      !0
                    ));
            } else y.nextBtn.show = !0;
          })
          .error(function (e) {
            i({ message: e.msg, classes: "alert-danger", duration: 2e3 });
          });
      };
      function f() {
        s.getSurveyById(d)
          .success(function (e) {
            e &&
            e.survey[0] &&
            e.survey[0].locale &&
            e.survey[0].locale.countryCode &&
            e.survey[0].locale.languageCode
              ? ((y.surveyTarget.lang_code = e.survey[0].locale.languageCode),
                (y.surveyTarget.country_code = e.survey[0].locale.countryCode),
                (y.surveyTarget.translate_lang =
                  e.survey[0].locale.languageTranslate),
                (y.respondentProfile.survey_id = e.survey[0].id),
                (y.traffic.survey_id = e.survey[0].id),
                (y.respondentProfile.user_id = e.survey[0].company),
                (y.categoryName = e.survey[0].samplesType),
                u.use(e.survey[0].locale.languageTranslate),
                (y.monthYrDefault =
                  h("translate")("month") + "/" + h("translate")("year")),
                (y.boyGirlDefault =
                  h("translate")("boy") + "/" + h("translate")("girl")),
                (y.dispTexts.kidsText = h("translate")("kids")),
                (y.dispTexts.stAge = h("translate")("aMale")),
                (y.dispTexts.empText = h("translate")("employe")),
                p(
                  e.survey[0].id,
                  y.respondentProfile.PSID,
                  e.survey[0].locale.languageCode +
                    "_" +
                    e.survey[0].locale.countryCode
                ),
                (y.localisation =
                  e.survey[0].locale.languageTranslate +
                  "_" +
                  e.survey[0].locale.countryCode))
              : i({
                  message: "Error getting survey data!",
                  classes: "alert-danger",
                  duration: 2e3,
                });
          })
          .error(function (e) {
            i({ message: e.msg, classes: "alert-danger", duration: 2e3 });
          });
      }
      function m(e) {
        y.apicallRespondant ||
          ((e.traffic = y.traffic),
          d.bsec && (e.bsec = d.bsec),
          (y.apicallRespondant = !0),
          (e.country_code = y.surveyTarget.country_code),
          s
            .answerByUser(e)
            .success(function (e) {
              e.url && (a.location.href = e.url);
            })
            .error(function (e) {}));
      }
      function b() {
        var e;
        y.nextBtn.clicked ||
          ((e = {}),
          ((e = y.respondentProfile).traffic = y.traffic),
          (e.country_code = y.surveyTarget.country_code),
          (e.language_code = y.surveyTarget.lang_code),
          s.saveRespondantData(e).success(function (e) {}));
      }
      function w(e, n) {
        var e = new Date(e, n - 1),
          n = new Date();
        if (!(n < e))
          return (
            (n = Math.floor((n - e) / 864e5)),
            (e = Math.floor(n / 365)),
            (n = Math.floor((n % 365) / 31)),
            parseInt((12 * e + n) / 12)
          );
      }
      (y.onExit = function (e) {
        (y.respondentProfile.exitBefore = !0),
          m(y.respondentProfile),
          (a.onbeforeunload = y.emptyF);
      }),
        (a.onbeforeunload = y.onExit);
      var S = function (n, e, t) {
          y.respondentProfile.target.zip = [];
          var r,
            a = l.countryRegex[y.surveyTarget.country_code];
          if (!a || (!a.test(e) && !0 === y.firstZipCode))
            return (
              (y.validFields.zipcode = !1),
              (y.respondentProfile.target.zip = []),
              t(!1)
            );
          (5 <= e.length ||
            ("FR" === y.surveyTarget.country_code && 4 <= e.length)) &&
            ((a = e.replace(/[\W_-]/g, "")),
            (r = a),
            "CA" === y.surveyTarget.country_code &&
              (a = e.substr(0, 3).toUpperCase()),
            "AR" === y.surveyTarget.country_code &&
              (a = e.toUpperCase().replace(" ", "")),
            "BR" === y.surveyTarget.country_code && (a = e.replace("-", "")),
            "IL" === y.queryParams.locale && (a = e.replace(" ", "")),
            s
              .validateZipcode(
                a,
                y.surveyTarget.country_code,
                y.surveyTarget.lang_code
              )
              .success(function (e) {
                return (
                  (y.firstZipCode = !1),
                  i.closeAll(),
                  "Failure" === e.apiStatus
                    ? (i({
                        message: e.message,
                        classes: "alert-danger",
                        duration: 1e3,
                      }),
                      (y.makeDisabled.zip = !1),
                      (y.validFields.zipcode = !1),
                      t(!1))
                    : ((y.validFields.zipcode = !0),
                      (y.respondentProfile.target.zip[0] = { value: (e = r) }),
                      (y.traffic.zipcode = e),
                      (y.respondentProfile.target.zip[0] = { value: e }),
                      (y.respondentProfile.targetv2[n] = [{ value: e }]),
                      d.ps_redirect_test || b(),
                      t(!0))
                );
              })
              .error(function (e, n) {
                if ("Failure" === n.apiStatus)
                  return (
                    (y.firstZipCode = !1),
                    (y.makeDisabled.zip = !1),
                    (y.validFields.zipcode = !1),
                    i.closeAll(),
                    i({
                      message: n.message,
                      classes: "alert-danger",
                      duration: 1e3,
                    }),
                    t(!1)
                  );
              }));
        },
        A = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.race = []),
            y.respondentProfile.target.race.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.race = n),
            (y.traffic.race_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        P = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.raceBera = []),
            y.respondentProfile.target.raceBera.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.raceBera = n),
            (y.traffic.raceBera_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        T = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.hispanicBera = []),
            y.respondentProfile.target.hispanicBera.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.hispanicBera = n),
            (y.traffic.hispanicBera_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        D = function (e, n, t, r, a) {
          var i = _.findWhere(y.questionsToShow, { qualification_id: e }),
            s = !1,
            o = [],
            u =
              (i && i.dp && (s = !0),
              i.data &&
                i.data.answers &&
                i.data.answers[e] &&
                i.data.answers[e].answers &&
                i.data.answers[e].answers.length &&
                (o = _.pluck(i.data.answers[e].answers, "id")),
              []);
          return (
            "multipunch" == r && Array.isArray(n)
              ? (n = n.filter(function (e) {
                  return (
                    e.id && u.push(e.id),
                    delete e.excluding_qualification_optons,
                    delete e.ticked,
                    e
                  );
                }))
              : "singlepunch" == r && t
              ? ((n = [{ id: parseInt(t), text: n }]), u.push(parseInt(t)))
              : "openended" == r
              ? (n = [{ value: n }])
              : "input" == r && (n = [{ value: parseInt(n) }]),
            Object.keys(n).length
              ? ((y.respondentProfile.target.adv[e] = n),
                (y.respondentProfile.targetv2[e] = n),
                (y.respondentProfile.dynamic_profile[e] = {
                  dp: s,
                  selectedAnswers: u,
                  renderedAnswers: o,
                }),
                (y.traffic.adv[e] = n),
                d.ps_redirect_test || b(),
                a(!0))
              : a(!1)
          );
        },
        x = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.gender = []),
            (y.userObj.gender = n),
            y.respondentProfile.target.gender.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.gender = n),
            (y.traffic.gender_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        q = function (e, n, t, r) {
          var n = new Date(n + ", 1 2016").getMonth() + 1,
            a = new Date().getMonth() + 1,
            a = 12 * new Date().getFullYear() + a,
            i = 12 * parseInt(t) + parseInt(n),
            a = (parseInt((a - i) / 12), w(t, n));
          return (
            (y.respondentProfile.target.age[0] = { value: parseInt(a) }),
            (y.respondentProfile.targetv2[e] = [{ value: parseInt(a) }]),
            (y.traffic.age = a),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        Q = function (e, n, t) {
          return (
            (y.respondentProfile.target.age[0] = { value: parseInt(n) }),
            (y.respondentProfile.targetv2[e] = [{ value: parseInt(n) }]),
            (y.traffic.age = n),
            d.ps_redirect_test || b(),
            t(!0)
          );
        };
      function w(e, n) {
        var e = new Date(e, n - 1),
          n = new Date();
        if (!(n < e))
          return (
            (n = Math.floor((n - e) / 864e5)),
            (e = Math.floor(n / 365)),
            (n = Math.floor((n % 365) / 31)),
            parseInt((12 * e + n) / 12)
          );
      }
      var O = function (e, n, t, r) {
          return (
            (y.userObj.relationship = n),
            (y.respondentProfile.target.relationships = []),
            y.respondentProfile.target.relationships.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.relationship = n),
            (y.traffic.relationship_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        E = function (e, n, t, r) {
          return (
            (y.traffic.children_code = t = 112 < t ? 112 : t),
            (y.userObj.kids = []),
            (y.traffic.children = n),
            (y.traffic.children_code = t),
            (y.respondentProfile.target.children[0] = { id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.kids = y.userObj.kids),
            v(y.userObj.kids),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        C = function (e, n, t, r) {
          var a = /^([0-9]{1,6})$/i,
            t = t.split("_");
          return (
            "JP" == t[1] || "CO" == t[1] || "ID" == t[1]
              ? (a = /^([0-9]{1,9})$/i)
              : "PH" == t[1] || "CL" == t[1]
              ? (a = /^([0-9]{1,8})$/i)
              : "KR" == t[1] || "ID" == t[1]
              ? (a = /^([0-9]{1,10})$/i)
              : ("AR" != t[1] && "CN" != t[1] && "MX" != t[1]) ||
                (a = /^([0-9]{1,7})$/i),
            (y.respondentProfile.target.houseHoldIncome = []),
            (t = parseInt(n)),
            (y.respondentProfile.target.houseHoldIncome[0] = {
              value: parseInt(t),
            }),
            (y.respondentProfile.targetv2[e] = [{ value: parseInt(t) }]),
            (y.traffic.income = t),
            a.test(parseInt(n))
              ? (d.ps_redirect_test || b(), r(!0))
              : (i({
                  message: "invalid income",
                  classes: "alert-warning",
                  duration: 1e3,
                }),
                r(!1))
          );
        },
        R = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.employments = []),
            (y.userObj.employment = n),
            y.respondentProfile.target.employments.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.traffic.employment = n),
            (y.traffic.employment_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        },
        k = function (e, n, t, r) {
          return (
            (y.respondentProfile.target.educations = []),
            y.respondentProfile.target.educations.push({ id: parseInt(t) }),
            (y.respondentProfile.targetv2[e] = [{ id: parseInt(t) }]),
            (y.userObj.education = n),
            (y.traffic.education = n),
            (y.traffic.education_code = t),
            d.ps_redirect_test || b(),
            r(!0)
          );
        };
      function m(e) {
        (e.traffic = y.traffic),
          d.bsec && (e.bsec = d.bsec),
          d.tid && (e.tid = d.tid),
          (e.country_code = y.surveyTarget.country_code),
          s
            .answerByUser(e)
            .success(function (e) {
              e.url && (a.location.href = e.url);
            })
            .error(function (e) {});
      }
      y.makeMeDisabled = function () {
        (y.nextButtonDis = !0), (y.loader = { show: !0 });
      };
    },
  ]),
  angular.module("pureSpectrumApp").filter("customFilter", function () {
    return function (e, n) {
      return n
        ? e.filter(function (e) {
            return e.text.toLowerCase().includes(n.toLowerCase());
          })
        : e;
    };
  }),
  angular.module("pureSpectrumApp").directive("typeInputDir", [
    "$filter",
    "$document",
    "$compile",
    "$parse",
    "$timeout",
    "createSurvey",
    "$translate",
    "ngDragDrop",
    function (C, e, R, k, j, n, L, N) {
      return {
        restrict: "AE",
        scope: {
          tempType: "@",
          label: "@",
          placeholder: "@",
          format: "=",
          answers: "=",
          uniqueIndex: "@",
          id: "@",
          qualificationid: "@",
          qualificationclass: "@",
          locale: "@",
          model: "=",
          onChange: "&?",
          resetScreener: "&?",
          widthCallback: "&onLoadCallback",
          onModalClick: "&onPrivacyModalClick",
          ppQueLocaleText: "@",
          imageUrl: "@",
          imagesData: "=",
          onDrag: "&",
          onDrop: "&",
          onOver: "&",
          resetCounter: "=",
          getCaptchaSvg: "&getCaptcha",
        },
        link: function (l, t, n) {
          Object.values(l.answers).forEach(function (e) {
            e.answers.length &&
              (e.answers = e.answers.map(function (e) {
                return _objectSpread(
                  _objectSpread({}, e),
                  {},
                  { value: void 0 === e.value ? e.text : e.value }
                );
              }));
          });
          function e(e, n) {
            return Math.floor(Math.random() * (n - e + 1) + e);
          }
          function s() {
            return 0 < l.resetCounter && l.resetCounter < 2;
          }
          function o() {
            var e;
            i &&
              ((e = N.getDefaults()),
              N.setup({
                elem: t,
                attrs: n,
                scope: l,
                listeners: {
                  onDrag: l.onDrag || function () {},
                  onDrop: l.onDrop || function () {},
                  onOver: l.onOver || function () {},
                },
                styles: JSON.parse(n.styles) || e.styles,
              }));
          }
          var r,
            a = 6,
            i =
              ((l.answerObj = []), (l.outputList = []), l.widthCallback(), !1),
            u =
              ((l.showResetButton = !1),
              (l.showResetButton = s()),
              (l.open = function () {
                l.onModalClick();
              }),
              function (e, n) {
                e ? console.log("error") : (t.html(n), R(t.contents())(l)), o();
              }),
            d = "<h5 class='covered-if '>",
            c = (v = l.label).match(/%%(\d*)%%+/g);
          for (r in c) c[r] = c[r].replace(/%%*/g, "");
          var p,
            f = (f = angular.copy(l.locale)).split("_")[0],
            m =
              (L.use(f),
              c &&
                "218" == c[0] &&
                -1 != v.indexOf("children") &&
                (v = v.replace(
                  "children",
                  '<span id="child_string">children</span>'
                )),
              c &&
                "215" == c[0] &&
                -1 != v.indexOf(C("translate")("employed")) &&
                (v = v.replace(
                  C("translate")("employed"),
                  '<span id="emp_string">' +
                    C("translate")("employed") +
                    "</span>"
                )),
              (l.answers = l.answers),
              (l.units = k(n.units)(l.$parent)),
              []);
          for (p in c)
            m.push(p + "_" + c[p] + "_" + l.answers[c[p]].answer_type);
          var y,
            g = m.join("-");
          for (y in c) {
            var h,
              _,
              v,
              I,
              b,
              w,
              S,
              A,
              P,
              T = y + l.id + l.uniqueIndex + "_" + c[y];
            if (
              (("input" != l.answers[c[y]].answer_type &&
                "calculation" != l.answers[c[y]].answer_type) ||
                ((E = (E = l.locale.split("_"))[E.length - 1]),
                (I = "field-zip-code"),
                (_ = 5),
                (b = h = S = ""),
                -1 != v.indexOf("%%213%%") &&
                  ((_ = 6),
                  (S = 0),
                  (h = 999999),
                  (b = "incomeWidth"),
                  ("QA" != E &&
                    "AE" != E &&
                    "HK" != E &&
                    "RO" != E &&
                    "BG" != E &&
                    "IL" != E &&
                    "TH" != E &&
                    "KZ" != E &&
                    "TW" != E) ||
                    ((_ = 7), (h = 9999999)),
                  ("CZ" != E &&
                    "BH" != E &&
                    "MD" != E &&
                    "JM" != E &&
                    "ET" != E &&
                    "GE" != E &&
                    "CI" != E &&
                    "KG" != E &&
                    "BY" != E &&
                    "RU" != E &&
                    "AL" != E) ||
                    ((_ = 8), (h = 99999999)),
                  ("HU" != E && "UZ" != E && "AO" != E && "AR" != E) ||
                    ((_ = 9), (h = 999999999)),
                  ("RS" != E &&
                    "JO" !== E &&
                    "SV" != E &&
                    "GT" != E &&
                    "MZ" != E &&
                    "KE" != E &&
                    "MA" != E &&
                    "DZ" != E &&
                    "UY" != E &&
                    "OM" != E &&
                    "PY" != E &&
                    "PA" != E &&
                    "HT" != E &&
                    "XK" != E &&
                    "CD" != E &&
                    "RW" != E &&
                    "GH" != E &&
                    "SD" != E &&
                    "MT" != E &&
                    "CY" != E &&
                    "LU" != E &&
                    "AM" != E &&
                    "NP" != E &&
                    "LK" != E &&
                    "TJ" != E &&
                    "TM" != E &&
                    "NG" != E &&
                    "BO" != E &&
                    "VE" != E &&
                    "EG" != E) ||
                    ((_ = 8), (h = 99999999))),
                -1 != v.indexOf("%%230%%") && (_ = 2),
                "IN" == E ||
                "CN" == E ||
                "CA" == E ||
                "CN" == E ||
                "AE" == E ||
                "TR" == E ||
                "SE" == E ||
                "PE" == E ||
                "CL" == E ||
                "NL" == E ||
                "MM" == E ||
                "EG" == E
                  ? ((I = "field-zip-code-ca"), (_ = 7))
                  : "UK" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-uk"), (_ = 7))
                  : "SV" == E ||
                    "MD" == E ||
                    "AM" == E ||
                    "NO" == E ||
                    "VE" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-uk"), (_ = 4))
                  : "JP" == E
                  ? (-1 != v.indexOf("%%229%%") &&
                      ((I = "field-zip-code-jp"), (_ = 8)),
                    -1 != v.indexOf("%%213%%") &&
                      ((_ = 9), (S = 0), (h = 1e8), (b = "incomeWidth-jp")))
                  : "PH" == E
                  ? (-1 != v.indexOf("%%229%%") && (I = "field-zip-code-ph"),
                    -1 != v.indexOf("%%213%%") &&
                      ((_ = 8), (S = 0), (h = 1e7), (b = "incomeWidth-ph")))
                  : "CL" == E
                  ? (-1 != v.indexOf("%%229%%") && (I = "field-zip-code-ph"),
                    -1 != v.indexOf("%%213%%") &&
                      ((_ = 8),
                      (S = 0),
                      (h = 99999999),
                      (b = "incomeWidth-ph")))
                  : "CO" == E || "ID" == E
                  ? (-1 != v.indexOf("%%229%%") &&
                      ("CO" == E
                        ? ((I = "field-zip-code-ca"), (_ = 6))
                        : (I = "field-zip-code-jp")),
                    -1 != v.indexOf("%%213%%") &&
                      ((_ = 9),
                      (S = 0),
                      (h = 999999999),
                      (b = "incomeWidth-jp"),
                      "ID" == E) &&
                      ((_ = 10), (h = 9999999999), (b = "incomeWidth-kr")))
                  : "KR" == E ||
                    "UA" == E ||
                    "TR" == E ||
                    "CR" == E ||
                    "MX" == E ||
                    "PR" == E ||
                    "PK" == E ||
                    "KW" == E ||
                    "EE" == E ||
                    "IQ" == E ||
                    "SA" == E ||
                    "VN" == E ||
                    "EG" == E
                  ? (-1 != v.indexOf("%%229%%") &&
                      ((I = "field-zip-code-KR"), (_ = 5)),
                    -1 != v.indexOf("%%213%%") &&
                      (b =
                        ((h =
                          "CR" == E || "MX" == E
                            ? ((_ = 7), (S = 0), 9999999)
                            : ((_ = 10), (S = 0), 9999999999)),
                        "incomeWidth-kr")))
                  : "BR" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-br"), (_ = 9))
                  : "PT" == E || "IL" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-pt"), (_ = 8))
                  : "PL" == E ||
                    "RU" == E ||
                    "EC" == E ||
                    "GR" == E ||
                    "SK" == E ||
                    "CZ" == E ||
                    "RO" == E ||
                    "KH" == E ||
                    "UZ" == E ||
                    "PY" == E ||
                    "AZ" == E ||
                    "KG" == E ||
                    "TM" == E ||
                    "BY" == E ||
                    "SG" == E ||
                    "TW" == E ||
                    "NG" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-br"), (_ = 6))
                  : "AT" == E ||
                    "CH" == E ||
                    "AU" == E ||
                    "PH" == E ||
                    "BE" == E ||
                    "BD" == E ||
                    "HU" == E ||
                    "BG" == E ||
                    "SI" == E ||
                    "LV" == E ||
                    "HT" == E ||
                    "GE" == E ||
                    "DK" == E ||
                    "AL" == E ||
                    "ZA" == E ||
                    "BH" == E ||
                    "EG" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-br"), (_ = 4))
                  : "MY" == E || "LT" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-my"), (_ = 5))
                  : "GH" == E || "IE" == E || "KZ" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-gh"), (_ = 3))
                  : "MT" == E
                  ? -1 != v.indexOf("%%229%%") &&
                    ((I = "field-zip-code-mt"), (_ = 7))
                  : "AR" == E &&
                    (-1 != v.indexOf("%%229%%") &&
                      ((I = "field-zip-code-br"), (_ = 9)),
                    -1 != v.indexOf("%%213%%")) &&
                    ((_ = 9), (S = 0), (h = 999999999), (b = "incomeWidth-ar")),
                501 === l.units && ((S = 0), (h = 99), (_ = 2)),
                l.qualificationclass == a &&
                  l.format &&
                  "object" === _typeof(l.format) &&
                  0 < Object.keys(l.format).length &&
                  ((S = (E = l.format).min || 0),
                  (h = E.max || 99999),
                  E.minlength,
                  (_ = E.maxlength || 5)),
                (E = l.answers[c[y]].answer_type),
                (w = "handleInput(answerObj[p].userAnswer, "
                  .concat(l.id, ", ")
                  .concat(c[y], ", ")
                  .concat(l.uniqueIndex, ",'")
                  .concat(g, "','")
                  .concat(T, "','")
                  .concat(E, "')")),
                (S =
                  '<span class="selectid selectid-' +
                  c[y] +
                  '">' +
                  l.answers[c[y]].answer_placeholder +
                  '</span><span><input e2e-data="' +
                  c[y] +
                  "-" +
                  l.id +
                  '" type="text" ng-init="focus=false" ng-focus="focus = true" ng-blur="focus = false" ng-class="{\'hide-placeholder\':focus}" min="' +
                  S +
                  '" max="' +
                  h +
                  '" maxlength="' +
                  _ +
                  '" ng-model-options="{debounce : 1000}" id="ans' +
                  T +
                  '" onkeypress="return validateQty(event, this, ' +
                  c[y] +
                  ",'" +
                  l.locale +
                  '\') || event.key ===`Backspace`" onkeyup="formatinput(event, this, ' +
                  c[y] +
                  ",'" +
                  l.locale +
                  '\')" class="text-center ' +
                  I +
                  " " +
                  b +
                  " answerid-" +
                  c[y] +
                  '" placeholder="' +
                  l.answers[c[y]].answer_placeholder +
                  '" ng-model="answerObj[p].userAnswer" ng-change="' +
                  w +
                  '" data-hj-whitelist/><span>'),
                (v = v.replace("%%" + c[y] + "%%", S)),
                "calculation" == E &&
                  ((h = e(1, 9)),
                  (_ = e(1, 9)),
                  (v = (v = v.replace("%%x%%", h)).replace("%%y%%", _)),
                  (l.answers[c[y]].calculation_expr = ""
                    .concat(h, "+")
                    .concat(_)))),
              "singlepunch" == l.answers[c[y]].answer_type &&
                ((D =
                  '<div class="select-dropdown dropdown" id="ans' +
                  T +
                  '"><a e2e-data="' +
                  c[y] +
                  "-" +
                  l.id +
                  '" id="answerid-' +
                  c[y] +
                  '" data-target="#" href="javascript:void(0)" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span>' +
                  l.answers[c[y]].answer_placeholder +
                  '</span></a><span class="caret"></span><ul class="dropdown-menu" aria-labelledby="answerid-' +
                  c[y] +
                  '">'),
                20 < l.answers[c[y]].answers.length &&
                  (D +=
                    '<li role="presentation"><a href="javascript:void(0)" id="search-filter-' +
                    c[y] +
                    '" ng-click="preventClick($event)"><input type="text" class="form-control" placeholder="Search" ng-model="searchText" /></a></li>'),
                (D =
                  D +
                  '<li ng-repeat="opts in answers['
                    .concat(
                      c[y],
                      '].answers | customFilter:searchText as filtered_result">\n                                            <a href="javascript:void(0)" id="'
                    )
                    .concat(c[y], "-{{opts.id}}-")
                    .concat(l.id, '" ng-click="handleClick(')
                    .concat(y, ", opts, ")
                    .concat(l.id, ", ")
                    .concat(c[y], ", ")
                    .concat(l.uniqueIndex, ", '")
                    .concat(g, "', '")
                    .concat(
                      T,
                      "', opts.translatedText || opts.text, opts.value, opts.id)\">{{ opts.translatedText || opts.text }}</a></li>"
                    ) +
                  '<li ng-show="!filtered_result.length"><a href="javascript:void(0)">No Match Found</a></li></ul></div>'),
                (v = v.replace("%%" + c[y] + "%%", D))),
              "singlepunch_alt" == l.answers[c[y]].answer_type &&
                (console.log(" singlePunch alt --\x3e", l.answers[c[y]]),
                (A = l.answers[c[y]].answers),
                (P = []),
                A.forEach(function (e) {
                  P.push(e);
                }),
                (l.inputList = P),
                (D =
                  (D =
                    '<div class="multipunch-options"><div class="multi-opt" ng-repeat="inputObj in inputList"><label>') +
                  '<input type="radio" ng-click="handleClick(' +
                  y +
                  ",{{$index}}," +
                  l.id +
                  "," +
                  c[y] +
                  "," +
                  l.uniqueIndex +
                  ",'" +
                  g +
                  "','" +
                  T +
                  "','{{inputObj.text}}','{{inputObj.text}}',{{inputObj.id}})\" name=\"" +
                  l.id +
                  '"><span>{{inputObj.text}}</span></label></div></div>'),
                (v = v.replace("%%" + c[y] + "%%", D))),
              ("openended" != l.answers[c[y]].answer_type &&
                "upload" != l.answers[c[y]].answer_type &&
                "captcha" != l.answers[c[y]].answer_type) ||
                ((D = ""),
                (b = !(I = 100)),
                (w =
                  "showArrow = true; handleOpenEndedChange(" +
                  l.id +
                  "," +
                  c[y] +
                  ", " +
                  l.uniqueIndex +
                  ");"),
                (S =
                  '<span ng-init="showArrow = true" ng-show="answerObj[p].userAnswer && showArrow" ng-click="showArrow = !showArrow; handleOpenEnded(answerObj[p].userAnswer, ' +
                  l.id +
                  "," +
                  c[y] +
                  ", " +
                  l.uniqueIndex +
                  ",'" +
                  g +
                  "','" +
                  T +
                  '\')"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>'),
                "upload" == l.answers[c[y]].answer_type &&
                  ((D = "<img src = " + l.imageUrl + ">"),
                  (S = ""),
                  (I = 1e3),
                  (w +=
                    "handleOpenEnded(answerObj[p].userAnswer, " +
                    l.id +
                    "," +
                    c[y] +
                    ", " +
                    l.uniqueIndex +
                    ",'" +
                    g +
                    "','" +
                    T +
                    "')\"")),
                "captcha" == l.answers[c[y]].answer_type &&
                  ((b = !0),
                  l.getCaptchaSvg().then(function (e) {
                    var t = !1,
                      n = e.data.data,
                      e = e.data.reachedRefreshButtonThreshold,
                      r = $("<div></div>"),
                      a = $('<div id="pscaptcha"></div>'),
                      i = $(
                        '<button class="refresh-btn" id="refresh-captcha-btn" type="button"><img class="refresh-icon" src="img/refresh.svg" alt="refresh"/></button>'
                      ),
                      s = $(
                        '<img id="pscaptcha" src="img/small-loader.gif" class="loader-icon" alt="loading"/>'
                      );
                    i.on("click", function () {
                      t ||
                        ($("#pscaptcha").replaceWith(s),
                        (t = !0),
                        l.resetScreener({
                          q_id: c[y],
                          id: l.id,
                          unique_index: l.uniqueIndex,
                          isAutoAnswer: !1,
                        }),
                        l.getCaptchaSvg({ refresh: !0 }).then(function (e) {
                          (t = t && !1),
                            e.data.reachedRefreshButtonThreshold &&
                              $("#refresh-captcha-btn").remove();
                          var e = e.data.data,
                            n = $('<div id="pscaptcha"></div>');
                          n.append(e),
                            $("#pscaptcha").replaceWith(n),
                            $("#ans".concat(T)).val("");
                        }));
                    }),
                      a.append(n),
                      r.append(a),
                      e || r.append(i),
                      $("#pscaptcha").replaceWith(r);
                  }),
                  (S = ""),
                  (w =
                    "showArrow = false; handlePsCaptcha(answerObj[p].userAnswer, "
                      .concat(l.id, ", ")
                      .concat(c[y], ", ")
                      .concat(l.uniqueIndex, ", '")
                      .concat(g, "', '")
                      .concat(T, "')")),
                  (D =
                    '<img id="pscaptcha" src="img/small-loader.gif" class="loader-icon" alt="loading"/>'),
                  (I = 1e3)),
                (D =
                  D +
                  ('<span><input type="textarea" ng-init="focus=false" ng-focus="focus = true" ng-blur="focus = false" ng-class="{\'hide-placeholder\':focus}" ng-model-options="{debounce : ' +
                    I +
                    '}" id="ans' +
                    T +
                    '" class="text-center data-hj-allow" placeholder="' +
                    l.answers[c[y]].answer_placeholder) +
                  '" ng-model="answerObj[p].userAnswer" ng-change="' +
                  w +
                  '" ' +
                  (b ? 'ng-minlength="6"' : "") +
                  '"/></span>' +
                  S),
                (v = v.replace("%%" + c[y] + "%%", D))),
              "multipunch" == l.answers[c[y]].answer_type &&
                ((A = l.answers[c[y]].answers),
                (P = []),
                A.forEach(function (e) {
                  P.push(e);
                }),
                (l.inputList = P),
                (D =
                  '<div class="multipunch-options"><div class="multi-opt" ng-repeat="inputObj in inputList"><label>'),
                (D =
                  (D +=
                    '<input type="checkbox" data-checklist-model="outputList" checklist-change="handleMultiPunch(' +
                    y +
                    ", " +
                    l.id +
                    ", " +
                    c[y] +
                    ", " +
                    l.uniqueIndex +
                    ",'" +
                    g +
                    "','" +
                    T +
                    '\')" data-checklist-value="inputObj">') +
                  '<span id="' +
                  c[y] +
                  '-{{inputObj.id}}">{{ (inputObj.translatedText || inputObj.text).split("&nbsp;").join(" ") }}</span></label></div></div>'),
                (v = v.replace("%%" + c[y] + "%%", D))),
              "range" == l.answers[c[y]].answer_type)
            ) {
              for (
                var D =
                    '<div class="select-dropdown dropdown hidden-sm hidden-xs" id="ans' +
                    T +
                    '"><a id="answerid-' +
                    c[y] +
                    '" data-target="#" href="javascript:void(0)" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span>' +
                    l.answers[c[y]].answer_placeholder +
                    '</span></a><span class="caret"></span><ul class="dropdown-menu" aria-labelledby="answerid-' +
                    c[y] +
                    '">',
                  x = l.answers[c[y]].answers.max;
                x > l.answers[c[y]].answers.min;
                x--
              )
                D +=
                  '<li><a href="javascript:void(0)" id="' +
                  c[y] +
                  "-" +
                  x +
                  '" ng-click="handleClick(' +
                  y +
                  "," +
                  x +
                  ", " +
                  l.id +
                  ", " +
                  c[y] +
                  ", " +
                  l.uniqueIndex +
                  ",'" +
                  g +
                  "','" +
                  T +
                  "'," +
                  x +
                  "," +
                  x +
                  ",'" +
                  x +
                  "')\">" +
                  x +
                  "</a></li>";
              D =
                (D =
                  (D =
                    (D =
                      D +
                      "</ul></div>" +
                      ('<div class="screener-custom-select hidden-lg hidden-md ans' +
                        T +
                        '" id="ans' +
                        T +
                        '">')) +
                    ('<span class="selectid selectid-' +
                      c[y] +
                      '">{{answers[' +
                      c[y] +
                      '].answer_placeholder || "Pick One"}}</span>')) +
                  ('<select id="answerid-' +
                    c[y] +
                    '" class="answerid-' +
                    c[y] +
                    '" ng-model="getselectedYear_' +
                    c[y] +
                    '" ng-change="setHandleClick(' +
                    y +
                    ", getselectedYear_" +
                    c[y] +
                    ", " +
                    l.id +
                    ", " +
                    c[y] +
                    ", " +
                    l.uniqueIndex +
                    ",'" +
                    g +
                    "','" +
                    T +
                    "', answers[" +
                    c[y] +
                    '])">')) +
                ('<option value="" disabled selected>{{answers[' +
                  c[y] +
                  '].answer_placeholder || "Pick One"}}</option>');
              for (
                x = l.answers[c[y]].answers.max;
                x > l.answers[c[y]].answers.min;
                x--
              )
                D += '<option value="' + x + '">' + x + "</option>";
              (D =
                (D += "</select>") + '<span class="caret"></span>' + "</div>"),
                (v = v.replace("%%" + c[y] + "%%", D));
            }
            if ("dragdrop" == l.answers[c[y]].answer_type) {
              i = !0;
              var q,
                D = '<div class="drag-drop-container">',
                Q =
                  ((D += '<div class="drag-container">'),
                  _createForOfIteratorHelper(l.imagesData.names));
              try {
                for (Q.s(); !(q = Q.n()).done; ) {
                  var O = q.value;
                  D =
                    (D =
                      (D += '<div class="draggable-item" dragIt="true">') +
                      ('<img src="' +
                        l.imagesData.path +
                        O +
                        '.png" alt="' +
                        O +
                        '" element_id="' +
                        O +
                        "_" +
                        T +
                        '" />')) +
                    ('<div id="drop_' +
                      O +
                      "_" +
                      T +
                      '" ng-click="handleDragDrop(' +
                      y +
                      "," +
                      x +
                      ", " +
                      l.id +
                      ", " +
                      c[y] +
                      ", " +
                      l.uniqueIndex +
                      ",'" +
                      g +
                      "','" +
                      T +
                      "'," +
                      x +
                      "," +
                      O +
                      ",'" +
                      O +
                      "')\" > </div>") +
                    "</div>";
                }
              } catch (e) {
                Q.e(e);
              } finally {
                Q.f();
              }
              D =
                (D =
                  (D =
                    (D += "</div>") +
                    '<div class="drop-container">' +
                    '<div id="drop-zone"></div>') +
                  ('<div ng-if="showResetButton" class="reset-loader"><i class="fa fa-undo" ng-click="resetDragNDrop(' +
                    l.id +
                    ", " +
                    c[y] +
                    ", " +
                    l.uniqueIndex +
                    ')"></i></div>')) +
                "</div>" +
                "</div>";
              var E = e(0, l.imagesData.names.length - 1);
              (l.answers[c[y]].ans_opt = l.imagesData.names[E]),
                (v = (v = v.replace("%%x%%", l.imagesData.names[E])).replace(
                  "%%" + c[y] + "%%",
                  D
                ));
            }
          }
          (d += v + "</h5>"),
            u(
              null,
              (d =
                99996 === parseInt(l.qualificationid)
                  ? d.replace(
                      "p_policy",
                      " <a href='javascript:void(0);' ng-click='open()'> " +
                        l.ppQueLocaleText +
                        " <i class='fa fa-external-link'></i></a> "
                    )
                  : d)
            ),
            (l.handleInput = function (e, n, t, r, a, i, s) {
              j(function () {
                l.onChange({
                  selectedId: "",
                  data: e,
                  id: n,
                  q_id: t,
                  groupQualificationIds: a,
                  element_id: i,
                  unique_index: r,
                  isAutoAnswer: !1,
                  question_type: s,
                });
              }, 100);
            }),
            (l.handleOpenEnded = function (e, n, t, r, a, i) {
              j(function () {
                l.onChange({
                  selectedId: "",
                  data: e,
                  id: n,
                  q_id: t,
                  groupQualificationIds: a,
                  element_id: i,
                  unique_index: r,
                  isAutoAnswer: !1,
                  question_type: "openended",
                }) && ((l.showArrow = !0), l.handleOpenEndedChange(n, t, r));
              }, 100);
            }),
            (l.handlePsCaptcha = function (e, n, t, r, a, i) {
              String(e || "").length < 6
                ? l.handleOpenEndedChange(n, t, r)
                : j(function () {
                    l.onChange({
                      selectedId: "",
                      data: e,
                      id: n,
                      q_id: t,
                      groupQualificationIds: a,
                      element_id: i,
                      unique_index: r,
                      isAutoAnswer: !1,
                      question_type: "openended",
                    }) &&
                      ((l.showArrow = !0), l.handleOpenEndedChange(n, t, r));
                  }, 100);
            }),
            (l.handleOpenEndedChange = function (e, n, t) {
              j(function () {
                l.resetScreener({
                  q_id: n,
                  id: e,
                  unique_index: t,
                  isAutoAnswer: !1,
                });
              }, 100);
            }),
            (l.handleMultiPunch = function (e, n, t, r, a, i) {
              if (
                (console.log(
                  "\n\n $scope.outputList ",
                  JSON.stringify(l.outputList)
                ),
                999 ===
                  (l.outputList.length
                    ? l.outputList[l.outputList.length - 1].id
                    : 0))
              )
                for (var s = l.outputList.length - 1; 0 <= s; s--)
                  999 !== l.outputList[s].id && l.outputList.splice(s, 1);
              else
                l.outputList.some(function (e) {
                  return 999 === e.id;
                }) && l.outputList.splice(0, 1);
              j(function () {
                l.onChange({
                  selectedId: l.outputList,
                  data: l.outputList,
                  id: n,
                  q_id: t,
                  groupQualificationIds: a,
                  element_id: i,
                  unique_index: r,
                  isAutoAnswer: !1,
                  question_type: "multipunch",
                });
              }, 100);
            }),
            (l.setHandleClick = function (e, n, t, r, a, i, s, o) {
              var u, d;
              (o =
                "range" == o.answer_type
                  ? (d = u = n).toString()
                  : ((u = o.answers[n].text),
                    o.answers[n].text.indexOf("'") &&
                      o.answers[n].text.replace("'", "&lsquo;"),
                    (d = o.answers[n].value || u).indexOf("'") &&
                      d.replace("'", "&lsquo;"),
                    o.answers[n].id)),
                l.handleClick(e, n, t, r, a, i, s, u, d, o);
            }),
            (l.handleClick = function (e, n, t, r, a, i, s, o, u, d) {
              (l.searchText = ""),
                j(function () {
                  218 == r &&
                    document.getElementById("child_string") &&
                    (document.getElementById("child_string").innerHTML =
                      1 == u ? "child" : "children"),
                    (document.getElementById("ans" + s).firstChild.innerHTML =
                      o),
                    document
                      .getElementById("ans" + s)
                      .firstChild.setAttribute("itemVal", u),
                    l.onChange({
                      selectedId: d,
                      data: u,
                      id: t,
                      q_id: r,
                      groupQualificationIds: i,
                      element_id: s,
                      unique_index: a,
                      isAutoAnswer: !1,
                      question_type: "singlepunch",
                    }),
                    document.getElementById("emp_string") &&
                      (document.getElementById("emp_string").innerHTML =
                        215 != r || (111 != d && 112 != d && 115 != d)
                          ? C("translate")("employed")
                          : "");
                }, 100);
            }),
            (l.handleDragDrop = function (e, n, t, r, a, i, s, o, u, d) {
              (l.showResetButton = l.resetCounter < 2),
                l.onChange({
                  selectedId: d,
                  data: u,
                  id: t,
                  q_id: r,
                  groupQualificationIds: i,
                  element_id: s,
                  unique_index: a,
                  isAutoAnswer: !1,
                  question_type: "dragdrop",
                });
            }),
            (l.resetDragNDrop = function (r, a, i) {
              document
                .querySelectorAll(".draggable-item")
                .forEach(function (e) {
                  var n, t;
                  e.querySelector("img") ||
                    ((n = document.querySelector("#drop-zone img")) &&
                      ((t = n.cloneNode(!0)),
                      e.appendChild(t),
                      n.parentNode.removeChild(n),
                      o(),
                      l.resetCounter++,
                      (l.showResetButton = s())),
                    l.resetScreener({
                      q_id: a,
                      id: r,
                      unique_index: i,
                      isAutoAnswer: !1,
                    }));
                });
            }),
            (l.preventClick = function (e) {
              e.preventDefault(), e.stopPropagation();
            });
        },
      };
    },
  ]),
  angular.module("pureSpectrumApp").controller("segmentationCtrl", [
    "$scope",
    "segmentationService",
    "$stateParams",
    "$window",
    "$state",
    "$filter",
    "$location",
    "notify",
    "$rootScope",
    "$sce",
    "config",
    "CLOROX_SEGMENTATION_GRID_DATA",
    "PLK_SEGMENTATION_GRID_DATA_TT1",
    "PLK_SEGMENTATION_GRID_DATA_TT2",
    "JTI_SMOKERS_SEGMENTATION_DATA",
    "MULTI_LANG_CODE_MAPPING",
    function (f, m, y, a, i, s, o, u, d, l, g, e, n, t, r, h) {
      (f.language = y.langCode || "eng"),
        (f.languages = {}),
        (f.isNextDisabled = !0),
        (f.answeredQuals = []),
        (f.questionsToShow = []),
        (f.respondentQuestions = []),
        (f.redirectUrl = ""),
        (f.selectedAnswers = {}),
        (f.loader = { show: !0 }),
        (f.country =
          (null == y || null == (c = y.locale) || null == (c = c.split("_"))
            ? void 0
            : c[1]) || ""),
        (f.tempQuestions = []),
        (f.allQuestionData = []),
        (f.selectedGridAnswers = {}),
        (f.gridData = {}),
        (f.isSecondPage = !1),
        (f.jtiQuestions = r),
        (f.jtiQualificationData = []),
        (f.jtiAnswers = {}),
        (f.incomingParentQuals =
          (null == y || null == (c = y.parentQual)
            ? void 0
            : c.split(",").map(Number)) || []),
        (f.currentQuestionId = null),
        (f.currentParentQual = null),
        (f.currentAnswer = null),
        (f.currentQuesDescription = ""),
        (f.previousQuesDescription = ""),
        (f.primaryBranch = ""),
        (f.previousAnswerId = null),
        (f.hasQuestionToAsk = !1),
        (f.currentJtiQuestion = null),
        (f.showMultiLangChoices = "true" === y.showMultiLangChoices),
        (f.multiLangChoicesAnswer = null),
        (f.currentQual = null);
      var c,
        _ = 0;
      function v() {
        f.currentQual =
          _ < f.incomingParentQuals.length && "IN" !== f.country
            ? [f.incomingParentQuals[_]]
            : f.incomingParentQuals;
        var e = w(p(f.currentQual)).find(function (e) {
          return [
            g.SEL_CLOROX_SEGMENTATION_MP_CODE,
            g.PLK_QSR_SEGMENTATION_MP_CODE,
          ].includes(parseInt(e));
        });
        e
          ? ((f.gridParentQual = e), A())
          : parseInt(f.currentQual[0]) === g.JTI_SMOKERS_SEGMENTATION_MP_CODE
          ? m
              .getJtiQuestions()
              .success(function (e) {
                var n, t;
                e &&
                  ((e = e),
                  (n =
                    null == y || null == (n = y.locale)
                      ? void 0
                      : n.split("_")),
                  (n = _slicedToArray(n, 1)[0]),
                  (t =
                    e[
                      (n = "fr" === (n = "en" === n ? "eng" : n) ? "fre" : n)
                    ]) &&
                    f.jtiQuestions.forEach(function (e) {
                      e.translationTag &&
                        t[e.translationTag] &&
                        (e["question-text"] = t[e.translationTag]),
                        e.answers.forEach(function (e) {
                          e.translationTag &&
                            t[e.translationTag] &&
                            (e.text = t[e.translationTag]);
                        });
                    }),
                  P());
              })
              .error(function (e) {
                console.log("error in getting JTI translations", e), P();
              })
          : I(y);
      }
      function I(e, n) {
        var t = 1 < arguments.length && void 0 !== n && n;
        m.getSegmentQuestions(e)
          .success(function (e) {
            null != e && e.length
              ? (t && b(),
                (function (r, e) {
                  var a,
                    n =
                      2 < arguments.length &&
                      void 0 !== arguments[2] &&
                      arguments[2],
                    e = ((f.allQuestionData = r), w(p(e))),
                    t = _createForOfIteratorHelper(e);
                  try {
                    for (t.s(); !(a = t.n()).done; )
                      !(function () {
                        var e,
                          n = a.value,
                          t = r.find(function (e) {
                            return n.toString() in e;
                          });
                        t &&
                          ((t = t[n].segmentation_answers),
                          (t = s("orderBy")(
                            t,
                            "data.question_order_number",
                            !1
                          )),
                          (e = f.respondentQuestions).push.apply(
                            e,
                            _toConsumableArray(t)
                          ));
                      })();
                  } catch (e) {
                    t.e(e);
                  } finally {
                    t.f();
                  }
                  var i,
                    e = null;
                  f.isMultiChoiceChecked &&
                    (e =
                      null ==
                      (i = r.find(function (e) {
                        return e[g.MULTI_LANGUAGE_QUAL_CODE];
                      }))
                        ? void 0
                        : i[g.MULTI_LANGUAGE_QUAL_CODE]) &&
                    f.respondentQuestions.unshift(e);
                  (function () {
                    var e;
                    null != (e = f.respondentQuestions) &&
                      e.forEach(function (e) {
                        var n;
                        (e.question_text = (n = e.question_text)
                          ? n.replace(/%%\d+%%/g, "").trim()
                          : ""),
                          "string" == typeof e.question_text
                            ? (e.trustedQuestionText =
                                ((n = e.question_text), l.trustAsHtml(n)))
                            : (e.trustedQuestionText = null);
                      });
                  })(),
                    n &&
                      (f.respondentQuestions = f.respondentQuestions.map(
                        function (t) {
                          var e = f.originalRespondentQuestions.find(function (
                            e
                          ) {
                            return e.qualification_id == t.qualification_id;
                          });
                          return (
                            (e.translatedQuestionText = t.question_text),
                            (e.translatedQuestionTextTrusted =
                              t.trustedQuestionText),
                            e.answers.forEach(function (n) {
                              var e = t.answers.find(function (e) {
                                return e.id == n.id;
                              });
                              e && (n.translatedText = e.text);
                            }),
                            e
                          );
                        }
                      ));
                  S(!!e);
                })(e, f.currentQual, t),
                (f.loader = { show: !1 }))
              : D("error");
          })
          .error(function (e) {
            D("error", e);
          });
      }
      function b() {
        (f.originalRespondentQuestions = _toConsumableArray(
          f.respondentQuestions
        )),
          (f.respondentQuestions = []),
          (f.tempQuestions = []),
          (f.answeredQuals = []),
          (f.multiLangChoicesAnswer =
            f.selectedAnswers[g.MULTI_LANGUAGE_QUAL_CODE]),
          (f.selectedAnswers = {}),
          f.questionsToShow.splice(0, f.questionsToShow.length);
      }
      function p(e) {
        var n = g.DECIPHER_SEG_QUAL_FOR_MAP.reduce(function (e, n, t) {
          return (e[n] = g.MP_SEG_QUAL_FOR_MAP[t]), e;
        }, {});
        return e.map(function (e) {
          return e in n ? n[e] : e;
        });
      }
      function w(e) {
        return _toConsumableArray(new Set(e));
      }
      function S(e) {
        var e = 0 < arguments.length && void 0 !== e && e;
        f.hasDependentQuestion() || e
          ? ((f.tempQuestions = f.respondentQuestions),
            (e = null == (e = f.tempQuestions) ? void 0 : e[0]),
            f.questionsToShow.push(e))
          : f.respondentQuestions.forEach(function (e) {
              var n, t;
              "input" == e.question_type &&
                (((n = e).format = n.format || {}),
                ((n = n.format).min = null != (t = n.min) ? t : ""),
                (n.max = null != (t = n.max) ? t : ""),
                (n.minlength = null != (t = n.minlength) ? t : ""),
                (n.maxlength = null != (t = n.maxlength) ? t : ""),
                (n.regex = null != (t = n.regex) ? t : "")),
                f.questionsToShow.push(e);
            });
      }
      function A() {
        (f.gridData =
          f.isSecondPage ||
          parseInt(f.gridParentQual) !== g.SEL_CLOROX_SEGMENTATION_MP_CODE
            ? f.isSecondPage ||
              parseInt(f.gridParentQual) !== g.PLK_QSR_SEGMENTATION_MP_CODE
              ? t
              : n
            : e),
          "string" == typeof f.gridData.title &&
            (f.gridData.title = l.trustAsHtml(f.gridData.title)),
          f.gridData.headerRows.forEach(function (e) {
            e.headers.forEach(function (e) {
              var n = e.statement;
              e.trustedStatement =
                "string" == typeof n ? l.trustAsHtml(n) : null;
            });
          }),
          (f.loader = { show: !1 });
      }
      function P() {
        (f.jtiQualificationData = f.jtiQuestions.filter(function (e) {
          return "Q1" === e["question-number"];
        })),
          (f.loader = { show: !1 });
      }
      function T(e, n, t) {
        e &&
          (!t || (Array.isArray(t) && 0 === t.length)
            ? f.selectedAnswers.hasOwnProperty(e) && delete f.selectedAnswers[e]
            : ((t = Array.isArray(t) ? t : [t]),
              (f.selectedAnswers[e] = {
                data: t,
                segmentation: { isSegmentation: !0, parentQualId: n },
              })));
      }
      function D(e, n, t) {
        var r,
          n = 1 < arguments.length && void 0 !== n ? n : null,
          t = 2 < arguments.length && void 0 !== t ? t : null;
        "error" === e
          ? (((null != n && n.message) || (null != n && n.msg)) &&
              (u({
                message: n.message || n.msg,
                classes: "alert-danger",
                duration: 3e3,
              }),
              (d.errorMessage = n.message || n.msg)),
            i.go("error"))
          : ((e = t),
            "marketplace" !== y.psSource
              ? ((r = o.search().redirectUrl) ||
                  D("error", { msg: "Invalid Redirect Url" }),
                (f.redirectUrl = atob(r)))
              : (f.redirectUrl = y.redirectUrl + "&screenerId=" + y.screenerId),
            f.redirectUrl || D("error", { msg: "Invalid Redirect Url" }),
            (r = e ? "&".concat(e) : ""),
            (e = "".concat(f.redirectUrl).concat(r)),
            "marketplace" === y.psSource
              ? (sessionStorage.setItem("SS_startUrl", f.redirectUrl),
                m.addStartSurveyUrl(e),
                (a.location.href = f.redirectUrl))
              : (a.location.href = e));
      }
      (f.selectedGridFinalAnswers = {}),
        (r = "marketplace" === y.psSource),
        (c = !(r || (null != y && y.session_id))),
        null != y &&
        y.locale &&
        null != y &&
        y.parentQual &&
        null != y &&
        y.psSource &&
        !c &&
        !(function (e) {
          return (
            e &&
            (null == y ||
              !y.survey_id ||
              null == y ||
              !y.screenerId ||
              null == y ||
              !y.redirectUrl ||
              (null == (e = y.mpRedirectValidation)
                ? void 0
                : e.parentQualId) !== (null == y ? void 0 : y.parentQual) ||
              (null == (e = y.mpRedirectValidation) ? void 0 : e.locale) !==
                (null == y ? void 0 : y.locale) ||
              (null == (e = y.mpRedirectValidation) ? void 0 : e.surveyId) !==
                (null == y ? void 0 : y.survey_id))
          );
        })(r)
          ? new URLSearchParams(y.redirectUrl.split("?")[1]).has("screenerId")
            ? D("error", { msg: "Invalid Session" })
            : r
            ? v()
            : m
                .validateSession(
                  y.session_id,
                  f.incomingParentQuals,
                  y.psSource,
                  y.locale
                )
                .success(function (e) {
                  null != e && e.isValidSession
                    ? v()
                    : D("error", { msg: "Invalid Session" });
                })
                .error(function (e) {
                  D("error", e);
                })
          : D("error", { msg: "Invalid Url" }),
        (f.hasDependentQuestion = function () {
          return f.respondentQuestions.some(function (e) {
            return null == e || null == (e = e.dependent_qualifications)
              ? void 0
              : e.length;
          });
        }),
        (f.updateJtiQuestion = function (e) {
          (f.currentJtiQuestion = e), (f.isNextDisabled = !1);
        }),
        (f.checkFormCompletion = function (e) {
          for (
            var n,
              t = !0,
              r = "PLKTT1" !== (n = e) ? ("PLKTT2" !== n ? 13 : 7) : 9,
              a = [],
              i = 1;
            i <= r;
            i++
          ) {
            o = i;
            var s =
              "PLKTT1" !== (s = e)
                ? "PLKTT2" !== s
                  ? document.querySelector(
                      'input[name="CloroxQ'.concat(o.toString(), '"]:checked')
                    )
                  : document.querySelector(
                      'input[name="PLKQ2R'.concat(o.toString(), '"]:checked')
                    )
                : document.querySelector(
                    'input[name="PLKQ1R'.concat(o.toString(), '"]:checked')
                  );
            if (!s) {
              t = !1;
              break;
            }
            var o = s.value,
              s = s.name;
            a.push({ id: o, text: s });
          }
          (f.isNextDisabled = !t),
            (f.selectedGridAnswers[f.gridParentQual] = a);
        }),
        (f.formatInput = function (e, n) {
          var n = n.question_type;
          if ("input" == (void 0 === n ? null : n))
            return (
              (47 < (n = e.which || e.keyCode) && n < 58) ||
              (95 < n && n < 106) ||
              8 == n ||
              9 == n ||
              (e.preventDefault(), !1)
            );
        }),
        (f.updateInputAnswer = function (n, e, t) {
          var r;
          "" === t.target.value
            ? ((f.answeredQuals =
                null == (r = f.answeredQuals)
                  ? void 0
                  : r.filter(function (e) {
                      return e !== n;
                    })),
              delete f.selectedAnswers[n])
            : ((r = parseInt(t.target.value)),
              (f.selectedAnswers[n] = {
                data: [{ value: parseInt(r) }],
                segmentation: { isSegmentation: !0, parentQualId: e },
              }),
              f.answeredQuals.includes(n) ||
                (null != (t = f.answeredQuals) && t.push(n))),
            (f.isNextDisabled =
              (null == (r = f.questionsToShow) ? void 0 : r.length) !==
              (null == (e = f.answeredQuals) ? void 0 : e.length));
        }),
        (f.toggleSingleAnswer = function (e, n, t, r) {
          null != t &&
            t.id &&
            null != t &&
            t.text &&
            (f.hasDependentQuestion()
              ? ((f.currentQuestionId = e),
                (f.currentAnswer = t),
                (f.currentQuesDescription = r),
                (f.isNextDisabled = !1))
              : (f.answeredQuals.includes(e) ||
                  (null != (r = f.answeredQuals) && r.push(e)),
                (f.isNextDisabled =
                  (null == (r = f.questionsToShow) ? void 0 : r.length) !==
                  (null == (r = f.answeredQuals) ? void 0 : r.length))),
            T(e, n, t));
        }),
        (f.isMultiChoiceChecked = function (e, n) {
          var t;
          return (
            !(null == e || null == (t = e.userAnswer) || !t.length) &&
            -1 !==
              e.userAnswer.findIndex(function (e) {
                return e.id === n.id;
              })
          );
        }),
        (f.toggleMultiAnswer = function (e, n) {
          Array.isArray(e.userAnswer) || (e.userAnswer = []);
          var t,
            r = 999 === n.id,
            a = e.userAnswer.findIndex(function (e) {
              return e.id === n.id;
            }),
            r =
              (r
                ? -1 === a
                  ? (e.userAnswer = [n])
                  : e.userAnswer.splice(a, 1)
                : (-1 !==
                    (r = e.userAnswer.findIndex(function (e) {
                      return 999 === e.id;
                    })) && e.userAnswer.splice(r, 1),
                  -1 === a ? e.userAnswer.push(n) : e.userAnswer.splice(a, 1)),
              e.qualification_id);
          0 < e.userAnswer.length
            ? f.answeredQuals.includes(e.qualification_id) ||
              f.answeredQuals.push(e.qualification_id)
            : -1 !== (a = f.answeredQuals.indexOf(e.qualification_id)) &&
              f.answeredQuals.splice(a, 1),
            (f.isNextDisabled =
              f.questionsToShow.length !== f.answeredQuals.length),
            r === g.MULTI_LANGUAGE_QUAL_CODE
              ? ((a = r),
                (t = e.userAnswer),
                a &&
                  (!t || (Array.isArray(t) && 0 === t.length)
                    ? f.selectedAnswers.hasOwnProperty(a) &&
                      delete f.selectedAnswers[a]
                    : ((t = { data: Array.isArray(t) ? t : [t] }),
                      (f.selectedAnswers[a] = t))))
              : T(r, e.segmentation.parent_qualification_id, e.userAnswer);
        }),
        (f.initiateSaveAnswers = function () {
          var n,
            t,
            r,
            a,
            i,
            e,
            s,
            o,
            u,
            d,
            l,
            c,
            p = Object.keys(f.selectedAnswers);
          1 === p.length && p[0] == g.MULTI_LANGUAGE_QUAL_CODE
            ? ((f.isNextDisabled = !0),
              (p = f.selectedAnswers[g.MULTI_LANGUAGE_QUAL_CODE].data[0]),
              (p = h[p.id]),
              (e = y.locale.split("_")[1]),
              (p = "".concat(p, "_").concat(e)) === y.locale
                ? ((e = f.respondentQuestions.filter(function (e) {
                    return e.qualification_id !== g.MULTI_LANGUAGE_QUAL_CODE;
                  })),
                  b(),
                  (f.respondentQuestions = e),
                  S())
                : (delete (e = _objectSpread(
                    _objectSpread({}, y),
                    {},
                    { translateLocale: p }
                  )).showMultiLangChoices,
                  I(e, !0)))
            : (f.hasDependentQuestion() &&
                ("AR" !== f.country
                  ? (null !=
                      (p =
                        null ==
                        (p = f.questionsToShow.find(function (e) {
                          return f.currentQuestionId === e.qualification_id;
                        }))
                          ? void 0
                          : p.dependent_qualifications) &&
                      p.length &&
                      (f.answeredQuals.includes(f.currentQuestionId) &&
                        (-1 !==
                          (s = f.questionsToShow.findIndex(function (e) {
                            return e.qualification_id === f.currentQuestionId;
                          })) &&
                          ((f.questionsToShow = f.questionsToShow.slice(
                            0,
                            s + 1
                          )),
                          (f.answeredQuals = f.answeredQuals.slice(0, s))),
                        (f.selectedAnswers = Object.fromEntries(
                          Object.entries(f.selectedAnswers).filter(function (
                            e
                          ) {
                            e = _slicedToArray(e, 1)[0];
                            return f.answeredQuals.includes(parseInt(e));
                          })
                        )),
                        (f.tempQuestions = f.respondentQuestions)),
                      null !=
                        (n = p
                          .filter(function (e) {
                            return (
                              e.condition[0] ===
                              (null == (e = f.currentAnswer) ? void 0 : e.id)
                            );
                          })
                          .map(function (e) {
                            return e.respondent_question_id;
                          })) && n.length
                        ? ((t = p
                            .filter(function (e) {
                              return !n.includes(e.respondent_question_id);
                            })
                            .map(function (e) {
                              return e.respondent_question_id;
                            })),
                          (f.tempQuestions = f.tempQuestions.filter(function (
                            e
                          ) {
                            return !t.includes(e.qualification_id);
                          })))
                        : ((r = p.map(function (e) {
                            return e.respondent_question_id;
                          })),
                          (f.tempQuestions = f.tempQuestions.filter(function (
                            e
                          ) {
                            return !r.includes(e.qualification_id);
                          })))),
                    (s = f.tempQuestions.findIndex(function (e) {
                      return e.qualification_id === f.currentQuestionId;
                    })),
                    (a = f.tempQuestions[s + 1]),
                    -1 !== s &&
                      a &&
                      !f.questionsToShow.some(function (e) {
                        return e.qualification_id === a.qualification_id;
                      }) &&
                      f.questionsToShow.push(a))
                  : ((i = (function () {
                      var e =
                          (null == (t = f.currentAnswer) ? void 0 : t.id) ||
                          null,
                        n = null,
                        t = f.currentQuesDescription,
                        r = f.previousQuesDescription,
                        a = f.previousAnswerId;
                      switch (
                        (("ARQ5a" !== t && "ARQ5b" !== t) ||
                          (f.primaryBranch = t),
                        t)
                      ) {
                        case "ARQ1":
                          n = "ARQ2";
                          break;
                        case "ARQ2":
                          n = "ARQ3";
                          break;
                        case "ARQ3":
                          n = "ARQ4";
                          break;
                        case "ARQ4":
                          n =
                            111 === e
                              ? "ARQ5a"
                              : 112 === e
                              ? "ARQ5b"
                              : 113 === e
                              ? ""
                              : "ARQ10";
                          break;
                        case "ARQ5a":
                          n = 111 === e ? "ARQ8" : 112 === e ? "ARQ6" : "ARQ7";
                          break;
                        case "ARQ5b":
                          n = 111 === e ? "" : 112 === e ? "ARQ6" : "ARQ7";
                          break;
                        case "ARQ6":
                          n =
                            "ARQ5a" === r
                              ? 111 === e || 112 === e
                                ? "ARQ8"
                                : "ARQ7"
                              : 111 === e || 112 === e
                              ? ""
                              : "ARQ7";
                          break;
                        case "ARQ7":
                          n =
                            "ARQ5a" === r
                              ? "ARQ9"
                              : "ARQ5a" === f.primaryBranch && "ARQ6" === r
                              ? "ARQ10"
                              : "";
                          break;
                        case "ARQ8":
                          n =
                            "ARQ5a" !== r &&
                            ("ARQ6" !== r || 111 !== a) &&
                            "ARQ6" === r &&
                            112 === a
                              ? "ARQ10"
                              : "";
                          break;
                        case "ARQ9":
                          n = "ARQ10";
                          break;
                        default:
                          n = "";
                      }
                      return n;
                    })()),
                    (f.previousQuesDescription && !i) ||
                      ((p =
                        null ==
                        (e = f.respondentQuestions.filter(function (e) {
                          return e.question_description === i;
                        }))
                          ? void 0
                          : e[0]),
                      f.questionsToShow.push(p))),
                f.answeredQuals.includes(f.currentQuestionId) ||
                  (null != (s = f.answeredQuals) &&
                    s.push(f.currentQuestionId)),
                (f.hasQuestionToAsk =
                  (null == (p = f.questionsToShow) ? void 0 : p.length) !==
                  (null == (p = f.answeredQuals) ? void 0 : p.length)),
                (f.isNextDisabled = !0),
                (f.previousAnswerId =
                  null == (p = f.currentAnswer) ? void 0 : p.id),
                (f.previousQuesDescription = f.currentQuesDescription)),
              parseInt(f.currentQual[0]) ===
                g.JTI_SMOKERS_SEGMENTATION_MP_CODE &&
                ((f.hasQuestionToAsk = !0),
                (o =
                  "Q1" === (p = f.currentJtiQuestion)
                    ? [
                        "JTIQ2",
                        "JTIQ3",
                        "JTIQ4",
                        "JTIQ5",
                        "JTIQ6",
                        "JTIQ7",
                        "JTIQ8",
                      ]
                    : "Q2" === p
                    ? ["JTIQ3", "JTIQ4", "JTIQ5", "JTIQ6"]
                    : "Q3" === p
                    ? ["JTIQ4", "JTIQ6"]
                    : "Q6" === p
                    ? ["JTIQ7", "JTIQ8"]
                    : []),
                (f.jtiQualificationData = f.jtiQualificationData.filter(
                  function (e) {
                    return !o.includes(
                      null == (e = e.answers) || null == (e = e[0])
                        ? void 0
                        : e.name
                    );
                  }
                )),
                o.forEach(function (e) {
                  delete f.jtiAnswers[e];
                }),
                (p = "111"),
                (c = "112"),
                (d = f.jtiAnswers),
                (l = null),
                d.JTIQ1 === c && (l = "showJTIQ2"),
                d.JTIQ2 === p && d.JTIQ1 === c && (l = "showJTIQ3"),
                d.JTIQ3 === c &&
                  d.JTIQ2 === p &&
                  d.JTIQ1 === c &&
                  (l = "showJTIQ4"),
                d.JTIQ2 === c && d.JTIQ1 === c && (l = "showJTIQ5"),
                (d.JTIQ1 !== p && d.JTIQ3 !== p) || (l = "showJTIQ6"),
                ((d.JTIQ1 === p && d.JTIQ6 === p) ||
                  (d.JTIQ3 === p && d.JTIQ6 === p)) &&
                  (l = "showJTIQ7"),
                (u = l =
                  (d.JTIQ1 === p && d.JTIQ6 === c) ||
                  (d.JTIQ3 === p && d.JTIQ6 === c)
                    ? "showJTIQ8"
                    : l),
                (p = f.jtiQualificationData.some(function (e) {
                  return (null == e ? void 0 : e["visibility-tag"]) === u;
                })),
                u && !p
                  ? ((d = f.jtiQuestions.find(function (e) {
                      return e["visibility-tag"] === u;
                    })),
                    f.jtiQualificationData.push(d))
                  : (f.hasQuestionToAsk = !1)),
              f.hasQuestionToAsk ||
                (null != y &&
                  y.locale &&
                  f.selectedAnswers &&
                  (f.gridParentQual &&
                  parseInt(f.gridParentQual) ===
                    g.PLK_QSR_SEGMENTATION_MP_CODE &&
                  ((f.selectedGridAnswers[f.gridParentQual] = [].concat(
                    _toConsumableArray(
                      f.selectedGridFinalAnswers[f.gridParentQual] || []
                    ),
                    _toConsumableArray(
                      f.selectedGridAnswers[f.gridParentQual] || []
                    )
                  )),
                  !f.isSecondPage)
                    ? ((f.selectedGridFinalAnswers =
                        angular.copy(f.selectedGridAnswers) || {}),
                      (f.isSecondPage = !0),
                      (f.isNextDisabled = !0),
                      A())
                    : "marketplace" === y.psSource &&
                      null !== f.currentQual &&
                      _ < f.incomingParentQuals.length - 1 &&
                      "IN" !== f.country
                    ? (_++,
                      (f.isNextDisabled = !0),
                      (f.respondentQuestions = []),
                      (f.questionsToShow = []),
                      (f.answeredQuals = []),
                      (f.gridData = {}),
                      v())
                    : ((f.isNextDisabled = !0),
                      (c = (function () {
                        var e =
                            null == y || null == (e = y.locale)
                              ? void 0
                              : e.split("_"),
                          e = _slicedToArray(e, 2),
                          n = e[0],
                          e = e[1];
                        f.multiLangChoicesAnswer &&
                          (f.selectedAnswers[g.MULTI_LANGUAGE_QUAL_CODE] =
                            f.multiLangChoicesAnswer);
                        e = {
                          targetV2: f.selectedAnswers,
                          uploadRespondent: { country: e, language: n },
                        };
                        f.gridParentQual &&
                          ((e.advSegmentGridData = f.selectedGridAnswers),
                          (e.isGridQuestion = !0));
                        parseInt(f.currentQual[0]) ===
                          g.JTI_SMOKERS_SEGMENTATION_MP_CODE &&
                          ((n = Object.keys(f.jtiAnswers).map(function (e) {
                            return { id: f.jtiAnswers[e], text: e };
                          })),
                          (e.advSegmentGridData = _objectSpread(
                            _objectSpread({}, e.advSegmentGridData || {}),
                            {},
                            _defineProperty(
                              {},
                              g.JTI_SMOKERS_SEGMENTATION_MP_CODE,
                              n
                            )
                          )),
                          (e.isGridQuestion = !0));
                        return e;
                      })()),
                      m
                        .saveSegmentTraffic(y, c)
                        .success(function (e) {
                          var n;
                          null != e && null != (n = e.parentData) && n.length
                            ? D(
                                null,
                                null,
                                ("marketplace" === y.psSource
                                  ? e.parentData
                                  : [e.parentData[0]]
                                )
                                  .flatMap(function (e) {
                                    return Object.entries(e);
                                  })
                                  .map(function (e) {
                                    var e = _slicedToArray(e, 2),
                                      n = e[0],
                                      e = e[1];
                                    return ""
                                      .concat(encodeURIComponent(n), "=")
                                      .concat(encodeURIComponent(e));
                                  })
                                  .join("&")
                              )
                            : D("error");
                        })
                        .error(function (e) {
                          console.log("error in getting qualifications", e),
                            D("error", e);
                        })))));
        }),
        (f.isQuestionDataAvailable = function () {
          var e;
          return !!(
            (f.questionsToShow && f.questionsToShow.length) ||
            (f.gridData && f.gridData.tableRows) ||
            (null != (e = f.jtiQualificationData) && e.length)
          );
        });
    },
  ]),
  angular.module("pureSpectrumApp").factory("segmentationService", [
    "$http",
    "config",
    function (a, e) {
      var r = e.pureSpecturm.url,
        i = e.ZAPPI_BASE_URL,
        s = e.ASR_BASE_URL,
        n = "";
      return {
        getSegmentQuestions: function (e) {
          var n = "";
          return (
            null != e && e.locale && (n = "locale=" + e.locale),
            null != e && e.parentQual && (n = n + "&qualIds=" + e.parentQual),
            null != e && e.psSource && (n = n + "&psSource=" + e.psSource),
            null != e && e.session_id && (n = n + "&sessionId=" + e.session_id),
            null != e &&
              e.screenerId &&
              (n = n + "&screenerId=" + e.screenerId),
            null != e &&
              e.showMultiLangChoices &&
              (n = n + "&showMultiLangChoices=" + e.showMultiLangChoices),
            null != e &&
              e.translateLocale &&
              (n = n + "&translateLocale=" + e.translateLocale),
            a.get(r + "/v2/zappi/sel/qualifications?" + n)
          );
        },
        validateSession: function (e, n, t, r) {
          return a.get(("fusion" === t ? s : i) + "/validateSession/" + e, {
            params: { parentQualIds: n.join(","), locale: r },
          });
        },
        saveSegmentTraffic: function (e, n) {
          var t = "";
          return (
            null != e && e.psSource && (t = "&psSource=" + e.psSource),
            null != e &&
              e.screenerId &&
              (t = t + "&screenerId=" + e.screenerId),
            null != e && e.session_id && (t = t + "&sessionId=" + e.session_id),
            a.post(
              r +
                "/v2/zappi/segmentation/saveData?parentId=" +
                e.parentQual +
                t,
              n
            )
          );
        },
        getJtiQuestions: function () {
          return a.get(r + "/assets/zappi/translations_JTI.json");
        },
        addStartSurveyUrl: function (e) {
          n = e;
        },
        getStartSurveyUrl: function () {
          return n;
        },
      };
    },
  ]),
  angular
    .module("pureSpectrumApp")
    .constant("CLOROX_SEGMENTATION_GRID_DATA", {
      title:
        "Please read each pair of statements and decide which side you agree with more and whether you agree much more or somewhat more with that side.<br>Indicate one response per row",
      headerRows: [
        {
          headers: [
            {},
            { statement: "Side A", colspan: "2" },
            { statement: "Side B", colspan: "2" },
            {},
          ],
        },
        {
          headers: [
            {},
            { statement: "Agree Much More << ", colspan: "" },
            { statement: "Agree Somewhat More < ", colspan: "" },
            { statement: "Agree Somewhat More > ", colspan: "" },
            { statement: "Agree Much More >> ", colspan: "" },
            {},
          ],
        },
      ],
      tableRows: [
        {
          startStatement:
            "I try to protect myself and my family from as many germs as possible",
          endStatement:
            "I believe that exposure to certain germs can help strengthen our immune system",
          inputType: "radio",
          inputName: "CloroxQ1",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I prefer 'all-natural' cleaning and laundry products",
          endStatement:
            "'All-natural' cleaning and laundry products do not work as well as traditional ones",
          inputType: "radio",
          inputName: "CloroxQ2",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I opt for more powerful cleaning and laundry products, even if it means taking extra precautions while using them",
          endStatement:
            "I choose natural household cleaning and laundry products because they are safer",
          inputType: "radio",
          inputName: "CloroxQ3",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I only buy cleaning and laundry products that are safe to use around my kids and pets",
          endStatement:
            "I will buy the best cleaning and laundry product for the job",
          inputType: "radio",
          inputName: "CloroxQ4",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I prefer cleaning products that don't have strong chemicals",
          endStatement: "I prefer cleaning products that have strong chemicals",
          inputType: "radio",
          inputName: "CloroxQ5",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "Large, National cleaning and laundry brands work better than store-brand products",
          endStatement:
            "Store brand cleaning and laundry products are just as effective as name-brand products",
          inputType: "radio",
          inputName: "CloroxQ6",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I prefer cleaning and laundry products with strong cleaning agents I can smell",
          endStatement:
            "I prefer cleaning and laundry products with soft, natural fragrances",
          inputType: "radio",
          inputName: "CloroxQ7",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "Buying cleaning and laundry supplies is a chore that I try to complete as quickly as possible",
          endStatement: "I enjoy shopping for cleaning and laundry supplies",
          inputType: "radio",
          inputName: "CloroxQ8",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I will compromise on the cleaning and laundry products I purchase to save money",
          endStatement:
            "I will spend more to get the exact cleaning and laundry products that I want",
          inputType: "radio",
          inputName: "CloroxQ9",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I buy cleaning or laundry products that are on sale or promotion",
          endStatement:
            "I stick to the brands I know work better, even if they are more expensive",
          inputType: "radio",
          inputName: "CloroxQ10",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I am willing to pay for extra features in my cleaning and laundry products (e.g., scented, 2-in-1, etc.)",
          endStatement:
            "I prefer to save money by purchasing basic cleaning and laundry products",
          inputType: "radio",
          inputName: "CloroxQ11",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement: "I feel like I never have enough time to clean",
          endStatement: "I make the time to clean, no matter how long it takes",
          inputType: "radio",
          inputName: "CloroxQ12",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
        {
          startStatement:
            "I prefer brands and products that are environmentally conscious",
          endStatement:
            "I don't pay attention to whether brands and products are environmentally conscious",
          inputType: "radio",
          inputName: "CloroxQ13",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "",
        },
      ],
    })
    .constant("PLK_SEGMENTATION_GRID_DATA_TT1", {
      title:
        "Please read each pair of statements below and decide which one better describes you when it comes to food / eating and quick-service / fast food restaurants.<br>Select one per row.",
      headerRows: [
        {
          headers: [
            { statement: "STATEMENT A", colspan: "" },
            { statement: "A<br>describes me much better << ", colspan: "" },
            { statement: "A<br>describes me slightly better < ", colspan: "" },
            { statement: "B<br>describes me slightly better > ", colspan: "" },
            { statement: "B<br>describes me much better >> ", colspan: "" },
            { statement: "STATEMENT B", colspan: "" },
          ],
        },
      ],
      tableRows: [
        {
          startStatement: "I mostly stick to the foods I know and love",
          endStatement: "I enjoy / look forward to trying new foods",
          inputType: "radio",
          inputName: "PLKQ1R1",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "I tend to go for more convenient fast food options, even if I don’t like them as much",
          endStatement:
            "I’m willing to make an effort / take the time to get better fast food",
          inputType: "radio",
          inputName: "PLKQ1R2",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "When buying fast food, I want the lowest possible price",
          endStatement:
            "When buying fast food, I want the most bang for my buck",
          inputType: "radio",
          inputName: "PLKQ1R3",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement: "Eating fast food is part of my regular routine",
          endStatement:
            "Eating fast food is a special treat and/or occasional solution",
          inputType: "radio",
          inputName: "PLKQ1R4",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "I enjoy fast food even when there are other restaurant options",
          endStatement:
            "I only go to fast food restaurants as a last resort / when nothing else is available",
          inputType: "radio",
          inputName: "PLKQ1R5",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "I prefer fast/quick/casual restaurants where I can hang out",
          endStatement:
            "I prefer fast/quick/casual restaurants where I can get food quickly and leave",
          inputType: "radio",
          inputName: "PLKQ1R6",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement: "I try new fast food restaurants whenever I can",
          endStatement: "I tend to stick with the same fast food restaurants",
          inputType: "radio",
          inputName: "PLKQ1R7",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "I mostly pick fast food restaurants that I like myself",
          endStatement:
            "I mostly pick fast food restaurants that others in my group will like",
          inputType: "radio",
          inputName: "PLKQ1R8",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
        {
          startStatement:
            "I am usually willing to spend a little more to go to a more convenient fast food restaurant",
          endStatement:
            "I will typically go further out of my way to save some money on the meal",
          inputType: "radio",
          inputName: "PLKQ1R9",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT1",
        },
      ],
    })
    .constant("PLK_SEGMENTATION_GRID_DATA_TT2", {
      title:
        "Please read each pair of statements below and decide which one better describes you when it comes to food / eating and quick-service / fast food restaurants.<br>Select one per row.",
      headerRows: [
        {
          headers: [
            { statement: "STATEMENT A", colspan: "" },
            { statement: "A<br>describes me much better << ", colspan: "" },
            { statement: "A<br>describes me slightly better < ", colspan: "" },
            { statement: "B<br>describes me slightly better > ", colspan: "" },
            { statement: "B<br>describes me much better >> ", colspan: "" },
            { statement: "STATEMENT B", colspan: "" },
          ],
        },
      ],
      tableRows: [
        {
          startStatement: "I prefer quick service",
          endStatement: "I prefer friendly service",
          inputType: "radio",
          inputName: "PLKQ2R1",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "As long as the food is great, I don’t care what the restaurant looks like",
          endStatement:
            "An ugly and/or dirty restaurant interior can ruin the eating experience",
          inputType: "radio",
          inputName: "PLKQ2R2",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "I care more about consistency -- getting fast food that is guaranteed to be good",
          endStatement:
            "I’m willing to take a chance to get truly great fast food -- even if there’s the occasional dud",
          inputType: "radio",
          inputName: "PLKQ2R3",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "I prefer restaurants that offer a wide variety of menu items to choose from",
          endStatement:
            "I prefer restaurants that specialize in a smaller number of menu items",
          inputType: "radio",
          inputName: "PLKQ2R4",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "I’m okay with food being prepared ahead of time if I know it will be ready fast",
          endStatement:
            "I’m usually willing to wait longer for freshly made-to-order food",
          inputType: "radio",
          inputName: "PLKQ2R5",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "I like to get notifications / emails with the latest & greatest from my favorite fast food restaurants",
          endStatement:
            "I do whatever I can to avoid getting spammed with marketing/communications from fast food restaurants",
          inputType: "radio",
          inputName: "PLKQ2R6",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
        {
          startStatement:
            "When I order online/via app, I usually do it for the convenience ",
          endStatement:
            "When I order online/via app, I usually do it for the value/rewards ",
          inputType: "radio",
          inputName: "PLKQ2R7",
          inputValues: ["111", "112", "113", "114"],
          formCheckValue: "PLKTT2",
        },
      ],
    })
    .constant("JTI_SMOKERS_SEGMENTATION_DATA", [
      {
        "question-text":
          "Do you have any concerns when consuming nicotine products?",
        "visibility-tag": "showJTIQ1",
        translationTag: "q1Title",
        "question-number": "Q1",
        answers: [
          {
            type: "radio",
            name: "JTIQ1",
            translationTag: "q1Option1",
            value: "111",
            text: "Yes",
          },
          {
            type: "radio",
            name: "JTIQ1",
            translationTag: "q1Option2",
            value: "112",
            text: "No",
          },
        ],
      },
      {
        "question-text":
          "Who do you connect with while consuming nicotine products?",
        "visibility-tag": "showJTIQ2",
        translationTag: "q2Title",
        "question-number": "Q2",
        answers: [
          {
            type: "radio",
            name: "JTIQ2",
            translationTag: "q2Option1",
            value: "111",
            text: "With me/ myself",
          },
          {
            type: "radio",
            name: "JTIQ2",
            translationTag: "q2Option2",
            value: "112",
            text: "With others",
          },
        ],
      },
      {
        "question-text":
          "Are you thinking about changing how you consume nicotine products?",
        "visibility-tag": "showJTIQ3",
        translationTag: "q3Title",
        "question-number": "Q3",
        answers: [
          {
            type: "radio",
            name: "JTIQ3",
            translationTag: "q3Option1",
            value: "111",
            text: "Yes",
          },
          {
            type: "radio",
            name: "JTIQ3",
            translationTag: "q3Option2",
            value: "112",
            text: "No",
          },
        ],
      },
      {
        "question-text": "You would say consuming nicotine products is…",
        "visibility-tag": "showJTIQ4",
        translationTag: "q4Title",
        "question-number": "Q4",
        answers: [
          {
            type: "radio",
            name: "JTIQ4",
            translationTag: "q4Option1",
            value: "111",
            text: "Just a habit",
          },
          {
            type: "radio",
            name: "JTIQ4",
            translationTag: "q4Option2",
            value: "112",
            text: "It is something that helps me express myself/ express who I am",
          },
        ],
      },
      {
        "question-text":
          "What do you like the most about consuming nicotine products?",
        "visibility-tag": "showJTIQ5",
        translationTag: "q5Title",
        "question-number": "Q5",
        answers: [
          {
            type: "radio",
            name: "JTIQ5",
            translationTag: "q5Option1",
            value: "111",
            text: "I like to discover and try new products, flavours, trends...",
          },
          {
            type: "radio",
            name: "JTIQ5",
            translationTag: "q5Option2",
            value: "112",
            text: "I do it while socializing / hanging out with other people",
          },
        ],
      },
      {
        "question-text":
          "What do you like the least about consuming nicotine containing products?",
        "visibility-tag": "showJTIQ6",
        translationTag: "q6Title",
        "question-number": "Q6",
        answers: [
          {
            type: "radio",
            name: "JTIQ6",
            translationTag: "q6Option1",
            value: "111",
            text: "The money I spend on it",
          },
          {
            type: "radio",
            name: "JTIQ6",
            translationTag: "q6Option2",
            value: "112",
            text: "It is not good for me/ for my family",
          },
        ],
      },
      {
        "question-text": "Regarding the cost of nicotine products…",
        "visibility-tag": "showJTIQ7",
        translationTag: "q7Title",
        "question-number": "Q7",
        answers: [
          {
            type: "radio",
            name: "JTIQ7",
            translationTag: "q7Option1",
            value: "111",
            text: "I can afford it, but I would like to spend my money wisely",
          },
          {
            type: "radio",
            name: "JTIQ7",
            translationTag: "q7Option2",
            value: "112",
            text: "I like consuming nicotine containing products, but it is a very expensive habit",
          },
        ],
      },
      {
        "question-text":
          "You would say you consume nicotine products because…?",
        "visibility-tag": "showJTIQ8",
        translationTag: "q8Title",
        "question-number": "Q8",
        answers: [
          {
            type: "radio",
            name: "JTIQ8",
            translationTag: "q8Option1",
            value: "111",
            text: "Because I like it, although I try not to do it in front of my family and the people I care for",
          },
          {
            type: "radio",
            name: "JTIQ8",
            translationTag: "q8Option2",
            value: "112",
            text: "I do it while I find a “me” moment/ relaxing moment/ activating moment",
          },
        ],
      },
    ])
    .constant("MULTI_LANG_CODE_MAPPING", {
      111: "en",
      112: "hi",
      113: "te",
      114: "bn",
      115: "mr",
      116: "ml",
      117: "ta",
      118: "kn",
      119: "es",
    });
