(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8894],{7198:function(e,t,n){"use strict";var a=n(85893),r=n(86010),o=n(67294),i=n(59725),s=n.n(i);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.forwardRef((function(e,t){var n=e.className,o=c(e,["className"]);return(0,a.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){u(e,t,n[t])}))}return e}({ref:t,className:(0,r.Z)(s().input,n),type:"text"},o))}));t.Z=l},98894:function(e,t,n){"use strict";n.r(t),n.d(t,{FeedbackButtons:function(){return A},REASON_ENUM:function(){return C},default:function(){return P},showReasonDetail:function(){return T},useLastPending:function(){return E}});var a,r=n(85893),o=n(27484),i=n.n(o),s=n(94712),u=n.n(s),c=n(67294),l=(n(22578),n(67912)),d=n(61784),f=n.n(d),m=n(40406),b=n(22946),p=n(59873),h=n(48020);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y.apply(this,arguments)}var v=function(e){return c.createElement("svg",y({height:16,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492.004 492.004",xmlSpace:"preserve"},e),a||(a=c.createElement("path",{d:"M484.14 226.886 306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"})))},O=n(7198),g=n(29059),M=n(87631),_=n(21344),S=n(84646);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(u){s=!0,r=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=n(48581),x=n(95064);i().extend(u());var N="Thank you. We use your feedback to improve your experience with our survey partners.",C={TOO_LONG:"TOO_LONG",STUCK:"STUCK",NOT_MOBILE_OPTIMISED:"NOT_MOBILE_OPTIMISED",NOT_MOBILE_COMPATIBLE:"NOT_MOBILE_COMPATIBLE",SCAM:"SCAM",WRONG_LANGUAGE:"WRONG_LANGUAGE",CUSTOM:"CUSTOM",CUSTOM_EMPTY:"CUSTOM_EMPTY"},T=function(e){switch(e){case C.TOO_LONG:return{description:"\u23f0 The survey was too long",message:N};case C.STUCK:return{description:"\ud83d\ude35\u200d\ud83d\udcab I got stuck",message:N};case C.NOT_MOBILE_OPTIMISED:return{description:"\ud83d\udcf2 It wasn't great on mobile ".concat(""),message:N};case C.NOT_MOBILE_COMPATIBLE:return{description:"\ud83d\ude1e It didn't work on mobile ".concat(""),message:N};case C.SCAM:return{description:"\ud83d\udc7f It looked suspicious",message:N};case C.WRONG_LANGUAGE:return{description:"\ud83c\udf10 It was in the wrong language",message:N};case C.CUSTOM:return{description:"Other reasons",message:N};default:return{description:"",message:""}}},E=function(){return localStorage.getItem("lastPending")},A=function(e){var t=e.modalProps,n=e.onClose,a=(0,c.useState)(!1),o=a[0],i=a[1],s=(0,c.useState)(""),u=s[0],d=s[1],m=I((0,l.useMutation)(j),1)[0],b=(0,_.Z)(),p=function(){return o?u.length>0?f().active:f().focus:f().inactive},y=function(e){return function(){e===C.CUSTOM&&0===u.length||(m({variables:{input:{studyId:t.studyId||"missingFromSite",feedback:e,custom:u}}}),n(e))}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{"data-testid":"botton-too-long",className:f().feedbackButton,buttonSize:"large",onClick:y(C.TOO_LONG),children:(0,r.jsx)(S.Z,{children:T(C.TOO_LONG).description})}),(0,r.jsx)(h.Z,{"data-testid":"botton-stuck",className:f().feedbackButton,buttonSize:"large",onClick:y(C.STUCK),children:(0,r.jsx)(S.Z,{children:T(C.STUCK).description})}),(0,r.jsx)(h.Z,{"data-testid":"botton-not-mobile-optimised",className:f().feedbackButton,buttonSize:"large",onClick:y(C.NOT_MOBILE_OPTIMISED),children:(0,r.jsx)(S.Z,{children:T(C.NOT_MOBILE_OPTIMISED).description})}),(0,r.jsx)(h.Z,{"data-testid":"botton-not-mobile-compatible",className:f().feedbackButton,buttonSize:"large",onClick:y(C.NOT_MOBILE_COMPATIBLE),children:(0,r.jsx)(S.Z,{children:T(C.NOT_MOBILE_COMPATIBLE).description})}),(0,r.jsx)(h.Z,{"data-testid":"button-wrong-language",className:f().feedbackButton,buttonSize:"large",onClick:y(C.WRONG_LANGUAGE),children:(0,r.jsx)(S.Z,{children:T(C.WRONG_LANGUAGE).description})}),(0,r.jsx)(h.Z,{"data-testid":"botton-scam",className:f().feedbackButton,buttonSize:"large",onClick:y(C.SCAM),children:(0,r.jsx)(S.Z,{children:T(C.SCAM).description})}),(0,r.jsxs)("div",{className:f().otherContainer,children:[(0,r.jsx)(O.Z,{"data-testid":"input-other",className:p(),placeholder:b("Other..."),onChange:function(e){d(e.target.value),e.target.value?i(!0):i(!1)},onFocus:function(){i(!0)}}),(0,r.jsx)(h.Z,{"data-testid":"botton-other",className:p(),onClick:y(C.CUSTOM),children:(0,r.jsx)(v,{})})]})]})},w=function(e){var t=e.modalProps,n=e.onClose;return(0,r.jsxs)("div",{className:f().container,children:["PENDING"===t.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{component:"h2",children:"It looks as if you're still doing a survey. Is there a problem with it? \ud83e\udd28"}),(0,r.jsx)("div",{className:f().informationContainer,children:(0,r.jsx)(M._Y,{survey:t})}),(0,r.jsx)(S.Z,{component:"h3",children:"Remember, you can only do one survey at a time."}),(0,r.jsxs)("ul",{children:[(0,r.jsx)(S.Z,{component:"li",children:"If you have your original survey open, you can still complete it - just close this page."}),(0,r.jsx)(S.Z,{component:"li",children:"If there's a reason you closed your original survey, or you have feedback about it, please let us know below!"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{component:"h2",children:"Was there a problem with this survey?"}),(0,r.jsx)("div",{className:f().informationContainer,children:(0,r.jsx)(M._Y,{survey:t})})]}),(0,r.jsx)(A,{modalProps:t,onClose:n})]})},P=function(e){var t=e.defaultModalProps,n=(0,g.vR)(),a=n.hideModal,o=n.modalProps,i=(0,m.VY)(),s=t||o,u=I((0,l.useMutation)(x),1)[0];c.useEffect((function(){"PENDING"===(null===s||void 0===s?void 0:s.status)&&localStorage.setItem("lastPending",s.id)}),[s]);return(0,r.jsx)(p.Z,{onClose:function(){u({variables:{input:{studyId:s.studyId||"missingFromSite"}}}),a()},showClose:!0,children:(0,r.jsx)(w,{modalProps:s,onClose:function(e){a();var t=T(e).message;i.show(t,{type:"success",timeout:(0,b.Z)(t)})}})})}},95064:function(e,t,n){"use strict";n.r(t);var a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],kind:"ScalarField",name:"surveyAbandoned",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SurveyFeedbackModalAbandonedMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SurveyFeedbackModalAbandonedMutation",selections:t},params:{cacheID:"4ed005f6478a3251fa98b531a28cd502",id:null,metadata:{},name:"SurveyFeedbackModalAbandonedMutation",operationKind:"mutation",text:"mutation SurveyFeedbackModalAbandonedMutation(\n  $input: SurveyAbandonedInput!\n) {\n  surveyAbandoned(input: $input)\n}\n"}}}();a.hash="fdbae400eb035a6fac4939b382d57922",t.default=a},48581:function(e,t,n){"use strict";n.r(t);var a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],kind:"ScalarField",name:"surveyFeedback",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SurveyFeedbackModalMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SurveyFeedbackModalMutation",selections:t},params:{cacheID:"b71dd779e76cbfcdce056035a6953ebe",id:null,metadata:{},name:"SurveyFeedbackModalMutation",operationKind:"mutation",text:"mutation SurveyFeedbackModalMutation(\n  $input: SurveyFeedbackInput!\n) {\n  surveyFeedback(input: $input)\n}\n"}}}();a.hash="073fb9bd72f631d6caa83161e8e3d39f",t.default=a},59725:function(e){e.exports={input:"Input_input__QKMMD"}},61784:function(e){e.exports={container:"SurveyFeedbackModal_container__YRJez",text:"SurveyFeedbackModal_text__84kPg",feedbackButton:"SurveyFeedbackModal_feedbackButton__6Ohh7",customInput:"SurveyFeedbackModal_customInput__PMuZA",otherContainer:"SurveyFeedbackModal_otherContainer__9gjy8",focus:"SurveyFeedbackModal_focus__cxob6",active:"SurveyFeedbackModal_active__TzfQd",informationContainer:"SurveyFeedbackModal_informationContainer__PQw_u"}}}]);
//# sourceMappingURL=8894-f2a26b7ea713217a.js.map